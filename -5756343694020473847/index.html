<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.14.0/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css">

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"qiaogaojian.github.io","root":"/","scheme":"Gemini","version":"8.0.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":true,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}};
  </script>

  <meta name="description" content="原文地址 github.com  Comprehensive Python Cheatsheet. Contribute to gto76&#x2F;python-cheatsheet development by creating an acc......  Comprehensive Python Cheatsheet   Contents 1. Collections: List, Dictionar">
<meta property="og:type" content="article">
<meta property="og:title" content="Comprehensive Python Cheatsheet">
<meta property="og:url" content="https://qiaogaojian.github.io/-5756343694020473847/index.html">
<meta property="og:site_name" content="行则将至">
<meta property="og:description" content="原文地址 github.com  Comprehensive Python Cheatsheet. Contribute to gto76&#x2F;python-cheatsheet development by creating an acc......  Comprehensive Python Cheatsheet   Contents 1. Collections: List, Dictionar">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-10-18T14:15:16.000Z">
<meta property="article:modified_time" content="2022-10-19T01:44:43.055Z">
<meta property="article:author" content="qiaogaojian">
<meta property="article:tag" content="srcard">
<meta property="article:tag" content="python">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://qiaogaojian.github.io/-5756343694020473847/">


<script class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Comprehensive Python Cheatsheet | 行则将至</title>
  






  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">行则将至</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">人生在勤,不索何获</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <section class="post-toc-wrap sidebar-panel">
          <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#comprehensive-python-cheatsheet"><span class="nav-text">Comprehensive Python
Cheatsheet</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#contents"><span class="nav-text">Contents</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#main"><span class="nav-text">Main</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#list"><span class="nav-text">List</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#dictionary"><span class="nav-text">Dictionary</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#counter"><span class="nav-text">Counter</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#set"><span class="nav-text">Set</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#frozen-set"><span class="nav-text">Frozen Set</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#tuple"><span class="nav-text">Tuple</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#named-tuple"><span class="nav-text">Named Tuple</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#range"><span class="nav-text">Range</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#enumerate"><span class="nav-text">Enumerate</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#iterator"><span class="nav-text">Iterator</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#itertools"><span class="nav-text">Itertools</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#generator"><span class="nav-text">Generator</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#type"><span class="nav-text">Type</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#some-types-do-not-have-built-in-names-so-they-must-be-imported"><span class="nav-text">Some
types do not have built-in names, so they must be imported:</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#abstract-base-classes"><span class="nav-text">Abstract Base Classes</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#string"><span class="nav-text">String</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#property-methods"><span class="nav-text">Property
Methods</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#regex"><span class="nav-text">Regex</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#match-object"><span class="nav-text">Match Object</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#special-sequences"><span class="nav-text">Special
Sequences</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#format"><span class="nav-text">Format</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#attributes"><span class="nav-text">Attributes</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#general-options"><span class="nav-text">General
Options</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#strings"><span class="nav-text">Strings</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#numbers"><span class="nav-text">Numbers</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#floats"><span class="nav-text">Floats</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#comparison-of-presentation-types"><span class="nav-text">Comparison of presentation
types:</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ints"><span class="nav-text">Ints</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#numbers-1"><span class="nav-text">Numbers</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#basic-functions"><span class="nav-text">Basic
Functions</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#math"><span class="nav-text">Math</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#statistics"><span class="nav-text">Statistics</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#random"><span class="nav-text">Random</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#bin-hex"><span class="nav-text">Bin, Hex</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#bitwise-operators"><span class="nav-text">Bitwise
Operators</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#combinatorics"><span class="nav-text">Combinatorics</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#datetime"><span class="nav-text">Datetime</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#constructors"><span class="nav-text">Constructors</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#now"><span class="nav-text">Now</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#timezone"><span class="nav-text">Timezone</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#encode"><span class="nav-text">Encode</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#decode"><span class="nav-text">Decode</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#format-1"><span class="nav-text">Format</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#arithmetics"><span class="nav-text">Arithmetics</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#arguments"><span class="nav-text">Arguments</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#inside-function-call"><span class="nav-text">Inside
Function Call</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#inside-function-definition"><span class="nav-text">Inside Function Definition</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#splat-operator"><span class="nav-text">Splat
Operator</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#inside-function-call-1"><span class="nav-text">Inside Function Call</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#is-the-same-as"><span class="nav-text">Is the same
as:</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#inside-function-definition-1"><span class="nav-text">Inside Function Definition</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#legal-argument-combinations"><span class="nav-text">Legal argument
combinations:</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#other-uses"><span class="nav-text">Other Uses</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#inline"><span class="nav-text">Inline</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#lambda"><span class="nav-text">Lambda</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#comprehensions"><span class="nav-text">Comprehensions</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#map-filter-reduce"><span class="nav-text">Map, Filter,
Reduce</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#any-all"><span class="nav-text">Any, All</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#conditional-expression"><span class="nav-text">Conditional Expression</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#named-tuple-enum-dataclass"><span class="nav-text">Named Tuple, Enum, Dataclass</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#imports"><span class="nav-text">Imports</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#closure"><span class="nav-text">Closure</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#partial"><span class="nav-text">Partial</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#non-local"><span class="nav-text">Non-Local</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#decorator"><span class="nav-text">Decorator</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#debugger-example"><span class="nav-text">Debugger
Example</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#lru-cache"><span class="nav-text">LRU Cache</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#parametrized-decorator"><span class="nav-text">Parametrized Decorator</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#class"><span class="nav-text">Class</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#str-use-cases"><span class="nav-text">Str() use
cases:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#repr-use-cases"><span class="nav-text">Repr() use
cases:</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#constructor-overloading"><span class="nav-text">Constructor Overloading</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#inheritance"><span class="nav-text">Inheritance</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#multiple-inheritance"><span class="nav-text">Multiple Inheritance</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#property"><span class="nav-text">Property</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#dataclass"><span class="nav-text">Dataclass</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#inline-1"><span class="nav-text">Inline:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#rest-of-type-annotations-cpython-interpreter-ignores-them-all"><span class="nav-text">Rest
of type annotations (CPython interpreter ignores them all):</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#slots"><span class="nav-text">Slots</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#copy"><span class="nav-text">Copy</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#duck-types"><span class="nav-text">Duck Types</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#comparable"><span class="nav-text">Comparable</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#hashable"><span class="nav-text">Hashable</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#sortable"><span class="nav-text">Sortable</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#iterator-1"><span class="nav-text">Iterator</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#python-has-many-different-iterator-objects"><span class="nav-text">Python has many
different iterator objects:</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#callable"><span class="nav-text">Callable</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#context-manager"><span class="nav-text">Context
Manager</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#iterable-duck-types"><span class="nav-text">Iterable
Duck Types</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#iterable"><span class="nav-text">Iterable</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#collection"><span class="nav-text">Collection</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#sequence"><span class="nav-text">Sequence</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#discrepancies-between-glossary-definitions-and-abstract-base-classes"><span class="nav-text">Discrepancies
between glossary definitions and abstract base classes:</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#abc-sequence"><span class="nav-text">ABC Sequence</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#table-of-required-and-automatically-available-special-methods"><span class="nav-text">Table
of required and automatically available special methods:</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#enum"><span class="nav-text">Enum</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#inline-2"><span class="nav-text">Inline</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#user-defined-functions-cannot-be-values-so-they-must-be-wrapped"><span class="nav-text">User-defined
functions cannot be values, so they must be wrapped:</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#exceptions"><span class="nav-text">Exceptions</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#complex-example"><span class="nav-text">Complex
Example</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#catching-exceptions"><span class="nav-text">Catching
Exceptions</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#raising-exceptions"><span class="nav-text">Raising
Exceptions</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#re-raising-caught-exception"><span class="nav-text">Re-raising caught
exception:</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#exception-object"><span class="nav-text">Exception
Object</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#built-in-exceptions"><span class="nav-text">Built-in
Exceptions</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#collections-and-their-exceptions"><span class="nav-text">Collections and their
exceptions:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#useful-built-in-exceptions"><span class="nav-text">Useful built-in exceptions:</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#user-defined-exceptions"><span class="nav-text">User-defined Exceptions</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#exit"><span class="nav-text">Exit</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#print"><span class="nav-text">Print</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#pretty-print"><span class="nav-text">Pretty Print</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#input"><span class="nav-text">Input</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#command-line-arguments"><span class="nav-text">Command Line Arguments</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#argument-parser"><span class="nav-text">Argument
Parser</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#open"><span class="nav-text">Open</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#modes"><span class="nav-text">Modes</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#exceptions-1"><span class="nav-text">Exceptions</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#file-object"><span class="nav-text">File Object</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#read-text-from-file"><span class="nav-text">Read
Text from File</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#write-text-to-file"><span class="nav-text">Write Text
to File</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#paths"><span class="nav-text">Paths</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#direntry"><span class="nav-text">DirEntry</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#path-object"><span class="nav-text">Path Object</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#os-commands"><span class="nav-text">OS Commands</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#shell-commands"><span class="nav-text">Shell
Commands</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#sends-1-1-to-the-basic-calculator-and-captures-its-output"><span class="nav-text">Sends
&#39;1 + 1&#39; to the basic calculator and captures its output:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#sends-test.in-to-the-basic-calculator-running-in-standard-mode-and-saves-its-output-to-test.out"><span class="nav-text">Sends
test.in to the basic calculator running in standard mode and saves its
output to test.out:</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#json"><span class="nav-text">JSON</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#read-object-from-json-file"><span class="nav-text">Read Object from JSON File</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#write-object-to-json-file"><span class="nav-text">Write Object to JSON File</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#pickle"><span class="nav-text">Pickle</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#read-object-from-file"><span class="nav-text">Read
Object from File</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#write-object-to-file"><span class="nav-text">Write
Object to File</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#csv"><span class="nav-text">CSV</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#read"><span class="nav-text">Read</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#write"><span class="nav-text">Write</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#parameters"><span class="nav-text">Parameters</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#dialects"><span class="nav-text">Dialects</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#read-rows-from-csv-file"><span class="nav-text">Read Rows from CSV File</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#write-rows-to-csv-file"><span class="nav-text">Write Rows to CSV File</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sqlite"><span class="nav-text">SQLite</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#read-1"><span class="nav-text">Read</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#write-1"><span class="nav-text">Write</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#or"><span class="nav-text">Or:</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#placeholders"><span class="nav-text">Placeholders</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#example"><span class="nav-text">Example</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#sqlalchemy"><span class="nav-text">SqlAlchemy</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#bytes"><span class="nav-text">Bytes</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#encode-1"><span class="nav-text">Encode</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#decode-1"><span class="nav-text">Decode</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#read-bytes-from-file"><span class="nav-text">Read
Bytes from File</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#write-bytes-to-file"><span class="nav-text">Write
Bytes to File</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#struct"><span class="nav-text">Struct</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#format-2"><span class="nav-text">Format</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#for-standard-type-sizes-and-manual-alignment-padding-start-format-string-with"><span class="nav-text">For
standard type sizes and manual alignment (padding) start format string
with:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#besides-numbers-pack-and-unpack-also-support-bytes-objects-as-part-of-the-sequence"><span class="nav-text">Besides
numbers, pack() and unpack() also support bytes objects as part of the
sequence:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#integer-types.-use-a-capital-letter-for-unsigned-type.-minimum-and-standard-sizes-are-in-brackets"><span class="nav-text">Integer
types. Use a capital letter for unsigned type. Minimum and standard
sizes are in brackets:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#floating-point-types"><span class="nav-text">Floating point types:</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#array"><span class="nav-text">Array</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#memory-view"><span class="nav-text">Memory View</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#decode-2"><span class="nav-text">Decode</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#deque"><span class="nav-text">Deque</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#threading"><span class="nav-text">Threading</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#thread"><span class="nav-text">Thread</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#lock"><span class="nav-text">Lock</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#or-1"><span class="nav-text">Or:</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#semaphore-event-barrier"><span class="nav-text">Semaphore, Event, Barrier</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#thread-pool-executor"><span class="nav-text">Thread
Pool Executor</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#queue"><span class="nav-text">Queue</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#operator"><span class="nav-text">Operator</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#introspection"><span class="nav-text">Introspection</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#variables"><span class="nav-text">Variables</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#attributes-1"><span class="nav-text">Attributes</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#parameters-1"><span class="nav-text">Parameters</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#metaprogramming"><span class="nav-text">Metaprogramming</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#type-1"><span class="nav-text">Type</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#meta-class"><span class="nav-text">Meta Class</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#or-2"><span class="nav-text">Or:</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#metaclass-attribute"><span class="nav-text">Metaclass Attribute</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#type-diagram"><span class="nav-text">Type Diagram</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#inheritance-diagram"><span class="nav-text">Inheritance Diagram</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#eval"><span class="nav-text">Eval</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#coroutines"><span class="nav-text">Coroutines</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#runs-a-terminal-game-where-you-control-an-asterisk-that-must-avoid-numbers"><span class="nav-text">Runs
a terminal game where you control an asterisk that must avoid
numbers:</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#libraries"><span class="nav-text">Libraries</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#progress-bar"><span class="nav-text">Progress Bar</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#plot"><span class="nav-text">Plot</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#table"><span class="nav-text">Table</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#prints-a-csv-file-as-an-ascii-table"><span class="nav-text">Prints a CSV file as an
ASCII table:</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#curses"><span class="nav-text">Curses</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#runs-a-basic-file-explorer-in-the-terminal"><span class="nav-text">Runs a basic file
explorer in the terminal:</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#logging"><span class="nav-text">Logging</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#exceptions-2"><span class="nav-text">Exceptions</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#rotation"><span class="nav-text">Rotation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#retention"><span class="nav-text">Retention</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#scraping"><span class="nav-text">Scraping</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#scrapes-pythons-url-version-number-and-logo-from-its-wikipedia-page"><span class="nav-text">Scrapes
Python&#39;s URL, version number and logo from its Wikipedia page:</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#web"><span class="nav-text">Web</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#run"><span class="nav-text">Run</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#static-request"><span class="nav-text">Static
Request</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#dynamic-request"><span class="nav-text">Dynamic
Request</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#rest-request"><span class="nav-text">REST Request</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#test"><span class="nav-text">Test:</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#profiling"><span class="nav-text">Profiling</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#stopwatch"><span class="nav-text">Stopwatch</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#timing-a-snippet"><span class="nav-text">Timing a
Snippet</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#profiling-by-line"><span class="nav-text">Profiling by
Line</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#call-graph"><span class="nav-text">Call Graph</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#generates-a-png-image-of-the-call-graph-with-highlighted-bottlenecks"><span class="nav-text">Generates
a PNG image of the call graph with highlighted bottlenecks:</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#numpy"><span class="nav-text">NumPy</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#indexing"><span class="nav-text">Indexing</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#broadcasting"><span class="nav-text">Broadcasting</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#if-array-shapes-differ-in-length-left-pad-the-shorter-shape-with-ones"><span class="nav-text">1.
If array shapes differ in length, left-pad the shorter shape with
ones:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#if-any-dimensions-differ-in-size-expand-the-ones-that-have-size-1-by-duplicating-their-elements"><span class="nav-text">2.
If any dimensions differ in size, expand the ones that have size 1 by
duplicating their elements:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#if-neither-non-matching-dimension-has-size-1-raise-an-error."><span class="nav-text">3.
If neither non-matching dimension has size 1, raise an error.</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#example-1"><span class="nav-text">Example</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#for-each-point-returns-index-of-its-nearest-point-0.1-0.6-0.8-1-2-1"><span class="nav-text">For
each point returns index of its nearest point
([0.1, 0.6, 0.8] &#x3D;&gt; [1, 2, 1]):</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#image"><span class="nav-text">Image</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#modes-1"><span class="nav-text">Modes</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#examples"><span class="nav-text">Examples</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#creates-a-png-image-of-a-rainbow-gradient"><span class="nav-text">Creates a PNG
image of a rainbow gradient:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#adds-noise-to-a-png-image"><span class="nav-text">Adds noise to a PNG image:</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#image-draw"><span class="nav-text">Image Draw</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#animation"><span class="nav-text">Animation</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#creates-a-gif-of-a-bouncing-ball"><span class="nav-text">Creates a GIF of a bouncing
ball:</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#audio"><span class="nav-text">Audio</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#sample-values"><span class="nav-text">Sample Values</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#read-float-samples-from-wav-file"><span class="nav-text">Read Float Samples from WAV
File</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#write-float-samples-to-wav-file"><span class="nav-text">Write Float Samples to WAV
File</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#examples-1"><span class="nav-text">Examples</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#saves-a-440-hz-sine-wave-to-a-mono-wav-file"><span class="nav-text">Saves a 440 Hz
sine wave to a mono WAV file:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#adds-noise-to-a-mono-wav-file"><span class="nav-text">Adds noise to a mono WAV
file:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#plays-a-wav-file"><span class="nav-text">Plays a WAV
file:</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#text-to-speech"><span class="nav-text">Text to
Speech</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#synthesizer"><span class="nav-text">Synthesizer</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#plays-popcorn-by-gershon-kingsley"><span class="nav-text">Plays Popcorn by Gershon
Kingsley:</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#pygame"><span class="nav-text">Pygame</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#rectangle"><span class="nav-text">Rectangle</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#surface"><span class="nav-text">Surface</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#font"><span class="nav-text">Font</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#sound"><span class="nav-text">Sound</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#basic-mario-brothers-example"><span class="nav-text">Basic Mario Brothers
Example</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#pandas"><span class="nav-text">Pandas</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#series"><span class="nav-text">Series</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#series-aggregate-transform-map"><span class="nav-text">Series — Aggregate,
Transform, Map:</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#dataframe"><span class="nav-text">DataFrame</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#dataframe-merge-join-concat"><span class="nav-text">DataFrame — Merge, Join,
Concat:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#dataframe-aggregate-transform-map"><span class="nav-text">DataFrame — Aggregate,
Transform, Map:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#dataframe-plot-encode-decode"><span class="nav-text">DataFrame — Plot, Encode,
Decode:</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#groupby"><span class="nav-text">GroupBy</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#groupby-aggregate-transform-map"><span class="nav-text">GroupBy — Aggregate,
Transform, Map:</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#rolling"><span class="nav-text">Rolling</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#plotly"><span class="nav-text">Plotly</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#covid-deaths-by-continent"><span class="nav-text">Covid deaths by continent:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#confirmed-covid-cases-dow-jones-gold-and-bitcoin-price"><span class="nav-text">Confirmed
covid cases, Dow Jones, Gold, and Bitcoin price:</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#pysimplegui"><span class="nav-text">PySimpleGUI</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#appendix"><span class="nav-text">Appendix</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#cython"><span class="nav-text">Cython</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#definitions"><span class="nav-text">Definitions:</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#pyinstaller"><span class="nav-text">PyInstaller</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#basic-script-template"><span class="nav-text">Basic Script Template</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#index"><span class="nav-text">Index</span></a></li></ol></li></ol></div>
      </section>
      <!--/noindex-->

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="qiaogaojian"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">qiaogaojian</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">18</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">19</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">17</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/qiaogaojian" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;qiaogaojian" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:qiaogaojian@live.com" title="E-Mail → mailto:qiaogaojian@live.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>
<!--
-->

      </section>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/qiaogaojian" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">
      

      

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://qiaogaojian.github.io/-5756343694020473847/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="qiaogaojian">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="行则将至">
    </span>

    
    
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Comprehensive Python Cheatsheet
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
  
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-10-18 22:15:16" itemprop="dateCreated datePublished" datetime="2022-10-18T22:15:16+08:00">2022-10-18</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2022-10-19 09:44:43" itemprop="dateModified" datetime="2022-10-19T09:44:43+08:00">2022-10-19</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/4-%E6%8A%80%E8%83%BD/" itemprop="url" rel="index"><span itemprop="name">4.技能</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/4-%E6%8A%80%E8%83%BD/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" itemprop="url" rel="index"><span itemprop="name">编程语言</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/4-%E6%8A%80%E8%83%BD/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
        </span>
    </span>

  
    <span id="/-5756343694020473847/" class="post-meta-item leancloud_visitors" data-flag-title="Comprehensive Python Cheatsheet" title="阅读次数">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span class="leancloud-visitors-count"></span>
    </span>
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/-5756343694020473847/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/-5756343694020473847/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
    <meta name="referrer" content="no-referrer"/>
        <blockquote>
<p>原文地址 <a
target="_blank" rel="noopener" href="https://github.com/gto76/python-cheatsheet">github.com</a></p>
</blockquote>
<blockquote>
<p>Comprehensive Python Cheatsheet. Contribute to
gto76/python-cheatsheet development by creating an acc......</p>
</blockquote>
<h1 id="comprehensive-python-cheatsheet">Comprehensive Python
Cheatsheet</h1>
<p><img
src="https://github.com/gto76/python-cheatsheet/raw/main/web/image_888.jpeg" /></p>
<h2 id="contents">Contents</h2>
<p><strong>1. Collections:</strong> <strong><a
href="#list"><code>List</code></a>,</strong> <strong><a
href="#dictionary"><code>Dictionary</code></a>,</strong> <strong><a
href="#set"><code>Set</code></a>,</strong> <strong><a
href="#tuple"><code>Tuple</code></a>,</strong> <strong><a
href="#range"><code>Range</code></a>,</strong> <strong><a
href="#enumerate"><code>Enumerate</code></a>,</strong> <strong><a
href="#iterator"><code>Iterator</code></a>,</strong> <strong><a
href="#generator"><code>Generator</code></a>.</strong><br />
<strong>2. Types:</strong> <strong><a
href="#type"><code>Type</code></a>,</strong> <strong><a
href="#string"><code>String</code></a>,</strong> <strong><a
href="#regex"><code>Regular_Exp</code></a>,</strong> <strong><a
href="#format"><code>Format</code></a>,</strong> <strong><a
href="#numbers-1"><code>Numbers</code></a>,</strong> <strong><a
href="#combinatorics"><code>Combinatorics</code></a>,</strong>
<strong><a href="#datetime"><code>Datetime</code></a>.</strong><br />
<strong>3. Syntax:</strong> <strong><a
href="#arguments"><code>Args</code></a>,</strong> <strong><a
href="#inline"><code>Inline</code></a>,</strong> <strong><a
href="#imports"><code>Import</code></a>,</strong> <strong><a
href="#decorator"><code>Decorator</code></a>,</strong> <strong><a
href="#class"><code>Class</code></a>,</strong> <strong><a
href="#duck-types"><code>Duck_Types</code></a>,</strong> <strong><a
href="#enum"><code>Enum</code></a>,</strong> <strong><a
href="#exceptions"><code>Exception</code></a>.</strong><br />
<strong>4. System:</strong> <strong><a
href="#exit"><code>Exit</code></a>,</strong> <strong><a
href="#print"><code>Print</code></a>,</strong> <strong><a
href="#input"><code>Input</code></a>,</strong> <strong><a
href="#command-line-arguments"><code>Command_Line_Arguments</code></a>,</strong>
<strong><a href="#open"><code>Open</code></a>,</strong> <strong><a
href="#paths"><code>Path</code></a>,</strong> <strong><a
href="#os-commands"><code>OS_Commands</code></a>.</strong><br />
<strong>5. Data:</strong> <strong><a
href="#json"><code>JSON</code></a>,</strong> <strong><a
href="#pickle"><code>Pickle</code></a>,</strong> <strong><a
href="#csv"><code>CSV</code></a>,</strong> <strong><a
href="#sqlite"><code>SQLite</code></a>,</strong> <strong><a
href="#bytes"><code>Bytes</code></a>,</strong> <strong><a
href="#struct"><code>Struct</code></a>,</strong> <strong><a
href="#array"><code>Array</code></a>,</strong> <strong><a
href="#memory-view"><code>Memory_View</code></a>,</strong> <strong><a
href="#deque"><code>Deque</code></a>.</strong><br />
<strong>6. Advanced:</strong> <strong><a
href="#threading"><code>Threading</code></a>,</strong> <strong><a
href="#operator"><code>Operator</code></a>,</strong> <strong><a
href="#introspection"><code>Introspection</code></a>,</strong>
<strong><a
href="#metaprogramming"><code>Metaprograming</code></a>,</strong>
<strong><a href="#eval"><code>Eval</code></a>,</strong> <strong><a
href="#coroutines"><code>Coroutines</code></a>.</strong><br />
<strong>7. Libraries:</strong> <strong><a
href="#progress-bar"><code>Progress_Bar</code></a>,</strong> <strong><a
href="#plot"><code>Plot</code></a>,</strong> <strong><a
href="#table"><code>Table</code></a>,</strong> <strong><a
href="#curses"><code>Curses</code></a>,</strong> <strong><a
href="#logging"><code>Logging</code></a>,</strong> <strong><a
href="#scraping"><code>Scraping</code></a>,</strong> <strong><a
href="#web"><code>Web</code></a>,</strong> <strong><a
href="#profiling"><code>Profile</code></a>,</strong><br />
<strong><a href="#numpy"><code>NumPy</code></a>,</strong> <strong><a
href="#image"><code>Image</code></a>,</strong> <strong><a
href="#audio"><code>Audio</code></a>,</strong> <strong><a
href="#pygame"><code>Games</code></a>,</strong> <strong><a
href="#pandas"><code>Data</code></a>.</strong></p>
<h2 id="main"><a href="#main"></a>Main</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if __name__ == &#x27;__main__&#x27;:     # Runs main() if file wasn&#x27;t imported.</span><br><span class="line">    main()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="list"><a href="#list"></a>List</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;list&gt; = &lt;list&gt;[&lt;slice&gt;]       # Or: &lt;list&gt;[from_inclusive : to_exclusive : ±step]</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;list&gt;.append(&lt;el&gt;)            # Or: &lt;list&gt; += [&lt;el&gt;]</span><br><span class="line">&lt;list&gt;.extend(&lt;collection&gt;)    # Or: &lt;list&gt; += &lt;collection&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;list&gt;.sort()                  # Sorts in ascending order.</span><br><span class="line">&lt;list&gt;.reverse()               # Reverses the list in-place.</span><br><span class="line">&lt;list&gt; = sorted(&lt;collection&gt;)  # Returns a new sorted list.</span><br><span class="line">&lt;iter&gt; = reversed(&lt;list&gt;)      # Returns reversed iterator.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sum_of_elements  = sum(&lt;collection&gt;)</span><br><span class="line">elementwise_sum  = [sum(pair) for pair in zip(list_a, list_b)]</span><br><span class="line">sorted_by_second = sorted(&lt;collection&gt;, key=lambda el: el[1])</span><br><span class="line">sorted_by_both   = sorted(&lt;collection&gt;, key=lambda el: (el[1], el[0]))</span><br><span class="line">flatter_list     = list(itertools.chain.from_iterable(&lt;list&gt;))</span><br><span class="line">product_of_elems = functools.reduce(lambda out, el: out * el, &lt;collection&gt;)</span><br><span class="line">list_of_chars    = list(&lt;str&gt;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>For details about sorted(), min() and max() see <a
href="#sortable">sortable</a>.</strong></li>
<li><strong>Module <a href="#operator">operator</a> provides functions
itemgetter() and mul() that offer the same functionality as <a
href="#lambda">lambda</a> expressions above.</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;list&gt;.insert(&lt;int&gt;, &lt;el&gt;)     # Inserts item at index and moves the rest to the right.</span><br><span class="line">&lt;el&gt;  = &lt;list&gt;.pop([&lt;int&gt;])    # Removes and returns item at index or from the end.</span><br><span class="line">&lt;int&gt; = &lt;list&gt;.count(&lt;el&gt;)     # Returns number of occurrences. Also works on strings.</span><br><span class="line">&lt;int&gt; = &lt;list&gt;.index(&lt;el&gt;)     # Returns index of the first occurrence or raises ValueError.</span><br><span class="line">&lt;list&gt;.remove(&lt;el&gt;)            # Removes first occurrence of the item or raises ValueError.</span><br><span class="line">&lt;list&gt;.clear()                 # Removes all items. Also works on dictionary and set.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="dictionary"><a href="#dictionary"></a>Dictionary</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;view&gt; = &lt;dict&gt;.keys()                          # Coll. of keys that reflects changes.</span><br><span class="line">&lt;view&gt; = &lt;dict&gt;.values()                        # Coll. of values that reflects changes.</span><br><span class="line">&lt;view&gt; = &lt;dict&gt;.items()                         # Coll. of key-value tuples that reflects chgs.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">value  = &lt;dict&gt;.get(key, default=None)          # Returns default if key is missing.</span><br><span class="line">value  = &lt;dict&gt;.setdefault(key, default=None)   # Returns and writes default if key is missing.</span><br><span class="line">&lt;dict&gt; = collections.defaultdict(&lt;type&gt;)        # Returns a dict with default value of type.</span><br><span class="line">&lt;dict&gt; = collections.defaultdict(lambda: 1)     # Returns a dict with default value 1.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;dict&gt; = dict(&lt;collection&gt;)                     # Creates a dict from coll. of key-value pairs.</span><br><span class="line">&lt;dict&gt; = dict(zip(keys, values))                # Creates a dict from two collections.</span><br><span class="line">&lt;dict&gt; = dict.fromkeys(keys [, value])          # Creates a dict from collection of keys.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dict&gt;.update(&lt;dict&gt;)                           # Adds items. Replaces ones with matching keys.</span><br><span class="line">value = &lt;dict&gt;.pop(key)                         # Removes item or raises KeyError.</span><br><span class="line">&#123;k for k, v in &lt;dict&gt;.items() if v == value&#125;    # Returns set of keys that point to the value.</span><br><span class="line">&#123;k: v for k, v in &lt;dict&gt;.items() if k in keys&#125;  # Returns a dictionary, filtered by keys.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="counter"><a href="#counter"></a>Counter</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; from collections import Counter</span><br><span class="line">&gt;&gt;&gt; colors = [&#x27;blue&#x27;, &#x27;blue&#x27;, &#x27;blue&#x27;, &#x27;red&#x27;, &#x27;red&#x27;]</span><br><span class="line">&gt;&gt;&gt; counter = Counter(colors)</span><br><span class="line">&gt;&gt;&gt; counter[&#x27;yellow&#x27;] += 1</span><br><span class="line">Counter(&#123;&#x27;blue&#x27;: 3, &#x27;red&#x27;: 2, &#x27;yellow&#x27;: 1&#125;)</span><br><span class="line">&gt;&gt;&gt; counter.most_common()[0]</span><br><span class="line">(&#x27;blue&#x27;, 3)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="set"><a href="#set"></a>Set</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;set&gt; = set()                                   # `&#123;&#125;` returns a dictionary.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;set&gt;.add(&lt;el&gt;)                                 # Or: &lt;set&gt; |= &#123;&lt;el&gt;&#125;</span><br><span class="line">&lt;set&gt;.update(&lt;collection&gt; [, ...])              # Or: &lt;set&gt; |= &lt;set&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;set&gt;  = &lt;set&gt;.union(&lt;coll.&gt;)                   # Or: &lt;set&gt; | &lt;set&gt;</span><br><span class="line">&lt;set&gt;  = &lt;set&gt;.intersection(&lt;coll.&gt;)            # Or: &lt;set&gt; &amp; &lt;set&gt;</span><br><span class="line">&lt;set&gt;  = &lt;set&gt;.difference(&lt;coll.&gt;)              # Or: &lt;set&gt; - &lt;set&gt;</span><br><span class="line">&lt;set&gt;  = &lt;set&gt;.symmetric_difference(&lt;coll.&gt;)    # Or: &lt;set&gt; ^ &lt;set&gt;</span><br><span class="line">&lt;bool&gt; = &lt;set&gt;.issubset(&lt;coll.&gt;)                # Or: &lt;set&gt; &lt;= &lt;set&gt;</span><br><span class="line">&lt;bool&gt; = &lt;set&gt;.issuperset(&lt;coll.&gt;)              # Or: &lt;set&gt; &gt;= &lt;set&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;el&gt; = &lt;set&gt;.pop()                              # Raises KeyError if empty.</span><br><span class="line">&lt;set&gt;.remove(&lt;el&gt;)                              # Raises KeyError if missing.</span><br><span class="line">&lt;set&gt;.discard(&lt;el&gt;)                             # Doesn&#x27;t raise an error.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="frozen-set"><a href="#frozen-set"></a>Frozen Set</h3>
<ul>
<li><strong>Is immutable and hashable.</strong></li>
<li><strong>That means it can be used as a key in a dictionary or as an
element in a set.</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;frozenset&gt; = frozenset(&lt;collection&gt;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="tuple"><a href="#tuple"></a>Tuple</h2>
<p><strong>Tuple is an immutable and hashable list.</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;tuple&gt; = ()                                # Empty tuple.</span><br><span class="line">&lt;tuple&gt; = (&lt;el&gt;,)                           # Or: &lt;el&gt;,</span><br><span class="line">&lt;tuple&gt; = (&lt;el_1&gt;, &lt;el_2&gt; [, ...])          # Or: &lt;el_1&gt;, &lt;el_2&gt; [, ...]</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="named-tuple"><a href="#named-tuple"></a>Named Tuple</h3>
<p><strong>Tuple's subclass with named elements.</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; from collections import namedtuple</span><br><span class="line">&gt;&gt;&gt; Point = namedtuple(&#x27;Point&#x27;, &#x27;x y&#x27;)</span><br><span class="line">&gt;&gt;&gt; p = Point(1, y=2)</span><br><span class="line">Point(x=1, y=2)</span><br><span class="line">&gt;&gt;&gt; p[0]</span><br><span class="line">1</span><br><span class="line">&gt;&gt;&gt; p.x</span><br><span class="line">1</span><br><span class="line">&gt;&gt;&gt; getattr(p, &#x27;y&#x27;)</span><br><span class="line">2</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="range"><a href="#range"></a>Range</h2>
<p><strong>Immutable and hashable sequence of integers.</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;range&gt; = range(stop)                       # range(to_exclusive)</span><br><span class="line">&lt;range&gt; = range(start, stop)                # range(from_inclusive, to_exclusive)</span><br><span class="line">&lt;range&gt; = range(start, stop, ±step)         # range(from_inclusive, to_exclusive, ±step_size)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; [i for i in range(3)]</span><br><span class="line">[0, 1, 2]</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="enumerate"><a href="#enumerate"></a>Enumerate</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">for i, el in enumerate(&lt;collection&gt; [, i_start]):</span><br><span class="line">    ...</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="iterator"><a href="#iterator"></a>Iterator</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;iter&gt; = iter(&lt;collection&gt;)                 # `iter(&lt;iter&gt;)` returns unmodified iterator.</span><br><span class="line">&lt;iter&gt; = iter(&lt;function&gt;, to_exclusive)     # A sequence of return values until &#x27;to_exclusive&#x27;.</span><br><span class="line">&lt;el&gt;   = next(&lt;iter&gt; [, default])           # Raises StopIteration or returns &#x27;default&#x27; on end.</span><br><span class="line">&lt;list&gt; = list(&lt;iter&gt;)                       # Returns a list of iterator&#x27;s remaining elements.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="itertools"><a href="#itertools"></a>Itertools</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import itertools as it</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;iter&gt; = it.count(start=0, step=1)          # Returns updated value endlessly. Accepts floats.</span><br><span class="line">&lt;iter&gt; = it.repeat(&lt;el&gt; [, times])          # Returns element endlessly or &#x27;times&#x27; times.</span><br><span class="line">&lt;iter&gt; = it.cycle(&lt;collection&gt;)             # Repeats the sequence endlessly.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;iter&gt; = it.chain(&lt;coll&gt;, &lt;coll&gt; [, ...])   # Empties collections in order (figuratively).</span><br><span class="line">&lt;iter&gt; = it.chain.from_iterable(&lt;coll&gt;)     # Empties collections inside a collection in order.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;iter&gt; = it.islice(&lt;coll&gt;, to_exclusive)    # Only returns first &#x27;to_exclusive&#x27; elements.</span><br><span class="line">&lt;iter&gt; = it.islice(&lt;coll&gt;, from_inc, …)     # `to_exclusive, +step_size`. Indices can be None.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="generator"><a href="#generator"></a>Generator</h2>
<ul>
<li><strong>Any function that contains a yield statement returns a
generator.</strong></li>
<li><strong>Generators and iterators are interchangeable.</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">def count(start, step):</span><br><span class="line">    while True:</span><br><span class="line">        yield start</span><br><span class="line">        start += step</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; counter = count(10, 2)</span><br><span class="line">&gt;&gt;&gt; next(counter), next(counter), next(counter)</span><br><span class="line">(10, 12, 14)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="type"><a href="#type"></a>Type</h2>
<ul>
<li><strong>Everything is an object.</strong></li>
<li><strong>Every object has a type.</strong></li>
<li><strong>Type and class are synonymous.</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;type&gt; = type(&lt;el&gt;)                          # Or: &lt;el&gt;.__class__</span><br><span class="line">&lt;bool&gt; = isinstance(&lt;el&gt;, &lt;type&gt;)            # Or: issubclass(type(&lt;el&gt;), &lt;type&gt;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; type(&#x27;a&#x27;), &#x27;a&#x27;.__class__, str</span><br><span class="line">(&lt;class &#x27;str&#x27;&gt;, &lt;class &#x27;str&#x27;&gt;, &lt;class &#x27;str&#x27;&gt;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4
id="some-types-do-not-have-built-in-names-so-they-must-be-imported"><a
href="#some-types-do-not-have-built-in-names-so-they-must-be-imported"></a>Some
types do not have built-in names, so they must be imported:</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">from types import FunctionType, MethodType, LambdaType, GeneratorType, ModuleType</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="abstract-base-classes"><a
href="#abstract-base-classes"></a>Abstract Base Classes</h3>
<p><strong>Each abstract base class specifies a set of virtual
subclasses. These classes are then recognized by isinstance() and
issubclass() as subclasses of the ABC, although they are really not. ABC
can also manually decide whether or not a specific class is its virtual
subclass, usually based on which methods the class has implemented. For
instance, Iterable ABC looks for method iter(), while Collection ABC
looks for iter(), contains() and len().</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; from collections.abc import Iterable, Collection, Sequence</span><br><span class="line">&gt;&gt;&gt; isinstance([1, 2, 3], Iterable)</span><br><span class="line">True</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">+------------------+------------+------------+------------+</span><br><span class="line">|                  |  Iterable  | Collection |  Sequence  |</span><br><span class="line">+------------------+------------+------------+------------+</span><br><span class="line">| list, range, str |    yes     |    yes     |    yes     |</span><br><span class="line">| dict, set        |    yes     |    yes     |            |</span><br><span class="line">| iter             |    yes     |            |            |</span><br><span class="line">+------------------+------------+------------+------------+</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; from numbers import Number, Complex, Real, Rational, Integral</span><br><span class="line">&gt;&gt;&gt; isinstance(123, Number)</span><br><span class="line">True</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">+--------------------+----------+----------+----------+----------+----------+</span><br><span class="line">|                    |  Number  |  Complex |   Real   | Rational | Integral |</span><br><span class="line">+--------------------+----------+----------+----------+----------+----------+</span><br><span class="line">| int                |   yes    |   yes    |   yes    |   yes    |   yes    |</span><br><span class="line">| fractions.Fraction |   yes    |   yes    |   yes    |   yes    |          |</span><br><span class="line">| float              |   yes    |   yes    |   yes    |          |          |</span><br><span class="line">| complex            |   yes    |   yes    |          |          |          |</span><br><span class="line">| decimal.Decimal    |   yes    |          |          |          |          |</span><br><span class="line">+--------------------+----------+----------+----------+----------+----------+</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="string"><a href="#string"></a>String</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;str&gt;  = &lt;str&gt;.strip()                       # Strips all whitespace characters from both ends.</span><br><span class="line">&lt;str&gt;  = &lt;str&gt;.strip(&#x27;&lt;chars&gt;&#x27;)              # Strips all passed characters from both ends.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;list&gt; = &lt;str&gt;.split()                       # Splits on one or more whitespace characters.</span><br><span class="line">&lt;list&gt; = &lt;str&gt;.split(sep=None, maxsplit=-1)  # Splits on &#x27;sep&#x27; str at most &#x27;maxsplit&#x27; times.</span><br><span class="line">&lt;list&gt; = &lt;str&gt;.splitlines(keepends=False)    # On [\n\r\f\v\x1c-\x1e\x85\u2028\u2029] and \r\n.</span><br><span class="line">&lt;str&gt;  = &lt;str&gt;.join(&lt;coll_of_strings&gt;)       # Joins elements using string as a separator.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;bool&gt; = &lt;sub_str&gt; in &lt;str&gt;                  # Checks if string contains a substring.</span><br><span class="line">&lt;bool&gt; = &lt;str&gt;.startswith(&lt;sub_str&gt;)         # Pass tuple of strings for multiple options.</span><br><span class="line">&lt;bool&gt; = &lt;str&gt;.endswith(&lt;sub_str&gt;)           # Pass tuple of strings for multiple options.</span><br><span class="line">&lt;int&gt;  = &lt;str&gt;.find(&lt;sub_str&gt;)               # Returns start index of the first match or -1.</span><br><span class="line">&lt;int&gt;  = &lt;str&gt;.index(&lt;sub_str&gt;)              # Same, but raises ValueError if missing.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;str&gt;  = &lt;str&gt;.replace(old, new [, count])   # Replaces &#x27;old&#x27; with &#x27;new&#x27; at most &#x27;count&#x27; times.</span><br><span class="line">&lt;str&gt;  = &lt;str&gt;.translate(&lt;table&gt;)            # Use `str.maketrans(&lt;dict&gt;)` to generate table.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;str&gt;  = chr(&lt;int&gt;)                          # Converts int to Unicode character.</span><br><span class="line">&lt;int&gt;  = ord(&lt;str&gt;)                          # Converts Unicode character to int.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Also: <code>'lstrip()'</code>, <code>'rstrip()'</code> and
<code>'rsplit()'</code>.</strong></li>
<li><strong>Also: <code>'lower()'</code>, <code>'upper()'</code>,
<code>'capitalize()'</code> and <code>'title()'</code>.</strong></li>
</ul>
<h3 id="property-methods"><a href="#property-methods"></a>Property
Methods</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">+---------------+----------+----------+----------+----------+----------+</span><br><span class="line">|               | [ !#$%…] | [a-zA-Z] |  [¼½¾]   |  [²³¹]   |  [0-9]   |</span><br><span class="line">+---------------+----------+----------+----------+----------+----------+</span><br><span class="line">| isprintable() |   yes    |   yes    |   yes    |   yes    |   yes    |</span><br><span class="line">| isalnum()     |          |   yes    |   yes    |   yes    |   yes    |</span><br><span class="line">| isnumeric()   |          |          |   yes    |   yes    |   yes    |</span><br><span class="line">| isdigit()     |          |          |          |   yes    |   yes    |</span><br><span class="line">| isdecimal()   |          |          |          |          |   yes    |</span><br><span class="line">+---------------+----------+----------+----------+----------+----------+</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Also: <code>'isspace()'</code> checks for
<code>'[ \t\n\r\f\v\x1c-\x1f\x85\u2000…]'</code>.</strong></li>
</ul>
<h2 id="regex"><a href="#regex"></a>Regex</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import re</span><br><span class="line">&lt;str&gt;   = re.sub(&lt;regex&gt;, new, text, count=0)  # Substitutes all occurrences with &#x27;new&#x27;.</span><br><span class="line">&lt;list&gt;  = re.findall(&lt;regex&gt;, text)            # Returns all occurrences as strings.</span><br><span class="line">&lt;list&gt;  = re.split(&lt;regex&gt;, text, maxsplit=0)  # Use brackets in regex to include the matches.</span><br><span class="line">&lt;Match&gt; = re.search(&lt;regex&gt;, text)             # Searches for first occurrence of the pattern.</span><br><span class="line">&lt;Match&gt; = re.match(&lt;regex&gt;, text)              # Searches only at the beginning of the text.</span><br><span class="line">&lt;iter&gt;  = re.finditer(&lt;regex&gt;, text)           # Returns all occurrences as Match objects.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Argument 'new' can be a function that accepts a Match object
and returns a string.</strong></li>
<li><strong>Search() and match() return None if they can't find a
match.</strong></li>
<li><strong>Argument <code>'flags=re.IGNORECASE'</code> can be used with
all functions.</strong></li>
<li><strong>Argument <code>'flags=re.MULTILINE'</code> makes
<code>'^'</code> and <code>'$'</code> match the start/end of each
line.</strong></li>
<li><strong>Argument <code>'flags=re.DOTALL'</code> makes dot also
accept the <code>'\n'</code>.</strong></li>
<li><strong>Use <code>r'\1'</code> or <code>'\\1'</code> for
backreference (<code>'\1'</code> returns a character with octal code
1).</strong></li>
<li><strong>Add <code>'?'</code> after <code>'*'</code> and
<code>'+'</code> to make them non-greedy.</strong></li>
</ul>
<h3 id="match-object"><a href="#match-object"></a>Match Object</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;str&gt;   = &lt;Match&gt;.group()                      # Returns the whole match. Also group(0).</span><br><span class="line">&lt;str&gt;   = &lt;Match&gt;.group(1)                     # Returns part in the first bracket.</span><br><span class="line">&lt;tuple&gt; = &lt;Match&gt;.groups()                     # Returns all bracketed parts.</span><br><span class="line">&lt;int&gt;   = &lt;Match&gt;.start()                      # Returns start index of the match.</span><br><span class="line">&lt;int&gt;   = &lt;Match&gt;.end()                        # Returns exclusive end index of the match.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="special-sequences"><a href="#special-sequences"></a>Special
Sequences</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x27;\d&#x27; == &#x27;[0-9]&#x27;                                # Matches decimal characters.</span><br><span class="line">&#x27;\w&#x27; == &#x27;[a-zA-Z0-9_]&#x27;                         # Matches alphanumerics and underscore.</span><br><span class="line">&#x27;\s&#x27; == &#x27;[ \t\n\r\f\v]&#x27;                        # Matches whitespaces.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>By default, decimal characters, alphanumerics and
whitespaces from all alphabets are matched unless
<code>'flags=re.ASCII'</code> argument is used.</strong></li>
<li><strong>As shown above, it restricts all special sequence matches to
the first 128 characters and prevents <code>'\s'</code> from accepting
<code>'[\x1c-\x1f]'</code> (the so-called separator
characters).</strong></li>
<li><strong>Use a capital letter for negation (all non-ASCII characters
will be matched when used in combination with ASCII flag).</strong></li>
</ul>
<h2 id="format"><a href="#format"></a>Format</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;str&gt; = f&#x27;&#123;&lt;el_1&gt;&#125;, &#123;&lt;el_2&gt;&#125;&#x27;            # Curly brackets can also contain expressions.</span><br><span class="line">&lt;str&gt; = &#x27;&#123;&#125;, &#123;&#125;&#x27;.format(&lt;el_1&gt;, &lt;el_2&gt;)  # Or: &#x27;&#123;0&#125;, &#123;a&#125;&#x27;.format(&lt;el_1&gt;, a=&lt;el_2&gt;)</span><br><span class="line">&lt;str&gt; = &#x27;%s, %s&#x27; % (&lt;el_1&gt;, &lt;el_2&gt;)      # Redundant and inferior C style formatting.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="attributes"><a href="#attributes"></a>Attributes</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; Person = collections.namedtuple(&#x27;Person&#x27;, &#x27;name height&#x27;)</span><br><span class="line">&gt;&gt;&gt; person = Person(&#x27;Jean-Luc&#x27;, 187)</span><br><span class="line">&gt;&gt;&gt; f&#x27;&#123;person.height&#125;&#x27;</span><br><span class="line">&#x27;187&#x27;</span><br><span class="line">&gt;&gt;&gt; &#x27;&#123;p.height&#125;&#x27;.format(p=person)</span><br><span class="line">&#x27;187&#x27;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="general-options"><a href="#general-options"></a>General
Options</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;&lt;el&gt;:&lt;10&#125;                               # &#x27;&lt;el&gt;      &#x27;</span><br><span class="line">&#123;&lt;el&gt;:^10&#125;                               # &#x27;   &lt;el&gt;   &#x27;</span><br><span class="line">&#123;&lt;el&gt;:&gt;10&#125;                               # &#x27;      &lt;el&gt;&#x27;</span><br><span class="line">&#123;&lt;el&gt;:.&lt;10&#125;                              # &#x27;&lt;el&gt;......&#x27;</span><br><span class="line">&#123;&lt;el&gt;:0&#125;                                 # &#x27;&lt;el&gt;&#x27;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Options can be generated dynamically:
<code>f'&#123;&lt;el&gt;:&#123;&lt;str/int&gt;&#125;[…]&#125;'</code>.</strong></li>
<li><strong>Adding <code>'!r'</code> before the colon converts object to
string by calling its <a href="#class">repr()</a> method.</strong></li>
</ul>
<h3 id="strings"><a href="#strings"></a>Strings</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#x27;abcde&#x27;:10&#125;                             # &#x27;abcde     &#x27;</span><br><span class="line">&#123;&#x27;abcde&#x27;:10.3&#125;                           # &#x27;abc       &#x27;</span><br><span class="line">&#123;&#x27;abcde&#x27;:.3&#125;                             # &#x27;abc&#x27;</span><br><span class="line">&#123;&#x27;abcde&#x27;!r:10&#125;                           # &quot;&#x27;abcde&#x27;   &quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="numbers"><a href="#numbers"></a>Numbers</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;123456:10&#125;                              # &#x27;    123456&#x27;</span><br><span class="line">&#123;123456:10,&#125;                             # &#x27;   123,456&#x27;</span><br><span class="line">&#123;123456:10_&#125;                             # &#x27;   123_456&#x27;</span><br><span class="line">&#123;123456:+10&#125;                             # &#x27;   +123456&#x27;</span><br><span class="line">&#123;123456:=+10&#125;                            # &#x27;+   123456&#x27;</span><br><span class="line">&#123;123456: &#125;                               # &#x27; 123456&#x27;</span><br><span class="line">&#123;-123456: &#125;                              # &#x27;-123456&#x27;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="floats"><a href="#floats"></a>Floats</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;1.23456:10.3&#125;                           # &#x27;      1.23&#x27;</span><br><span class="line">&#123;1.23456:10.3f&#125;                          # &#x27;     1.235&#x27;</span><br><span class="line">&#123;1.23456:10.3e&#125;                          # &#x27; 1.235e+00&#x27;</span><br><span class="line">&#123;1.23456:10.3%&#125;                          # &#x27;  123.456%&#x27;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="comparison-of-presentation-types"><a
href="#comparison-of-presentation-types"></a>Comparison of presentation
types:</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">+--------------+----------------+----------------+----------------+----------------+</span><br><span class="line">|              |    &#123;&lt;float&gt;&#125;   |   &#123;&lt;float&gt;:f&#125;  |   &#123;&lt;float&gt;:e&#125;  |   &#123;&lt;float&gt;:%&#125;  |</span><br><span class="line">+--------------+----------------+----------------+----------------+----------------+</span><br><span class="line">|  0.000056789 |   &#x27;5.6789e-05&#x27; |    &#x27;0.000057&#x27;  | &#x27;5.678900e-05&#x27; |    &#x27;0.005679%&#x27; |</span><br><span class="line">|  0.00056789  |   &#x27;0.00056789&#x27; |    &#x27;0.000568&#x27;  | &#x27;5.678900e-04&#x27; |    &#x27;0.056789%&#x27; |</span><br><span class="line">|  0.0056789   |   &#x27;0.0056789&#x27;  |    &#x27;0.005679&#x27;  | &#x27;5.678900e-03&#x27; |    &#x27;0.567890%&#x27; |</span><br><span class="line">|  0.056789    |   &#x27;0.056789&#x27;   |    &#x27;0.056789&#x27;  | &#x27;5.678900e-02&#x27; |    &#x27;5.678900%&#x27; |</span><br><span class="line">|  0.56789     |   &#x27;0.56789&#x27;    |    &#x27;0.567890&#x27;  | &#x27;5.678900e-01&#x27; |   &#x27;56.789000%&#x27; |</span><br><span class="line">|  5.6789      |   &#x27;5.6789&#x27;     |    &#x27;5.678900&#x27;  | &#x27;5.678900e+00&#x27; |  &#x27;567.890000%&#x27; |</span><br><span class="line">| 56.789       |  &#x27;56.789&#x27;      |   &#x27;56.789000&#x27;  | &#x27;5.678900e+01&#x27; | &#x27;5678.900000%&#x27; |</span><br><span class="line">+--------------+----------------+----------------+----------------+----------------+</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">+--------------+----------------+----------------+----------------+----------------+</span><br><span class="line">|              |  &#123;&lt;float&gt;:.2&#125;  |  &#123;&lt;float&gt;:.2f&#125; |  &#123;&lt;float&gt;:.2e&#125; |  &#123;&lt;float&gt;:.2%&#125; |</span><br><span class="line">+--------------+----------------+----------------+----------------+----------------+</span><br><span class="line">|  0.000056789 |    &#x27;5.7e-05&#x27;   |      &#x27;0.00&#x27;    |   &#x27;5.68e-05&#x27;   |      &#x27;0.01%&#x27;   |</span><br><span class="line">|  0.00056789  |    &#x27;0.00057&#x27;   |      &#x27;0.00&#x27;    |   &#x27;5.68e-04&#x27;   |      &#x27;0.06%&#x27;   |</span><br><span class="line">|  0.0056789   |    &#x27;0.0057&#x27;    |      &#x27;0.01&#x27;    |   &#x27;5.68e-03&#x27;   |      &#x27;0.57%&#x27;   |</span><br><span class="line">|  0.056789    |    &#x27;0.057&#x27;     |      &#x27;0.06&#x27;    |   &#x27;5.68e-02&#x27;   |      &#x27;5.68%&#x27;   |</span><br><span class="line">|  0.56789     |    &#x27;0.57&#x27;      |      &#x27;0.57&#x27;    |   &#x27;5.68e-01&#x27;   |     &#x27;56.79%&#x27;   |</span><br><span class="line">|  5.6789      |    &#x27;5.7&#x27;       |      &#x27;5.68&#x27;    |   &#x27;5.68e+00&#x27;   |    &#x27;567.89%&#x27;   |</span><br><span class="line">| 56.789       |    &#x27;5.7e+01&#x27;   |     &#x27;56.79&#x27;    |   &#x27;5.68e+01&#x27;   |   &#x27;5678.90%&#x27;   |</span><br><span class="line">+--------------+----------------+----------------+----------------+----------------+</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>When both rounding up and rounding down are possible, the
one that returns result with even last digit is chosen. That makes
<code>'&#123;6.5:.0f&#125;'</code> a <code>'6'</code> and <code>'&#123;7.5:.0f&#125;'</code>
an <code>'8'</code>.</strong></li>
<li><strong>This rule only effects numbers that can be represented
exactly by a float (<code>.5</code>, <code>.25</code>, …).</strong></li>
</ul>
<h3 id="ints"><a href="#ints"></a>Ints</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;90:c&#125;                                   # &#x27;Z&#x27;</span><br><span class="line">&#123;90:b&#125;                                   # &#x27;1011010&#x27;</span><br><span class="line">&#123;90:X&#125;                                   # &#x27;5A&#x27;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="numbers-1"><a href="#numbers-1"></a>Numbers</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;int&gt;      = int(&lt;float/str/bool&gt;)                # Or: math.floor(&lt;float&gt;)</span><br><span class="line">&lt;float&gt;    = float(&lt;int/str/bool&gt;)                # Or: &lt;real&gt;e±&lt;int&gt;</span><br><span class="line">&lt;complex&gt;  = complex(real=0, imag=0)              # Or: &lt;real&gt; ± &lt;real&gt;j</span><br><span class="line">&lt;Fraction&gt; = fractions.Fraction(0, 1)             # Or: Fraction(numerator=0, denominator=1)</span><br><span class="line">&lt;Decimal&gt;  = decimal.Decimal(&lt;str/int&gt;)           # Or: Decimal((sign, digits, exponent))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><strong><code>'int(&lt;str&gt;)'</code> and
<code>'float(&lt;str&gt;)'</code> raise ValueError on malformed
strings.</strong></li>
<li><strong>Decimal numbers are stored exactly, unlike most floats where
<code>'1.1 + 2.2 != 3.3'</code>.</strong></li>
<li><strong>Floats can be compared with:
<code>'math.isclose(&lt;float&gt;, &lt;float&gt;)'</code>.</strong></li>
<li><strong>Precision of decimal operations is set with:
<code>'decimal.getcontext().prec = &lt;int&gt;'</code>.</strong></li>
</ul>
<h3 id="basic-functions"><a href="#basic-functions"></a>Basic
Functions</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;num&gt; = pow(&lt;num&gt;, &lt;num&gt;)                         # Or: &lt;num&gt; ** &lt;num&gt;</span><br><span class="line">&lt;num&gt; = abs(&lt;num&gt;)                                # &lt;float&gt; = abs(&lt;complex&gt;)</span><br><span class="line">&lt;num&gt; = round(&lt;num&gt; [, ±ndigits])                 # `round(126, -1) == 130`</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="math"><a href="#math"></a>Math</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">from math import e, pi, inf, nan, isinf, isnan    # `&lt;el&gt; == nan` is always False.</span><br><span class="line">from math import sin, cos, tan, asin, acos, atan  # Also: degrees, radians.</span><br><span class="line">from math import log, log10, log2                 # Log can accept base as second arg.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="statistics"><a href="#statistics"></a>Statistics</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">from statistics import mean, median, variance     # Also: stdev, quantiles, groupby.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="random"><a href="#random"></a>Random</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">from random import random, randint, choice        # Also shuffle, gauss, triangular, seed.</span><br><span class="line">&lt;float&gt; = random()                                # A float inside [0, 1).</span><br><span class="line">&lt;int&gt;   = randint(from_inc, to_inc)               # An int inside [from_inc, to_inc].</span><br><span class="line">&lt;el&gt;    = choice(&lt;sequence&gt;)                      # Keeps the sequence intact.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="bin-hex"><a href="#bin-hex"></a>Bin, Hex</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;int&gt; = ±0b&lt;bin&gt;                                  # Or: ±0x&lt;hex&gt;</span><br><span class="line">&lt;int&gt; = int(&#x27;±&lt;bin&gt;&#x27;, 2)                          # Or: int(&#x27;±&lt;hex&gt;&#x27;, 16)</span><br><span class="line">&lt;int&gt; = int(&#x27;±0b&lt;bin&gt;&#x27;, 0)                        # Or: int(&#x27;±0x&lt;hex&gt;&#x27;, 0)</span><br><span class="line">&lt;str&gt; = bin(&lt;int&gt;)                                # Returns &#x27;[-]0b&lt;bin&gt;&#x27;.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="bitwise-operators"><a href="#bitwise-operators"></a>Bitwise
Operators</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;int&gt; = &lt;int&gt; &amp; &lt;int&gt;                             # And (0b1100 &amp; 0b1010 == 0b1000).</span><br><span class="line">&lt;int&gt; = &lt;int&gt; | &lt;int&gt;                             # Or  (0b1100 | 0b1010 == 0b1110).</span><br><span class="line">&lt;int&gt; = &lt;int&gt; ^ &lt;int&gt;                             # Xor (0b1100 ^ 0b1010 == 0b0110).</span><br><span class="line">&lt;int&gt; = &lt;int&gt; &lt;&lt; n_bits                           # Left shift. Use &gt;&gt; for right.</span><br><span class="line">&lt;int&gt; = ~&lt;int&gt;                                    # Not. Also -&lt;int&gt; - 1.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="combinatorics"><a href="#combinatorics"></a>Combinatorics</h2>
<ul>
<li><strong>Every function returns an iterator.</strong></li>
<li><strong>If you want to print the iterator, you need to pass it to
the list() function first!</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import itertools as it</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; it.product([0, 1], repeat=3)</span><br><span class="line">[(0, 0, 0), (0, 0, 1), (0, 1, 0), (0, 1, 1),</span><br><span class="line"> (1, 0, 0), (1, 0, 1), (1, 1, 0), (1, 1, 1)]</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; it.product(&#x27;abc&#x27;, &#x27;abc&#x27;)                      #   a  b  c</span><br><span class="line">[(&#x27;a&#x27;, &#x27;a&#x27;), (&#x27;a&#x27;, &#x27;b&#x27;), (&#x27;a&#x27;, &#x27;c&#x27;),              # a x  x  x</span><br><span class="line"> (&#x27;b&#x27;, &#x27;a&#x27;), (&#x27;b&#x27;, &#x27;b&#x27;), (&#x27;b&#x27;, &#x27;c&#x27;),              # b x  x  x</span><br><span class="line"> (&#x27;c&#x27;, &#x27;a&#x27;), (&#x27;c&#x27;, &#x27;b&#x27;), (&#x27;c&#x27;, &#x27;c&#x27;)]              # c x  x  x</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; it.combinations(&#x27;abc&#x27;, 2)                     #   a  b  c</span><br><span class="line">[(&#x27;a&#x27;, &#x27;b&#x27;), (&#x27;a&#x27;, &#x27;c&#x27;),                          # a .  x  x</span><br><span class="line"> (&#x27;b&#x27;, &#x27;c&#x27;)]                                      # b .  .  x</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; it.combinations_with_replacement(&#x27;abc&#x27;, 2)    #   a  b  c</span><br><span class="line">[(&#x27;a&#x27;, &#x27;a&#x27;), (&#x27;a&#x27;, &#x27;b&#x27;), (&#x27;a&#x27;, &#x27;c&#x27;),              # a x  x  x</span><br><span class="line"> (&#x27;b&#x27;, &#x27;b&#x27;), (&#x27;b&#x27;, &#x27;c&#x27;),                          # b .  x  x</span><br><span class="line"> (&#x27;c&#x27;, &#x27;c&#x27;)]                                      # c .  .  x</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; it.permutations(&#x27;abc&#x27;, 2)                     #   a  b  c</span><br><span class="line">[(&#x27;a&#x27;, &#x27;b&#x27;), (&#x27;a&#x27;, &#x27;c&#x27;),                          # a .  x  x</span><br><span class="line"> (&#x27;b&#x27;, &#x27;a&#x27;), (&#x27;b&#x27;, &#x27;c&#x27;),                          # b x  .  x</span><br><span class="line"> (&#x27;c&#x27;, &#x27;a&#x27;), (&#x27;c&#x27;, &#x27;b&#x27;)]                          # c x  x  .</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="datetime"><a href="#datetime"></a>Datetime</h2>
<ul>
<li><strong>Module 'datetime' provides 'date' <code>&lt;D&gt;</code>,
'time' <code>&lt;T&gt;</code>, 'datetime' <code>&lt;DT&gt;</code> and
'timedelta' <code>&lt;TD&gt;</code> classes. All are immutable and
hashable.</strong></li>
<li><strong>Time and datetime objects can be 'aware'
<code>&lt;a&gt;</code>, meaning they have defined timezone, or 'naive'
<code>&lt;n&gt;</code>, meaning they don't.</strong></li>
<li><strong>If object is naive, it is presumed to be in the system's
timezone.</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">from datetime import date, time, datetime, timedelta</span><br><span class="line">from dateutil.tz import UTC, tzlocal, gettz, datetime_exists, resolve_imaginary</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="constructors"><a href="#constructors"></a>Constructors</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;D&gt;  = date(year, month, day)               # Only accepts valid dates from 1 to 9999 AD.</span><br><span class="line">&lt;T&gt;  = time(hour=0, minute=0, second=0)     # Also: `microsecond=0, tzinfo=None, fold=0`.</span><br><span class="line">&lt;DT&gt; = datetime(year, month, day, hour=0)   # Also: `minute=0, second=0, microsecond=0, …`.</span><br><span class="line">&lt;TD&gt; = timedelta(weeks=0, days=0, hours=0)  # Also: `minutes=0, seconds=0, microsecond=0`.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Use <code>'&lt;D/DT&gt;.weekday()'</code> to get the day of
the week as an int, with Monday being 0.</strong></li>
<li><strong><code>'fold=1'</code> means the second pass in case of time
jumping back for one hour.</strong></li>
<li><strong>Timedelta normalizes arguments to ±days, seconds
(&lt;86 400) and microseconds (&lt; 1M).</strong></li>
</ul>
<h3 id="now"><a href="#now"></a>Now</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;D/DTn&gt;  = D/DT.today()                     # Current local date or naive datetime.</span><br><span class="line">&lt;DTn&gt;    = DT.utcnow()                      # Naive datetime from current UTC time.</span><br><span class="line">&lt;DTa&gt;    = DT.now(&lt;tzinfo&gt;)                 # Aware datetime from current tz time.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>To extract time use <code>'&lt;DTn&gt;.time()'</code>,
<code>'&lt;DTa&gt;.time()'</code> or
<code>'&lt;DTa&gt;.timetz()'</code>.</strong></li>
</ul>
<h3 id="timezone"><a href="#timezone"></a>Timezone</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;tzinfo&gt; = UTC                              # UTC timezone. London without DST.</span><br><span class="line">&lt;tzinfo&gt; = tzlocal()                        # Local timezone. Also gettz().</span><br><span class="line">&lt;tzinfo&gt; = gettz(&#x27;&lt;Continent&gt;/&lt;City&gt;&#x27;)      # &#x27;Continent/City_Name&#x27; timezone or None.</span><br><span class="line">&lt;DTa&gt;    = &lt;DT&gt;.astimezone(&lt;tzinfo&gt;)        # Datetime, converted to the passed timezone.</span><br><span class="line">&lt;Ta/DTa&gt; = &lt;T/DT&gt;.replace(tzinfo=&lt;tzinfo&gt;)  # Unconverted object with a new timezone.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="encode"><a href="#encode"></a>Encode</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;D/T/DT&gt; = D/T/DT.fromisoformat(&#x27;&lt;iso&gt;&#x27;)    # Object from ISO string. Raises ValueError.</span><br><span class="line">&lt;DT&gt;     = DT.strptime(&lt;str&gt;, &#x27;&lt;format&gt;&#x27;)   # Datetime from str, according to format.</span><br><span class="line">&lt;D/DTn&gt;  = D/DT.fromordinal(&lt;int&gt;)          # D/DTn from days since the Gregorian NYE 1.</span><br><span class="line">&lt;DTn&gt;    = DT.fromtimestamp(&lt;real&gt;)         # Local time DTn from seconds since the Epoch.</span><br><span class="line">&lt;DTa&gt;    = DT.fromtimestamp(&lt;real&gt;, &lt;tz.&gt;)  # Aware datetime from seconds since the Epoch.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>ISO strings come in following forms:
<code>'YYYY-MM-DD'</code>, <code>'HH:MM:SS.mmmuuu[±HH:MM]'</code>, or
both separated by an arbitrary character. All parts following hours are
optional.</strong></li>
<li><strong>Python uses the Unix Epoch:
<code>'1970-01-01 00:00 UTC'</code>,
<code>'1970-01-01 01:00 CET'</code>, ...</strong></li>
</ul>
<h3 id="decode"><a href="#decode"></a>Decode</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;str&gt;    = &lt;D/T/DT&gt;.isoformat(sep=&#x27;T&#x27;)      # Also: `timespec=&#x27;auto/hours/minutes/seconds/…&#x27;`.</span><br><span class="line">&lt;str&gt;    = &lt;D/T/DT&gt;.strftime(&#x27;&lt;format&gt;&#x27;)    # Custom string representation.</span><br><span class="line">&lt;int&gt;    = &lt;D/DT&gt;.toordinal()               # Days since Gregorian NYE 1, ignoring time and tz.</span><br><span class="line">&lt;float&gt;  = &lt;DTn&gt;.timestamp()                # Seconds since the Epoch, from DTn in local tz.</span><br><span class="line">&lt;float&gt;  = &lt;DTa&gt;.timestamp()                # Seconds since the Epoch, from aware datetime.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="format-1"><a href="#format-1"></a>Format</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; dt = datetime.strptime(&#x27;2015-05-14 23:39:00.00 +2000&#x27;, &#x27;%Y-%m-%d %H:%M:%S.%f %z&#x27;)</span><br><span class="line">&gt;&gt;&gt; dt.strftime(&quot;%A, %dth of %B &#x27;%y, %I:%M%p %Z&quot;)</span><br><span class="line">&quot;Thursday, 14th of May &#x27;15, 11:39PM UTC+02:00&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><strong><code>'%Z'</code> only accepts <code>'UTC/GMT'</code> and
local timezone's code. <code>'%z'</code> also accepts
<code>'±HH:MM'</code>.</strong></li>
<li><strong>For abbreviated weekday and month use <code>'%a'</code> and
<code>'%b'</code>.</strong></li>
</ul>
<h3 id="arithmetics"><a href="#arithmetics"></a>Arithmetics</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;D/DT&gt;   = &lt;D/DT&gt;  ± &lt;TD&gt;                   # Returned datetime can fall into missing hour.</span><br><span class="line">&lt;TD&gt;     = &lt;D/DTn&gt; - &lt;D/DTn&gt;                # Returns the difference, ignoring time jumps.</span><br><span class="line">&lt;TD&gt;     = &lt;DTa&gt;   - &lt;DTa&gt;                  # Ignores time jumps if they share tzinfo object.</span><br><span class="line">&lt;TD&gt;     = &lt;TD&gt;    * &lt;real&gt;                 # Also: &lt;TD&gt; = abs(&lt;TD&gt;) and &lt;TD&gt; = &lt;TD&gt; ±% &lt;TD&gt;.</span><br><span class="line">&lt;float&gt;  = &lt;TD&gt;    / &lt;TD&gt;                   # How many weeks/years there are in TD. Also //.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="arguments"><a href="#arguments"></a>Arguments</h2>
<h3 id="inside-function-call"><a href="#inside-function-call"></a>Inside
Function Call</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">func(&lt;positional_args&gt;)                           # func(0, 0)</span><br><span class="line">func(&lt;keyword_args&gt;)                              # func(x=0, y=0)</span><br><span class="line">func(&lt;positional_args&gt;, &lt;keyword_args&gt;)           # func(0, y=0)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="inside-function-definition"><a
href="#inside-function-definition"></a>Inside Function Definition</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">def func(&lt;nondefault_args&gt;): ...                  # def func(x, y): ...</span><br><span class="line">def func(&lt;default_args&gt;): ...                     # def func(x=0, y=0): ...</span><br><span class="line">def func(&lt;nondefault_args&gt;, &lt;default_args&gt;): ...  # def func(x, y=0): ...</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Default values are evaluated when function is first
encountered in the scope.</strong></li>
<li><strong>Any mutation of a mutable default value will persist between
invocations.</strong></li>
</ul>
<h2 id="splat-operator"><a href="#splat-operator"></a>Splat
Operator</h2>
<h3 id="inside-function-call-1"><a
href="#inside-function-call-1"></a>Inside Function Call</h3>
<p><strong>Splat expands a collection into positional arguments, while
splatty-splat expands a dictionary into keyword arguments.</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">args   = (1, 2)</span><br><span class="line">kwargs = &#123;&#x27;x&#x27;: 3, &#x27;y&#x27;: 4, &#x27;z&#x27;: 5&#125;</span><br><span class="line">func(*args, **kwargs)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="is-the-same-as"><a href="#is-the-same-as"></a>Is the same
as:</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">func(1, 2, x=3, y=4, z=5)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="inside-function-definition-1"><a
href="#inside-function-definition-1"></a>Inside Function Definition</h3>
<p><strong>Splat combines zero or more positional arguments into a
tuple, while splatty-splat combines zero or more keyword arguments into
a dictionary.</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">def add(*a):</span><br><span class="line">    return sum(a)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; add(1, 2, 3)</span><br><span class="line">6</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="legal-argument-combinations"><a
href="#legal-argument-combinations"></a>Legal argument
combinations:</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">def f(*args): ...               # f(1, 2, 3)</span><br><span class="line">def f(x, *args): ...            # f(1, 2, 3)</span><br><span class="line">def f(*args, z): ...            # f(1, 2, z=3)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">def f(**kwargs): ...            # f(x=1, y=2, z=3)</span><br><span class="line">def f(x, **kwargs): ...         # f(x=1, y=2, z=3) | f(1, y=2, z=3)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">def f(*args, **kwargs): ...     # f(x=1, y=2, z=3) | f(1, y=2, z=3) | f(1, 2, z=3) | f(1, 2, 3)</span><br><span class="line">def f(x, *args, **kwargs): ...  # f(x=1, y=2, z=3) | f(1, y=2, z=3) | f(1, 2, z=3) | f(1, 2, 3)</span><br><span class="line">def f(*args, y, **kwargs): ...  # f(x=1, y=2, z=3) | f(1, y=2, z=3)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">def f(*, x, y, z): ...          # f(x=1, y=2, z=3)</span><br><span class="line">def f(x, *, y, z): ...          # f(x=1, y=2, z=3) | f(1, y=2, z=3)</span><br><span class="line">def f(x, y, *, z): ...          # f(x=1, y=2, z=3) | f(1, y=2, z=3) | f(1, 2, z=3)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="other-uses"><a href="#other-uses"></a>Other Uses</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;list&gt;  = [*&lt;coll.&gt; [, ...]]    # Or: list(&lt;collection&gt;) [+ ...]</span><br><span class="line">&lt;tuple&gt; = (*&lt;coll.&gt;, [...])     # Or: tuple(&lt;collection&gt;) [+ ...]</span><br><span class="line">&lt;set&gt;   = &#123;*&lt;coll.&gt; [, ...]&#125;    # Or: set(&lt;collection&gt;) [| ...]</span><br><span class="line">&lt;dict&gt;  = &#123;**&lt;dict&gt; [, ...]&#125;    # Or: dict(**&lt;dict&gt; [, ...])</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">head, *body, tail = &lt;coll.&gt;     # Head or tail can be omitted.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="inline"><a href="#inline"></a>Inline</h2>
<h3 id="lambda"><a href="#lambda"></a>Lambda</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;func&gt; = lambda: &lt;return_value&gt;                     # A single statement function.</span><br><span class="line">&lt;func&gt; = lambda &lt;arg_1&gt;, &lt;arg_2&gt;: &lt;return_value&gt;    # Also accepts default arguments.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="comprehensions"><a
href="#comprehensions"></a>Comprehensions</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;list&gt; = [i+1 for i in range(10)]                   # Or: [1, 2, ..., 10]</span><br><span class="line">&lt;iter&gt; = (i for i in range(10) if i &gt; 5)            # Or: iter([6, 7, 8, 9])</span><br><span class="line">&lt;set&gt;  = &#123;i+5 for i in range(10)&#125;                   # Or: &#123;5, 6, ..., 14&#125;</span><br><span class="line">&lt;dict&gt; = &#123;i: i*2 for i in range(10)&#125;                # Or: &#123;0: 0, 1: 2, ..., 9: 18&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; [l+r for l in &#x27;abc&#x27; for r in &#x27;abc&#x27;]</span><br><span class="line">[&#x27;aa&#x27;, &#x27;ab&#x27;, &#x27;ac&#x27;, ..., &#x27;cc&#x27;]</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="map-filter-reduce"><a href="#map-filter-reduce"></a>Map, Filter,
Reduce</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;iter&gt; = map(lambda x: x + 1, range(10))            # Or: iter([1, 2, ..., 10])</span><br><span class="line">&lt;iter&gt; = filter(lambda x: x &gt; 5, range(10))         # Or: iter([6, 7, 8, 9])</span><br><span class="line">&lt;obj&gt;  = reduce(lambda out, x: out + x, range(10))  # Or: 45</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Reduce must be imported from the functools
module.</strong></li>
</ul>
<h3 id="any-all"><a href="#any-all"></a>Any, All</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;bool&gt; = any(&lt;collection&gt;)                          # Is `bool(el)` True for any element.</span><br><span class="line">&lt;bool&gt; = all(&lt;collection&gt;)                          # Is True for all elements or empty.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="conditional-expression"><a
href="#conditional-expression"></a>Conditional Expression</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;obj&gt; = &lt;exp&gt; if &lt;condition&gt; else &lt;exp&gt;             # Only one expression gets evaluated.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; [a if a else &#x27;zero&#x27; for a in (0, 1, 2, 3)]</span><br><span class="line">[&#x27;zero&#x27;, 1, 2, 3]</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="named-tuple-enum-dataclass"><a
href="#named-tuple-enum-dataclass"></a>Named Tuple, Enum, Dataclass</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">from collections import namedtuple</span><br><span class="line">Point = namedtuple(&#x27;Point&#x27;, &#x27;x y&#x27;)                  # Creates a tuple&#x27;s subclass.</span><br><span class="line">point = Point(0, 0)                                 # Returns its instance.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">from enum import Enum</span><br><span class="line">Direction = Enum(&#x27;Direction&#x27;, &#x27;n e s w&#x27;)            # Creates an enum.</span><br><span class="line">direction = Direction.n                             # Returns its member.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">from dataclasses import make_dataclass</span><br><span class="line">Player = make_dataclass(&#x27;Player&#x27;, [&#x27;loc&#x27;, &#x27;dir&#x27;])   # Creates a class.</span><br><span class="line">player = Player(point, direction)                   # Returns its instance.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="imports"><a href="#imports"></a>Imports</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import &lt;module&gt;            # Imports a built-in or &#x27;&lt;module&gt;.py&#x27;.</span><br><span class="line">import &lt;package&gt;           # Imports a built-in or &#x27;&lt;package&gt;/__init__.py&#x27;.</span><br><span class="line">import &lt;package&gt;.&lt;module&gt;  # Imports a built-in or &#x27;&lt;package&gt;/&lt;module&gt;.py&#x27;.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Package is a collection of modules, but it can also define
its own objects.</strong></li>
<li><strong>On a filesystem this corresponds to a directory of Python
files with an optional init script.</strong></li>
<li><strong>Running <code>'import &lt;package&gt;'</code> does not
automatically provide access to the package's modules unless they are
explicitly imported in its init script.</strong></li>
</ul>
<h2 id="closure"><a href="#closure"></a>Closure</h2>
<p><strong>We have/get a closure in Python when:</strong></p>
<ul>
<li><strong>A nested function references a value of its enclosing
function and then</strong></li>
<li><strong>the enclosing function returns the nested
function.</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">def get_multiplier(a):</span><br><span class="line">    def out(b):</span><br><span class="line">        return a * b</span><br><span class="line">    return out</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; multiply_by_3 = get_multiplier(3)</span><br><span class="line">&gt;&gt;&gt; multiply_by_3(10)</span><br><span class="line">30</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>If multiple nested functions within enclosing function
reference the same value, that value gets shared.</strong></li>
<li><strong>To dynamically access function's first free variable use
<code>'&lt;function&gt;.__closure__[0].cell_contents'</code>.</strong></li>
</ul>
<h3 id="partial"><a href="#partial"></a>Partial</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">from functools import partial</span><br><span class="line">&lt;function&gt; = partial(&lt;function&gt; [, &lt;arg_1&gt;, &lt;arg_2&gt;, ...])</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; import operator as op</span><br><span class="line">&gt;&gt;&gt; multiply_by_3 = partial(op.mul, 3)</span><br><span class="line">&gt;&gt;&gt; multiply_by_3(10)</span><br><span class="line">30</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Partial is also useful in cases when function needs to be
passed as an argument because it enables us to set its arguments
beforehand.</strong></li>
<li><strong>A few examples being:
<code>'defaultdict(&lt;function&gt;)'</code>,
<code>'iter(&lt;function&gt;, to_exclusive)'</code> and dataclass's
<code>'field(default_factory=&lt;function&gt;)'</code>.</strong></li>
</ul>
<h3 id="non-local"><a href="#non-local"></a>Non-Local</h3>
<p><strong>If variable is being assigned to anywhere in the scope, it is
regarded as a local variable, unless it is declared as a 'global' or a
'nonlocal'.</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">def get_counter():</span><br><span class="line">    i = 0</span><br><span class="line">    def out():</span><br><span class="line">        nonlocal i</span><br><span class="line">        i += 1</span><br><span class="line">        return i</span><br><span class="line">    return out</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; counter = get_counter()</span><br><span class="line">&gt;&gt;&gt; counter(), counter(), counter()</span><br><span class="line">(1, 2, 3)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="decorator"><a href="#decorator"></a>Decorator</h2>
<ul>
<li><strong>A decorator takes a function, adds some functionality and
returns it.</strong></li>
<li><strong>It can be any <a href="#callable">callable</a>, but is
usually implemented as a function that returns a <a
href="#closure">closure</a>.</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@decorator_name</span><br><span class="line">def function_that_gets_passed_to_decorator():</span><br><span class="line">    ...</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="debugger-example"><a href="#debugger-example"></a>Debugger
Example</h3>
<p><strong>Decorator that prints function's name every time the function
is called.</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">from functools import wraps</span><br><span class="line"></span><br><span class="line">def debug(func):</span><br><span class="line">    @wraps(func)</span><br><span class="line">    def out(*args, **kwargs):</span><br><span class="line">        print(func.__name__)</span><br><span class="line">        return func(*args, **kwargs)</span><br><span class="line">    return out</span><br><span class="line"></span><br><span class="line">@debug</span><br><span class="line">def add(x, y):</span><br><span class="line">    return x + y</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Wraps is a helper decorator that copies the metadata of the
passed function (func) to the function it is wrapping
(out).</strong></li>
<li><strong>Without it <code>'add.__name__'</code> would return
<code>'out'</code>.</strong></li>
</ul>
<h3 id="lru-cache"><a href="#lru-cache"></a>LRU Cache</h3>
<p><strong>Decorator that caches function's return values. All
function's arguments must be hashable.</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">from functools import lru_cache</span><br><span class="line"></span><br><span class="line">@lru_cache(maxsize=None)</span><br><span class="line">def fib(n):</span><br><span class="line">    return n if n &lt; 2 else fib(n-2) + fib(n-1)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Default size of the cache is 128 values. Passing
<code>'maxsize=None'</code> makes it unbounded.</strong></li>
<li><strong>CPython interpreter limits recursion depth to 1000 by
default. To increase it use
<code>'sys.setrecursionlimit(&lt;depth&gt;)'</code>.</strong></li>
</ul>
<h3 id="parametrized-decorator"><a
href="#parametrized-decorator"></a>Parametrized Decorator</h3>
<p><strong>A decorator that accepts arguments and returns a normal
decorator that accepts a function.</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">from functools import wraps</span><br><span class="line"></span><br><span class="line">def debug(print_result=False):</span><br><span class="line">    def decorator(func):</span><br><span class="line">        @wraps(func)</span><br><span class="line">        def out(*args, **kwargs):</span><br><span class="line">            result = func(*args, **kwargs)</span><br><span class="line">            print(func.__name__, result if print_result else &#x27;&#x27;)</span><br><span class="line">            return result</span><br><span class="line">        return out</span><br><span class="line">    return decorator</span><br><span class="line"></span><br><span class="line">@debug(print_result=True)</span><br><span class="line">def add(x, y):</span><br><span class="line">    return x + y</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Using only <code>'@debug'</code> to decorate the add()
function would not work here, because debug would then receive the add()
function as a 'print_result' argument. Decorators can however manually
check if the argument they received is a function and act
accordingly.</strong></li>
</ul>
<h2 id="class"><a href="#class"></a>Class</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">class &lt;name&gt;:</span><br><span class="line">    def __init__(self, a):</span><br><span class="line">        self.a = a</span><br><span class="line">    def __repr__(self):</span><br><span class="line">        class_name = self.__class__.__name__</span><br><span class="line">        return f&#x27;&#123;class_name&#125;(&#123;self.a!r&#125;)&#x27;</span><br><span class="line">    def __str__(self):</span><br><span class="line">        return str(self.a)</span><br><span class="line"></span><br><span class="line">    @classmethod</span><br><span class="line">    def get_class_name(cls):</span><br><span class="line">        return cls.__name__</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Return value of repr() should be unambiguous and of str()
readable.</strong></li>
<li><strong>If only repr() is defined, it will also be used for
str().</strong></li>
<li><strong>Methods decorated with <code>'@staticmethod'</code> do not
receive 'self' nor 'cls' as their first arg.</strong></li>
</ul>
<h4 id="str-use-cases"><a href="#str-use-cases"></a>Str() use
cases:</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">print(&lt;el&gt;)</span><br><span class="line">f&#x27;&#123;&lt;el&gt;&#125;&#x27;</span><br><span class="line">logging.warning(&lt;el&gt;)</span><br><span class="line">csv.writer(&lt;file&gt;).writerow([&lt;el&gt;])</span><br><span class="line">raise Exception(&lt;el&gt;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="repr-use-cases"><a href="#repr-use-cases"></a>Repr() use
cases:</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">print/str/repr([&lt;el&gt;])</span><br><span class="line">f&#x27;&#123;&lt;el&gt;!r&#125;&#x27;</span><br><span class="line">Z = dataclasses.make_dataclass(&#x27;Z&#x27;, [&#x27;a&#x27;]); print/str/repr(Z(&lt;el&gt;))</span><br><span class="line">&gt;&gt;&gt; &lt;el&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="constructor-overloading"><a
href="#constructor-overloading"></a>Constructor Overloading</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">class &lt;name&gt;:</span><br><span class="line">    def __init__(self, a=None):</span><br><span class="line">        self.a = a</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="inheritance"><a href="#inheritance"></a>Inheritance</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">class Person:</span><br><span class="line">    def __init__(self, name, age):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.age  = age</span><br><span class="line"></span><br><span class="line">class Employee(Person):</span><br><span class="line">    def __init__(self, name, age, staff_num):</span><br><span class="line">        super().__init__(name, age)</span><br><span class="line">        self.staff_num = staff_num</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="multiple-inheritance"><a
href="#multiple-inheritance"></a>Multiple Inheritance</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">class A: pass</span><br><span class="line">class B: pass</span><br><span class="line">class C(A, B): pass</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>MRO determines the order in which parent classes are
traversed when searching for a method or an attribute:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; C.mro()</span><br><span class="line">[&lt;class &#x27;C&#x27;&gt;, &lt;class &#x27;A&#x27;&gt;, &lt;class &#x27;B&#x27;&gt;, &lt;class &#x27;object&#x27;&gt;]</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="property"><a href="#property"></a>Property</h3>
<p><strong>Pythonic way of implementing getters and
setters.</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">class Person:</span><br><span class="line">    @property</span><br><span class="line">    def name(self):</span><br><span class="line">        return &#x27; &#x27;.join(self._name)</span><br><span class="line"></span><br><span class="line">    @name.setter</span><br><span class="line">    def name(self, value):</span><br><span class="line">        self._name = value.split()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; person = Person()</span><br><span class="line">&gt;&gt;&gt; person.name = &#x27;\t Guido  van Rossum \n&#x27;</span><br><span class="line">&gt;&gt;&gt; person.name</span><br><span class="line">&#x27;Guido van Rossum&#x27;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="dataclass"><a href="#dataclass"></a>Dataclass</h3>
<p><strong>Decorator that automatically generates init(), repr() and
eq() special methods.</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">from dataclasses import dataclass, field</span><br><span class="line"></span><br><span class="line">@dataclass(order=False, frozen=False)</span><br><span class="line">class &lt;class_name&gt;:</span><br><span class="line">    &lt;attr_name_1&gt;: &lt;type&gt;</span><br><span class="line">    &lt;attr_name_2&gt;: &lt;type&gt; = &lt;default_value&gt;</span><br><span class="line">    &lt;attr_name_3&gt;: list/dict/set = field(default_factory=list/dict/set)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Objects can be made sortable with <code>'order=True'</code>
and immutable with <code>'frozen=True'</code>.</strong></li>
<li><strong>For object to be hashable, all attributes must be hashable
and 'frozen' must be True.</strong></li>
<li><strong>Function field() is needed because
<code>'&lt;attr_name&gt;: list = []'</code> would make a list that is
shared among all instances. Its 'default_factory' argument can be any <a
href="#callable">callable</a>.</strong></li>
<li><strong>For attributes of arbitrary type use
<code>'typing.Any'</code>.</strong></li>
</ul>
<h4 id="inline-1"><a href="#inline-1"></a>Inline:</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">from dataclasses import make_dataclass</span><br><span class="line">&lt;class&gt; = make_dataclass(&#x27;&lt;class_name&gt;&#x27;, &lt;coll_of_attribute_names&gt;)</span><br><span class="line">&lt;class&gt; = make_dataclass(&#x27;&lt;class_name&gt;&#x27;, &lt;coll_of_tuples&gt;)</span><br><span class="line">&lt;tuple&gt; = (&#x27;&lt;attr_name&gt;&#x27;, &lt;type&gt; [, &lt;default_value&gt;])</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4
id="rest-of-type-annotations-cpython-interpreter-ignores-them-all"><a
href="#rest-of-type-annotations-cpython-interpreter-ignores-them-all"></a>Rest
of type annotations (CPython interpreter ignores them all):</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">def func(&lt;arg_name&gt;: &lt;type&gt; [= &lt;obj&gt;]) -&gt; &lt;type&gt;: ...</span><br><span class="line">&lt;var_name&gt;: typing.List/Set/Iterable/Sequence/Optional[&lt;type&gt;]</span><br><span class="line">&lt;var_name&gt;: typing.Dict/Tuple/Union[&lt;type&gt;, ...]</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="slots"><a href="#slots"></a>Slots</h3>
<p><strong>Mechanism that restricts objects to attributes listed in
'slots' and significantly reduces their memory footprint.</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">class MyClassWithSlots:</span><br><span class="line">    __slots__ = [&#x27;a&#x27;]</span><br><span class="line">    def __init__(self):</span><br><span class="line">        self.a = 1</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="copy"><a href="#copy"></a>Copy</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">from copy import copy, deepcopy</span><br><span class="line">&lt;object&gt; = copy(&lt;object&gt;)</span><br><span class="line">&lt;object&gt; = deepcopy(&lt;object&gt;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="duck-types"><a href="#duck-types"></a>Duck Types</h2>
<p><strong>A duck type is an implicit type that prescribes a set of
special methods. Any object that has those methods defined is considered
a member of that duck type.</strong></p>
<h3 id="comparable"><a href="#comparable"></a>Comparable</h3>
<ul>
<li><strong>If eq() method is not overridden, it returns
<code>'id(self) == id(other)'</code>, which is the same as
<code>'self is other'</code>.</strong></li>
<li><strong>That means all objects compare not equal by
default.</strong></li>
<li><strong>Only the left side object has eq() method called, unless it
returns NotImplemented, in which case the right object is consulted.
False is returned if both return NotImplemented.</strong></li>
<li><strong>Ne() automatically works on any object that has eq()
defined.</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">class MyComparable:</span><br><span class="line">    def __init__(self, a):</span><br><span class="line">        self.a = a</span><br><span class="line">    def __eq__(self, other):</span><br><span class="line">        if isinstance(other, type(self)):</span><br><span class="line">            return self.a == other.a</span><br><span class="line">        return NotImplemented</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="hashable"><a href="#hashable"></a>Hashable</h3>
<ul>
<li><strong>Hashable object needs both hash() and eq() methods and its
hash value should never change.</strong></li>
<li><strong>Hashable objects that compare equal must have the same hash
value, meaning default hash() that returns <code>'id(self)'</code> will
not do.</strong></li>
<li><strong>That is why Python automatically makes classes unhashable if
you only implement eq().</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">class MyHashable:</span><br><span class="line">    def __init__(self, a):</span><br><span class="line">        self._a = a</span><br><span class="line">    @property</span><br><span class="line">    def a(self):</span><br><span class="line">        return self._a</span><br><span class="line">    def __eq__(self, other):</span><br><span class="line">        if isinstance(other, type(self)):</span><br><span class="line">            return self.a == other.a</span><br><span class="line">        return NotImplemented</span><br><span class="line">    def __hash__(self):</span><br><span class="line">        return hash(self.a)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="sortable"><a href="#sortable"></a>Sortable</h3>
<ul>
<li><strong>With 'total_ordering' decorator, you only need to provide
eq() and one of lt(), gt(), le() or ge() special methods and the rest
will be automatically generated.</strong></li>
<li><strong>Functions sorted() and min() only require lt() method, while
max() only requires gt(). However, it is best to define them all so that
confusion doesn't arise in other contexts.</strong></li>
<li><strong>When two lists, strings or dataclasses are compared, their
values get compared in order until a pair of unequal values is found.
The comparison of this two values is then returned. The shorter sequence
is considered smaller in case of all values being equal.</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">from functools import total_ordering</span><br><span class="line"></span><br><span class="line">@total_ordering</span><br><span class="line">class MySortable:</span><br><span class="line">    def __init__(self, a):</span><br><span class="line">        self.a = a</span><br><span class="line">    def __eq__(self, other):</span><br><span class="line">        if isinstance(other, type(self)):</span><br><span class="line">            return self.a == other.a</span><br><span class="line">        return NotImplemented</span><br><span class="line">    def __lt__(self, other):</span><br><span class="line">        if isinstance(other, type(self)):</span><br><span class="line">            return self.a &lt; other.a</span><br><span class="line">        return NotImplemented</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="iterator-1"><a href="#iterator-1"></a>Iterator</h3>
<ul>
<li><strong>Any object that has methods next() and iter() is an
iterator.</strong></li>
<li><strong>Next() should return next item or raise
StopIteration.</strong></li>
<li><strong>Iter() should return 'self'.</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">class Counter:</span><br><span class="line">    def __init__(self):</span><br><span class="line">        self.i = 0</span><br><span class="line">    def __next__(self):</span><br><span class="line">        self.i += 1</span><br><span class="line">        return self.i</span><br><span class="line">    def __iter__(self):</span><br><span class="line">        return self</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; counter = Counter()</span><br><span class="line">&gt;&gt;&gt; next(counter), next(counter), next(counter)</span><br><span class="line">(1, 2, 3)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="python-has-many-different-iterator-objects"><a
href="#python-has-many-different-iterator-objects"></a>Python has many
different iterator objects:</h4>
<ul>
<li><strong>Sequence iterators returned by the <a
href="#iterator">iter()</a> function, such as list_iterator and
set_iterator.</strong></li>
<li><strong>Objects returned by the <a href="#itertools">itertools</a>
module, such as count, repeat and cycle.</strong></li>
<li><strong>Generators returned by the <a href="#generator">generator
functions</a> and <a href="#comprehensions">generator
expressions</a>.</strong></li>
<li><strong>File objects returned by the <a href="#open">open()</a>
function, etc.</strong></li>
</ul>
<h3 id="callable"><a href="#callable"></a>Callable</h3>
<ul>
<li><strong>All functions and classes have a call() method, hence are
callable.</strong></li>
<li><strong>When this cheatsheet uses <code>'&lt;function&gt;'</code> as
an argument, it actually means
<code>'&lt;callable&gt;'</code>.</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">class Counter:</span><br><span class="line">    def __init__(self):</span><br><span class="line">        self.i = 0</span><br><span class="line">    def __call__(self):</span><br><span class="line">        self.i += 1</span><br><span class="line">        return self.i</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; counter = Counter()</span><br><span class="line">&gt;&gt;&gt; counter(), counter(), counter()</span><br><span class="line">(1, 2, 3)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="context-manager"><a href="#context-manager"></a>Context
Manager</h3>
<ul>
<li><strong>Enter() should lock the resources and optionally return an
object.</strong></li>
<li><strong>Exit() should release the resources.</strong></li>
<li><strong>Any exception that happens inside the with block is passed
to the exit() method.</strong></li>
<li><strong>If it wishes to suppress the exception it must return a true
value.</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">class MyOpen:</span><br><span class="line">    def __init__(self, filename):</span><br><span class="line">        self.filename = filename</span><br><span class="line">    def __enter__(self):</span><br><span class="line">        self.file = open(self.filename)</span><br><span class="line">        return self.file</span><br><span class="line">    def __exit__(self, exc_type, exception, traceback):</span><br><span class="line">        self.file.close()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; with open(&#x27;test.txt&#x27;, &#x27;w&#x27;) as file:</span><br><span class="line">...     file.write(&#x27;Hello World!&#x27;)</span><br><span class="line">&gt;&gt;&gt; with MyOpen(&#x27;test.txt&#x27;) as file:</span><br><span class="line">...     print(file.read())</span><br><span class="line">Hello World!</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="iterable-duck-types"><a href="#iterable-duck-types"></a>Iterable
Duck Types</h2>
<h3 id="iterable"><a href="#iterable"></a>Iterable</h3>
<ul>
<li><strong>Only required method is iter(). It should return an iterator
of object's items.</strong></li>
<li><strong>Contains() automatically works on any object that has iter()
defined.</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">class MyIterable:</span><br><span class="line">    def __init__(self, a):</span><br><span class="line">        self.a = a</span><br><span class="line">    def __iter__(self):</span><br><span class="line">        return iter(self.a)</span><br><span class="line">    def __contains__(self, el):</span><br><span class="line">        return el in self.a</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; obj = MyIterable([1, 2, 3])</span><br><span class="line">&gt;&gt;&gt; [el for el in obj]</span><br><span class="line">[1, 2, 3]</span><br><span class="line">&gt;&gt;&gt; 1 in obj</span><br><span class="line">True</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="collection"><a href="#collection"></a>Collection</h3>
<ul>
<li><strong>Only required methods are iter() and len(). Len() should
return the number of items.</strong></li>
<li><strong>This cheatsheet actually means
<code>'&lt;iterable&gt;'</code> when it uses
<code>'&lt;collection&gt;'</code>.</strong></li>
<li><strong>I chose not to use the name 'iterable' because it sounds
scarier and more vague than 'collection'. The only drawback of this
decision is that a reader could think a certain function doesn't accept
iterators when it does, since iterators are the only built-in objects
that are iterable but are not collections.</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">class MyCollection:</span><br><span class="line">    def __init__(self, a):</span><br><span class="line">        self.a = a</span><br><span class="line">    def __iter__(self):</span><br><span class="line">        return iter(self.a)</span><br><span class="line">    def __contains__(self, el):</span><br><span class="line">        return el in self.a</span><br><span class="line">    def __len__(self):</span><br><span class="line">        return len(self.a)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="sequence"><a href="#sequence"></a>Sequence</h3>
<ul>
<li><strong>Only required methods are len() and getitem().</strong></li>
<li><strong>Getitem() should return an item at the passed index or raise
IndexError.</strong></li>
<li><strong>Iter() and contains() automatically work on any object that
has getitem() defined.</strong></li>
<li><strong>Reversed() automatically works on any object that has len()
and getitem() defined.</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">class MySequence:</span><br><span class="line">    def __init__(self, a):</span><br><span class="line">        self.a = a</span><br><span class="line">    def __iter__(self):</span><br><span class="line">        return iter(self.a)</span><br><span class="line">    def __contains__(self, el):</span><br><span class="line">        return el in self.a</span><br><span class="line">    def __len__(self):</span><br><span class="line">        return len(self.a)</span><br><span class="line">    def __getitem__(self, i):</span><br><span class="line">        return self.a[i]</span><br><span class="line">    def __reversed__(self):</span><br><span class="line">        return reversed(self.a)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4
id="discrepancies-between-glossary-definitions-and-abstract-base-classes"><a
href="#discrepancies-between-glossary-definitions-and-abstract-base-classes"></a>Discrepancies
between glossary definitions and abstract base classes:</h4>
<ul>
<li><strong>Glossary defines iterable as any object with iter() or
getitem() and sequence as any object with getitem() and len(). It does
not define collection.</strong></li>
<li><strong>Passing ABC Iterable to isinstance() or issubclass() checks
whether object/class has method iter(), while ABC Collection checks for
iter(), contains() and len().</strong></li>
</ul>
<h3 id="abc-sequence"><a href="#abc-sequence"></a>ABC Sequence</h3>
<ul>
<li><strong>It's a richer interface than the basic
sequence.</strong></li>
<li><strong>Extending it generates iter(), contains(), reversed(),
index() and count().</strong></li>
<li><strong>Unlike <code>'abc.Iterable'</code> and
<code>'abc.Collection'</code>, it is not a duck type. That is why
<code>'issubclass(MySequence, abc.Sequence)'</code> would return False
even if MySequence had all the methods defined. It however recognizes
list, tuple, range, str, bytes, bytearray, memoryview and deque, because
they are registered as Sequence's virtual subclasses.</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">from collections import abc</span><br><span class="line"></span><br><span class="line">class MyAbcSequence(abc.Sequence):</span><br><span class="line">    def __init__(self, a):</span><br><span class="line">        self.a = a</span><br><span class="line">    def __len__(self):</span><br><span class="line">        return len(self.a)</span><br><span class="line">    def __getitem__(self, i):</span><br><span class="line">        return self.a[i]</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4
id="table-of-required-and-automatically-available-special-methods"><a
href="#table-of-required-and-automatically-available-special-methods"></a>Table
of required and automatically available special methods:</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">+------------+------------+------------+------------+--------------+</span><br><span class="line">|            |  Iterable  | Collection |  Sequence  | abc.Sequence |</span><br><span class="line">+------------+------------+------------+------------+--------------+</span><br><span class="line">| iter()     |    REQ     |    REQ     |    Yes     |     Yes      |</span><br><span class="line">| contains() |    Yes     |    Yes     |    Yes     |     Yes      |</span><br><span class="line">| len()      |            |    REQ     |    REQ     |     REQ      |</span><br><span class="line">| getitem()  |            |            |    REQ     |     REQ      |</span><br><span class="line">| reversed() |            |            |    Yes     |     Yes      |</span><br><span class="line">| index()    |            |            |            |     Yes      |</span><br><span class="line">| count()    |            |            |            |     Yes      |</span><br><span class="line">+------------+------------+------------+------------+--------------+</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Other ABCs that generate missing methods are:
MutableSequence, Set, MutableSet, Mapping and
MutableMapping.</strong></li>
<li><strong>Names of their required methods are stored in
<code>'&lt;abc&gt;.__abstractmethods__'</code>.</strong></li>
</ul>
<h2 id="enum"><a href="#enum"></a>Enum</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">from enum import Enum, auto</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">class &lt;enum_name&gt;(Enum):</span><br><span class="line">    &lt;member_name_1&gt; = &lt;value_1&gt;</span><br><span class="line">    &lt;member_name_2&gt; = &lt;value_2_a&gt;, &lt;value_2_b&gt;</span><br><span class="line">    &lt;member_name_3&gt; = auto()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>If there are no numeric values before auto(), it returns
1.</strong></li>
<li><strong>Otherwise it returns an increment of the last numeric
value.</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;member&gt; = &lt;enum&gt;.&lt;member_name&gt;                 # Returns a member.</span><br><span class="line">&lt;member&gt; = &lt;enum&gt;[&#x27;&lt;member_name&gt;&#x27;]              # Returns a member or raises KeyError.</span><br><span class="line">&lt;member&gt; = &lt;enum&gt;(&lt;value&gt;)                      # Returns a member or raises ValueError.</span><br><span class="line">&lt;str&gt;    = &lt;member&gt;.name                        # Returns member&#x27;s name.</span><br><span class="line">&lt;obj&gt;    = &lt;member&gt;.value                       # Returns member&#x27;s value.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">list_of_members = list(&lt;enum&gt;)</span><br><span class="line">member_names    = [a.name for a in &lt;enum&gt;]</span><br><span class="line">member_values   = [a.value for a in &lt;enum&gt;]</span><br><span class="line">random_member   = random.choice(list(&lt;enum&gt;))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">def get_next_member(member):</span><br><span class="line">    members = list(member.__class__)</span><br><span class="line">    index   = (members.index(member) + 1) % len(members)</span><br><span class="line">    return members[index]</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="inline-2"><a href="#inline-2"></a>Inline</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Cutlery = Enum(&#x27;Cutlery&#x27;, &#x27;fork knife spoon&#x27;)</span><br><span class="line">Cutlery = Enum(&#x27;Cutlery&#x27;, [&#x27;fork&#x27;, &#x27;knife&#x27;, &#x27;spoon&#x27;])</span><br><span class="line">Cutlery = Enum(&#x27;Cutlery&#x27;, &#123;&#x27;fork&#x27;: 1, &#x27;knife&#x27;: 2, &#x27;spoon&#x27;: 3&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4
id="user-defined-functions-cannot-be-values-so-they-must-be-wrapped"><a
href="#user-defined-functions-cannot-be-values-so-they-must-be-wrapped"></a>User-defined
functions cannot be values, so they must be wrapped:</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">from functools import partial</span><br><span class="line">LogicOp = Enum(&#x27;LogicOp&#x27;, &#123;&#x27;AND&#x27;: partial(lambda l, r: l and r),</span><br><span class="line">                           &#x27;OR&#x27;:  partial(lambda l, r: l or r)&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Member names are in all caps because trying to access a
member that is named after a reserved keyword raises
SyntaxError.</strong></li>
</ul>
<h2 id="exceptions"><a href="#exceptions"></a>Exceptions</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">try:</span><br><span class="line">    &lt;code&gt;</span><br><span class="line">except &lt;exception&gt;:</span><br><span class="line">    &lt;code&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="complex-example"><a href="#complex-example"></a>Complex
Example</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">try:</span><br><span class="line">    &lt;code_1&gt;</span><br><span class="line">except &lt;exception_a&gt;:</span><br><span class="line">    &lt;code_2_a&gt;</span><br><span class="line">except &lt;exception_b&gt;:</span><br><span class="line">    &lt;code_2_b&gt;</span><br><span class="line">else:</span><br><span class="line">    &lt;code_2_c&gt;</span><br><span class="line">finally:</span><br><span class="line">    &lt;code_3&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Code inside the <code>'else'</code> block will only be
executed if <code>'try'</code> block had no exceptions.</strong></li>
<li><strong>Code inside the <code>'finally'</code> block will always be
executed (unless a signal is received).</strong></li>
</ul>
<h3 id="catching-exceptions"><a href="#catching-exceptions"></a>Catching
Exceptions</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">except &lt;exception&gt;: ...</span><br><span class="line">except &lt;exception&gt; as &lt;name&gt;: ...</span><br><span class="line">except (&lt;exception&gt;, [...]): ...</span><br><span class="line">except (&lt;exception&gt;, [...]) as &lt;name&gt;: ...</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Also catches subclasses of the exception.</strong></li>
<li><strong>Use <code>'traceback.print_exc()'</code> to print the error
message to stderr.</strong></li>
<li><strong>Use <code>'print(&lt;name&gt;)'</code> to print just the
cause of the exception (its arguments).</strong></li>
<li><strong>Use <code>'logging.exception(&lt;message&gt;)'</code> to log
the exception.</strong></li>
</ul>
<h3 id="raising-exceptions"><a href="#raising-exceptions"></a>Raising
Exceptions</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">raise &lt;exception&gt;</span><br><span class="line">raise &lt;exception&gt;()</span><br><span class="line">raise &lt;exception&gt;(&lt;el&gt; [, ...])</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="re-raising-caught-exception"><a
href="#re-raising-caught-exception"></a>Re-raising caught
exception:</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">except &lt;exception&gt; as &lt;name&gt;:</span><br><span class="line">    ...</span><br><span class="line">    raise</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="exception-object"><a href="#exception-object"></a>Exception
Object</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">arguments = &lt;name&gt;.args</span><br><span class="line">exc_type  = &lt;name&gt;.__class__</span><br><span class="line">filename  = &lt;name&gt;.__traceback__.tb_frame.f_code.co_filename</span><br><span class="line">func_name = &lt;name&gt;.__traceback__.tb_frame.f_code.co_name</span><br><span class="line">line      = linecache.getline(filename, &lt;name&gt;.__traceback__.tb_lineno)</span><br><span class="line">traceback = &#x27;&#x27;.join(traceback.format_tb(&lt;name&gt;.__traceback__))</span><br><span class="line">error_msg = &#x27;&#x27;.join(traceback.format_exception(exc_type, &lt;name&gt;, &lt;name&gt;.__traceback__))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="built-in-exceptions"><a href="#built-in-exceptions"></a>Built-in
Exceptions</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">BaseException</span><br><span class="line"> +-- SystemExit                   # Raised by the sys.exit() function.</span><br><span class="line"> +-- KeyboardInterrupt            # Raised when the user hits the interrupt key (ctrl-c).</span><br><span class="line"> +-- Exception                    # User-defined exceptions should be derived from this class.</span><br><span class="line">      +-- ArithmeticError         # Base class for arithmetic errors.</span><br><span class="line">      |    +-- ZeroDivisionError  # Raised when dividing by zero.</span><br><span class="line">      +-- AssertionError          # Raised by `assert &lt;exp&gt;` if expression returns false value.</span><br><span class="line">      +-- AttributeError          # Raised when an attribute is missing.</span><br><span class="line">      +-- EOFError                # Raised by input() when it hits end-of-file condition.</span><br><span class="line">      +-- LookupError             # Raised when a look-up on a collection fails.</span><br><span class="line">      |    +-- IndexError         # Raised when a sequence index is out of range.</span><br><span class="line">      |    +-- KeyError           # Raised when a dictionary key or set element is missing.</span><br><span class="line">      +-- MemoryError             # Out of memory. Could be too late to start deleting vars.</span><br><span class="line">      +-- NameError               # Raised when an object is missing.</span><br><span class="line">      +-- OSError                 # Errors such as “file not found” or “disk full” (see Open).</span><br><span class="line">      |    +-- FileNotFoundError  # When a file or directory is requested but doesn&#x27;t exist.</span><br><span class="line">      +-- RuntimeError            # Raised by errors that don&#x27;t fall into other categories.</span><br><span class="line">      |    +-- RecursionError     # Raised when the maximum recursion depth is exceeded.</span><br><span class="line">      +-- StopIteration           # Raised by next() when run on an empty iterator.</span><br><span class="line">      +-- TypeError               # Raised when an argument is of wrong type.</span><br><span class="line">      +-- ValueError              # When an argument is of right type but inappropriate value.</span><br><span class="line">           +-- UnicodeError       # Raised when encoding/decoding strings to/from bytes fails.</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="collections-and-their-exceptions"><a
href="#collections-and-their-exceptions"></a>Collections and their
exceptions:</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">+-----------+------------+------------+------------+</span><br><span class="line">|           |    List    |    Set     |    Dict    |</span><br><span class="line">+-----------+------------+------------+------------+</span><br><span class="line">| getitem() | IndexError |            |  KeyError  |</span><br><span class="line">| pop()     | IndexError |  KeyError  |  KeyError  |</span><br><span class="line">| remove()  | ValueError |  KeyError  |            |</span><br><span class="line">| index()   | ValueError |            |            |</span><br><span class="line">+-----------+------------+------------+------------+</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="useful-built-in-exceptions"><a
href="#useful-built-in-exceptions"></a>Useful built-in exceptions:</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">raise TypeError(&#x27;Argument is of wrong type!&#x27;)</span><br><span class="line">raise ValueError(&#x27;Argument is of right type but inappropriate value!&#x27;)</span><br><span class="line">raise RuntimeError(&#x27;None of above!&#x27;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="user-defined-exceptions"><a
href="#user-defined-exceptions"></a>User-defined Exceptions</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">class MyError(Exception): pass</span><br><span class="line">class MyInputError(MyError): pass</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="exit"><a href="#exit"></a>Exit</h2>
<p><strong>Exits the interpreter by raising SystemExit
exception.</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import sys</span><br><span class="line">sys.exit()                        # Exits with exit code 0 (success).</span><br><span class="line">sys.exit(&lt;el&gt;)                    # Prints to stderr and exits with 1.</span><br><span class="line">sys.exit(&lt;int&gt;)                   # Exits with passed exit code.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="print"><a href="#print"></a>Print</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print(&lt;el_1&gt;, ..., sep=&#x27; &#x27;, end=&#x27;\n&#x27;, file=sys.stdout, flush=False)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Use <code>'file=sys.stderr'</code> for messages about
errors.</strong></li>
<li><strong>Use <code>'flush=True'</code> to forcibly flush the
stream.</strong></li>
</ul>
<h3 id="pretty-print"><a href="#pretty-print"></a>Pretty Print</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">from pprint import pprint</span><br><span class="line">pprint(&lt;collection&gt;, width=80, depth=None, compact=False, sort_dicts=True)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Levels deeper than 'depth' get replaced by
'...'.</strong></li>
</ul>
<h2 id="input"><a href="#input"></a>Input</h2>
<p><strong>Reads a line from user input or pipe if present.</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;str&gt; = input(prompt=None)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Trailing newline gets stripped.</strong></li>
<li><strong>Prompt string is printed to the standard output before
reading input.</strong></li>
<li><strong>Raises EOFError when user hits EOF (ctrl-d/ctrl-z⏎) or input
stream gets exhausted.</strong></li>
</ul>
<h2 id="command-line-arguments"><a
href="#command-line-arguments"></a>Command Line Arguments</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import sys</span><br><span class="line">scripts_path = sys.argv[0]</span><br><span class="line">arguments    = sys.argv[1:]</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="argument-parser"><a href="#argument-parser"></a>Argument
Parser</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">from argparse import ArgumentParser, FileType</span><br><span class="line">p = ArgumentParser(description=&lt;str&gt;)</span><br><span class="line">p.add_argument(&#x27;-&lt;short_name&gt;&#x27;, &#x27;--&lt;name&gt;&#x27;, action=&#x27;store_true&#x27;)  # Flag.</span><br><span class="line">p.add_argument(&#x27;-&lt;short_name&gt;&#x27;, &#x27;--&lt;name&gt;&#x27;, type=&lt;type&gt;)          # Option.</span><br><span class="line">p.add_argument(&#x27;&lt;name&gt;&#x27;, type=&lt;type&gt;, nargs=1)                    # First argument.</span><br><span class="line">p.add_argument(&#x27;&lt;name&gt;&#x27;, type=&lt;type&gt;, nargs=&#x27;+&#x27;)                  # Remaining arguments.</span><br><span class="line">p.add_argument(&#x27;&lt;name&gt;&#x27;, type=&lt;type&gt;, nargs=&#x27;*&#x27;)                  # Optional arguments.</span><br><span class="line">args  = p.parse_args()                                            # Exits on error.</span><br><span class="line">value = args.&lt;name&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Use <code>'help=&lt;str&gt;'</code> to set argument
description that will be displayed in help message.</strong></li>
<li><strong>Use <code>'default=&lt;el&gt;'</code> to set the default
value.</strong></li>
<li><strong>Use <code>'type=FileType(&lt;mode&gt;)'</code> for files.
Accepts 'encoding', but 'newline' is None.</strong></li>
</ul>
<h2 id="open"><a href="#open"></a>Open</h2>
<p><strong>Opens the file and returns a corresponding file
object.</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;file&gt; = open(&lt;path&gt;, mode=&#x27;r&#x27;, encoding=None, newline=None)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><strong><code>'encoding=None'</code> means that the default encoding
is used, which is platform dependent. Best practice is to use
<code>'encoding="utf-8"'</code> whenever possible.</strong></li>
<li><strong><code>'newline=None'</code> means all different end of line
combinations are converted to '' on read, while on write all ''
characters are converted to system's default line
separator.</strong></li>
<li><strong><code>'newline=""'</code> means no conversions take place,
but input is still broken into chunks by readline() and readlines() on
every '', ' and ''.</strong></li>
</ul>
<h3 id="modes"><a href="#modes"></a>Modes</h3>
<ul>
<li><strong><code>'r'</code> - Read (default).</strong></li>
<li><strong><code>'w'</code> - Write (truncate).</strong></li>
<li><strong><code>'x'</code> - Write or fail if the file already
exists.</strong></li>
<li><strong><code>'a'</code> - Append.</strong></li>
<li><strong><code>'w+'</code> - Read and write (truncate).</strong></li>
<li><strong><code>'r+'</code> - Read and write from the
start.</strong></li>
<li><strong><code>'a+'</code> - Read and write from the
end.</strong></li>
<li><strong><code>'t'</code> - Text mode (default).</strong></li>
<li><strong><code>'b'</code> - Binary mode (<code>'br'</code>,
<code>'bw'</code>, <code>'bx'</code>, …).</strong></li>
</ul>
<h3 id="exceptions-1"><a href="#exceptions-1"></a>Exceptions</h3>
<ul>
<li><strong><code>'FileNotFoundError'</code> can be raised when reading
with <code>'r'</code> or <code>'r+'</code>.</strong></li>
<li><strong><code>'FileExistsError'</code> can be raised when writing
with <code>'x'</code>.</strong></li>
<li><strong><code>'IsADirectoryError'</code> and
<code>'PermissionError'</code> can be raised by any.</strong></li>
<li><strong><code>'OSError'</code> is the parent class of all listed
exceptions.</strong></li>
</ul>
<h3 id="file-object"><a href="#file-object"></a>File Object</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;file&gt;.seek(0)                      # Moves to the start of the file.</span><br><span class="line">&lt;file&gt;.seek(offset)                 # Moves &#x27;offset&#x27; chars/bytes from the start.</span><br><span class="line">&lt;file&gt;.seek(0, 2)                   # Moves to the end of the file.</span><br><span class="line">&lt;bin_file&gt;.seek(±offset, &lt;anchor&gt;)  # Anchor: 0 start, 1 current position, 2 end.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;str/bytes&gt; = &lt;file&gt;.read(size=-1)  # Reads &#x27;size&#x27; chars/bytes or until EOF.</span><br><span class="line">&lt;str/bytes&gt; = &lt;file&gt;.readline()     # Returns a line or empty string/bytes on EOF.</span><br><span class="line">&lt;list&gt;      = &lt;file&gt;.readlines()    # Returns a list of remaining lines.</span><br><span class="line">&lt;str/bytes&gt; = next(&lt;file&gt;)          # Returns a line using buffer. Do not mix.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;file&gt;.write(&lt;str/bytes&gt;)           # Writes a string or bytes object.</span><br><span class="line">&lt;file&gt;.writelines(&lt;collection&gt;)     # Writes a coll. of strings or bytes objects.</span><br><span class="line">&lt;file&gt;.flush()                      # Flushes write buffer. Runs every 4096/8192 B.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Methods do not add or strip trailing newlines, even
writelines().</strong></li>
</ul>
<h3 id="read-text-from-file"><a href="#read-text-from-file"></a>Read
Text from File</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">def read_file(filename):</span><br><span class="line">    with open(filename, encoding=&#x27;utf-8&#x27;) as file:</span><br><span class="line">        return file.readlines()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="write-text-to-file"><a href="#write-text-to-file"></a>Write Text
to File</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">def write_to_file(filename, text):</span><br><span class="line">    with open(filename, &#x27;w&#x27;, encoding=&#x27;utf-8&#x27;) as file:</span><br><span class="line">        file.write(text)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="paths"><a href="#paths"></a>Paths</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">from os import getcwd, path, listdir, scandir</span><br><span class="line">from glob import glob</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;str&gt;  = getcwd()                   # Returns the current working directory.</span><br><span class="line">&lt;str&gt;  = path.join(&lt;path&gt;, ...)     # Joins two or more pathname components.</span><br><span class="line">&lt;str&gt;  = path.abspath(&lt;path&gt;)       # Returns absolute path.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;str&gt;  = path.basename(&lt;path&gt;)      # Returns final component of the path.</span><br><span class="line">&lt;str&gt;  = path.dirname(&lt;path&gt;)       # Returns path without the final component.</span><br><span class="line">&lt;tup.&gt; = path.splitext(&lt;path&gt;)      # Splits on last period of the final component.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;list&gt; = listdir(path=&#x27;.&#x27;)          # Returns filenames located at path.</span><br><span class="line">&lt;list&gt; = glob(&#x27;&lt;pattern&gt;&#x27;)          # Returns paths matching the wildcard pattern.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;bool&gt; = path.exists(&lt;path&gt;)        # Or: &lt;Path&gt;.exists()</span><br><span class="line">&lt;bool&gt; = path.isfile(&lt;path&gt;)        # Or: &lt;DirEntry/Path&gt;.is_file()</span><br><span class="line">&lt;bool&gt; = path.isdir(&lt;path&gt;)         # Or: &lt;DirEntry/Path&gt;.is_dir()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;stat&gt; = os.stat(&lt;path&gt;)            # Or: &lt;DirEntry/Path&gt;.stat()</span><br><span class="line">&lt;real&gt; = &lt;stat&gt;.st_mtime/st_size/…  # Modification time, size in bytes, …</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="direntry"><a href="#direntry"></a>DirEntry</h3>
<p><strong>Unlike listdir(), scandir() returns DirEntry objects that
cache isfile, isdir and on Windows also stat information, thus
significantly increasing the performance of code that requires
it.</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;iter&gt; = scandir(path=&#x27;.&#x27;)          # Returns DirEntry objects located at path.</span><br><span class="line">&lt;str&gt;  = &lt;DirEntry&gt;.path            # Returns whole path as a string.</span><br><span class="line">&lt;str&gt;  = &lt;DirEntry&gt;.name            # Returns final component as a string.</span><br><span class="line">&lt;file&gt; = open(&lt;DirEntry&gt;)           # Opens the file and returns a file object.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="path-object"><a href="#path-object"></a>Path Object</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">from pathlib import Path</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;Path&gt; = Path(&lt;path&gt; [, ...])       # Accepts strings, Paths and DirEntry objects.</span><br><span class="line">&lt;Path&gt; = &lt;path&gt; / &lt;path&gt; [/ ...]    # First or second path must be a Path object.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;Path&gt; = Path()                     # Returns relative cwd. Also Path(&#x27;.&#x27;).</span><br><span class="line">&lt;Path&gt; = Path.cwd()                 # Returns absolute cwd. Also Path().resolve().</span><br><span class="line">&lt;Path&gt; = Path.home()                # Returns user&#x27;s home directory (absolute).</span><br><span class="line">&lt;Path&gt; = Path(__file__).resolve()   # Returns script&#x27;s path if cwd wasn&#x27;t changed.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;Path&gt; = &lt;Path&gt;.parent              # Returns Path without the final component.</span><br><span class="line">&lt;str&gt;  = &lt;Path&gt;.name                # Returns final component as a string.</span><br><span class="line">&lt;str&gt;  = &lt;Path&gt;.stem                # Returns final component without extension.</span><br><span class="line">&lt;str&gt;  = &lt;Path&gt;.suffix              # Returns final component&#x27;s extension.</span><br><span class="line">&lt;tup.&gt; = &lt;Path&gt;.parts               # Returns all components as strings.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;iter&gt; = &lt;Path&gt;.iterdir()           # Returns directory contents as Path objects.</span><br><span class="line">&lt;iter&gt; = &lt;Path&gt;.glob(&#x27;&lt;pattern&gt;&#x27;)   # Returns Paths matching the wildcard pattern.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;str&gt;  = str(&lt;Path&gt;)                # Returns path as a string.</span><br><span class="line">&lt;file&gt; = open(&lt;Path&gt;)               # Also &lt;Path&gt;.read/write_text/bytes().</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="os-commands"><a href="#os-commands"></a>OS Commands</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import os, shutil, subprocess</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">os.chdir(&lt;path&gt;)                    # Changes the current working directory.</span><br><span class="line">os.mkdir(&lt;path&gt;, mode=0o777)        # Creates a directory. Permissions are in octal.</span><br><span class="line">os.makedirs(&lt;path&gt;, mode=0o777)     # Creates all path&#x27;s dirs. Also: `exist_ok=False`.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">shutil.copy(from, to)               # Copies the file. &#x27;to&#x27; can exist or be a dir.</span><br><span class="line">shutil.copytree(from, to)           # Copies the directory. &#x27;to&#x27; must not exist.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">os.rename(from, to)                 # Renames/moves the file or directory.</span><br><span class="line">os.replace(from, to)                # Same, but overwrites &#x27;to&#x27; if it exists.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">os.remove(&lt;path&gt;)                   # Deletes the file.</span><br><span class="line">os.rmdir(&lt;path&gt;)                    # Deletes the empty directory.</span><br><span class="line">shutil.rmtree(&lt;path&gt;)               # Deletes the directory.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Paths can be either strings, Paths or DirEntry
objects.</strong></li>
<li><strong>Functions report OS related errors by raising either OSError
or one of its <a href="#exceptions-1">subclasses</a>.</strong></li>
</ul>
<h3 id="shell-commands"><a href="#shell-commands"></a>Shell
Commands</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;pipe&gt; = os.popen(&#x27;&lt;command&gt;&#x27;)      # Executes command in sh/cmd. Returns its stdout pipe.</span><br><span class="line">&lt;str&gt;  = &lt;pipe&gt;.read(size=-1)       # Reads &#x27;size&#x27; chars or until EOF. Also readline/s().</span><br><span class="line">&lt;int&gt;  = &lt;pipe&gt;.close()             # Closes the pipe. Returns None on success.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="sends-1-1-to-the-basic-calculator-and-captures-its-output"><a
href="#sends-1--1-to-the-basic-calculator-and-captures-its-output"></a>Sends
'1 + 1' to the basic calculator and captures its output:</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; subprocess.run(&#x27;bc&#x27;, input=&#x27;1 + 1\n&#x27;, capture_output=True, text=True)</span><br><span class="line">CompletedProcess(args=&#x27;bc&#x27;, returncode=0, stdout=&#x27;2\n&#x27;, stderr=&#x27;&#x27;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4
id="sends-test.in-to-the-basic-calculator-running-in-standard-mode-and-saves-its-output-to-test.out"><a
href="#sends-testin-to-the-basic-calculator-running-in-standard-mode-and-saves-its-output-to-testout"></a>Sends
test.in to the basic calculator running in standard mode and saves its
output to test.out:</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; from shlex import split</span><br><span class="line">&gt;&gt;&gt; os.popen(&#x27;echo 1 + 1 &gt; test.in&#x27;)</span><br><span class="line">&gt;&gt;&gt; subprocess.run(split(&#x27;bc -s&#x27;), stdin=open(&#x27;test.in&#x27;), stdout=open(&#x27;test.out&#x27;, &#x27;w&#x27;))</span><br><span class="line">CompletedProcess(args=[&#x27;bc&#x27;, &#x27;-s&#x27;], returncode=0)</span><br><span class="line">&gt;&gt;&gt; open(&#x27;test.out&#x27;).read()</span><br><span class="line">&#x27;2\n&#x27;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="json"><a href="#json"></a>JSON</h2>
<p><strong>Text file format for storing collections of strings and
numbers.</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import json</span><br><span class="line">&lt;str&gt;    = json.dumps(&lt;object&gt;)     # Converts object to JSON string.</span><br><span class="line">&lt;object&gt; = json.loads(&lt;str&gt;)        # Converts JSON string to object.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="read-object-from-json-file"><a
href="#read-object-from-json-file"></a>Read Object from JSON File</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">def read_json_file(filename):</span><br><span class="line">    with open(filename, encoding=&#x27;utf-8&#x27;) as file:</span><br><span class="line">        return json.load(file)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="write-object-to-json-file"><a
href="#write-object-to-json-file"></a>Write Object to JSON File</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">def write_to_json_file(filename, an_object):</span><br><span class="line">    with open(filename, &#x27;w&#x27;, encoding=&#x27;utf-8&#x27;) as file:</span><br><span class="line">        json.dump(an_object, file, ensure_ascii=False, indent=2)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="pickle"><a href="#pickle"></a>Pickle</h2>
<p><strong>Binary file format for storing Python objects.</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import pickle</span><br><span class="line">&lt;bytes&gt;  = pickle.dumps(&lt;object&gt;)   # Converts object to bytes object.</span><br><span class="line">&lt;object&gt; = pickle.loads(&lt;bytes&gt;)    # Converts bytes object to object.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="read-object-from-file"><a href="#read-object-from-file"></a>Read
Object from File</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">def read_pickle_file(filename):</span><br><span class="line">    with open(filename, &#x27;rb&#x27;) as file:</span><br><span class="line">        return pickle.load(file)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="write-object-to-file"><a href="#write-object-to-file"></a>Write
Object to File</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">def write_to_pickle_file(filename, an_object):</span><br><span class="line">    with open(filename, &#x27;wb&#x27;) as file:</span><br><span class="line">        pickle.dump(an_object, file)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="csv"><a href="#csv"></a>CSV</h2>
<p><strong>Text file format for storing spreadsheets.</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import csv</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="read"><a href="#read"></a>Read</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;reader&gt; = csv.reader(&lt;file&gt;)       # Also: `dialect=&#x27;excel&#x27;, delimiter=&#x27;,&#x27;`.</span><br><span class="line">&lt;list&gt;   = next(&lt;reader&gt;)           # Returns next row as a list of strings.</span><br><span class="line">&lt;list&gt;   = list(&lt;reader&gt;)           # Returns a list of remaining rows.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>File must be opened with a <code>'newline=""'</code>
argument, or newlines embedded inside quoted fields will not be
interpreted correctly!</strong></li>
<li><strong>To print the spreadsheet to the console use <a
href="#table">Tabulate</a> library.</strong></li>
<li><strong>For XML and binary Excel files (xlsx, xlsm and xlsb) use <a
href="#dataframe-plot-encode-decode">Pandas</a> library.</strong></li>
</ul>
<h3 id="write"><a href="#write"></a>Write</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;writer&gt; = csv.writer(&lt;file&gt;)       # Also: `dialect=&#x27;excel&#x27;, delimiter=&#x27;,&#x27;`.</span><br><span class="line">&lt;writer&gt;.writerow(&lt;collection&gt;)     # Encodes objects using `str(&lt;el&gt;)`.</span><br><span class="line">&lt;writer&gt;.writerows(&lt;coll_of_coll&gt;)  # Appends multiple rows.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>File must be opened with a <code>'newline=""'</code>
argument, or ' will be added in front of every '' on platforms that use
'' line endings!</strong></li>
</ul>
<h3 id="parameters"><a href="#parameters"></a>Parameters</h3>
<ul>
<li><strong><code>'dialect'</code> - Master parameter that sets the
default values. String or a Dialect object.</strong></li>
<li><strong><code>'delimiter'</code> - A one-character string used to
separate fields.</strong></li>
<li><strong><code>'quotechar'</code> - Character for quoting fields that
contain special characters.</strong></li>
<li><strong><code>'doublequote'</code> - Whether quotechars inside
fields are/get doubled or escaped.</strong></li>
<li><strong><code>'skipinitialspace'</code> - Is space character at the
start of the field stripped by the reader.</strong></li>
<li><strong><code>'lineterminator'</code> - How writer terminates rows.
Reader is hardcoded to '', ', ''.</strong></li>
<li><strong><code>'quoting'</code> - 0: As necessary, 1: All, 2: All but
numbers which are read as floats, 3: None.</strong></li>
<li><strong><code>'escapechar'</code> - Character for escaping
quotechars if doublequote is False.</strong></li>
</ul>
<h3 id="dialects"><a href="#dialects"></a>Dialects</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">+------------------+--------------+--------------+--------------+</span><br><span class="line">|                  |     excel    |   excel-tab  |     unix     |</span><br><span class="line">+------------------+--------------+--------------+--------------+</span><br><span class="line">| delimiter        |       &#x27;,&#x27;    |      &#x27;\t&#x27;    |       &#x27;,&#x27;    |</span><br><span class="line">| quotechar        |       &#x27;&quot;&#x27;    |       &#x27;&quot;&#x27;    |       &#x27;&quot;&#x27;    |</span><br><span class="line">| doublequote      |      True    |      True    |      True    |</span><br><span class="line">| skipinitialspace |     False    |     False    |     False    |</span><br><span class="line">| lineterminator   |    &#x27;\r\n&#x27;    |    &#x27;\r\n&#x27;    |      &#x27;\n&#x27;    |</span><br><span class="line">| quoting          |         0    |         0    |         1    |</span><br><span class="line">| escapechar       |      None    |      None    |      None    |</span><br><span class="line">+------------------+--------------+--------------+--------------+</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="read-rows-from-csv-file"><a
href="#read-rows-from-csv-file"></a>Read Rows from CSV File</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">def read_csv_file(filename, dialect=&#x27;excel&#x27;):</span><br><span class="line">    with open(filename, encoding=&#x27;utf-8&#x27;, newline=&#x27;&#x27;) as file:</span><br><span class="line">        return list(csv.reader(file, dialect))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="write-rows-to-csv-file"><a
href="#write-rows-to-csv-file"></a>Write Rows to CSV File</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">def write_to_csv_file(filename, rows, dialect=&#x27;excel&#x27;):</span><br><span class="line">    with open(filename, &#x27;w&#x27;, encoding=&#x27;utf-8&#x27;, newline=&#x27;&#x27;) as file:</span><br><span class="line">        writer = csv.writer(file, dialect)</span><br><span class="line">        writer.writerows(rows)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="sqlite"><a href="#sqlite"></a>SQLite</h2>
<p><strong>A server-less database engine that stores each database into
a separate file.</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import sqlite3</span><br><span class="line">&lt;conn&gt; = sqlite3.connect(&lt;path&gt;)                # Opens existing or new file. Also &#x27;:memory:&#x27;.</span><br><span class="line">&lt;conn&gt;.close()                                  # Closes the connection.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="read-1"><a href="#read-1"></a>Read</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;cursor&gt; = &lt;conn&gt;.execute(&#x27;&lt;query&gt;&#x27;)            # Can raise a subclass of sqlite3.Error.</span><br><span class="line">&lt;tuple&gt;  = &lt;cursor&gt;.fetchone()                  # Returns next row. Also next(&lt;cursor&gt;).</span><br><span class="line">&lt;list&gt;   = &lt;cursor&gt;.fetchall()                  # Returns remaining rows. Also list(&lt;cursor&gt;).</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="write-1"><a href="#write-1"></a>Write</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;conn&gt;.execute(&#x27;&lt;query&gt;&#x27;)                       # Can raise a subclass of sqlite3.Error.</span><br><span class="line">&lt;conn&gt;.commit()                                 # Saves all changes since the last commit.</span><br><span class="line">&lt;conn&gt;.rollback()                               # Discards all changes since the last commit.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="or"><a href="#or"></a>Or:</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">with &lt;conn&gt;:                                    # Exits the block with commit() or rollback(),</span><br><span class="line">    &lt;conn&gt;.execute(&#x27;&lt;query&gt;&#x27;)                   # depending on whether any exception occurred.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="placeholders"><a href="#placeholders"></a>Placeholders</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;conn&gt;.execute(&#x27;&lt;query&gt;&#x27;, &lt;list/tuple&gt;)         # Replaces &#x27;?&#x27;s in query with values.</span><br><span class="line">&lt;conn&gt;.execute(&#x27;&lt;query&gt;&#x27;, &lt;dict/namedtuple&gt;)    # Replaces &#x27;:&lt;key&gt;&#x27;s with values.</span><br><span class="line">&lt;conn&gt;.executemany(&#x27;&lt;query&gt;&#x27;, &lt;coll_of_above&gt;)  # Runs execute() multiple times.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Passed values can be of type str, int, float, bytes, None,
bool, datetime.date or datetime.datetime.</strong></li>
<li><strong>Bools will be stored and returned as ints and dates as <a
href="#encode">ISO formatted strings</a>.</strong></li>
</ul>
<h3 id="example"><a href="#example"></a>Example</h3>
<p><strong>Values are not actually saved in this example because
<code>'conn.commit()'</code> is omitted!</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; conn = sqlite3.connect(&#x27;test.db&#x27;)</span><br><span class="line">&gt;&gt;&gt; conn.execute(&#x27;CREATE TABLE person (person_id INTEGER PRIMARY KEY, name, height)&#x27;)</span><br><span class="line">&gt;&gt;&gt; conn.execute(&#x27;INSERT INTO person VALUES (NULL, ?, ?)&#x27;, (&#x27;Jean-Luc&#x27;, 187)).lastrowid</span><br><span class="line">1</span><br><span class="line">&gt;&gt;&gt; conn.execute(&#x27;SELECT * FROM person&#x27;).fetchall()</span><br><span class="line">[(1, &#x27;Jean-Luc&#x27;, 187)]</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="sqlalchemy"><a href="#sqlalchemy"></a>SqlAlchemy</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># $ pip3 install sqlalchemy</span><br><span class="line">from sqlalchemy import create_engine, text</span><br><span class="line">&lt;engine&gt; = create_engine(&#x27;&lt;url&gt;&#x27;).connect()     # Url: &#x27;dialect://user:password@host/dbname&#x27;.</span><br><span class="line">&lt;conn&gt;   = &lt;engine&gt;.connect()                   # Creates a connection. Also &lt;conn&gt;.close().</span><br><span class="line">&lt;cursor&gt; = &lt;conn&gt;.execute(text(&#x27;&lt;query&gt;&#x27;), …)   # Replaces &#x27;:&lt;key&gt;&#x27;s with keyword arguments.</span><br><span class="line">with &lt;conn&gt;.begin(): ...                        # Exits the block with commit or rollback.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">+------------+--------------+-----------+-----------------------------------+</span><br><span class="line">| Dialects   | pip3 install | import    | Dependencies                      |</span><br><span class="line">+------------+--------------+-----------+-----------------------------------+</span><br><span class="line">| mysql      | mysqlclient  | MySQLdb   | www.pypi.org/project/mysqlclient  |</span><br><span class="line">| postgresql | psycopg2     | psycopg2  | www.psycopg.org/docs/install.html |</span><br><span class="line">| mssql      | pyodbc       | pyodbc    | apt install g++ unixodbc-dev      |</span><br><span class="line">| oracle     | cx_oracle    | cx_Oracle | Oracle Instant Client             |</span><br><span class="line">+------------+--------------+-----------+-----------------------------------+</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="bytes"><a href="#bytes"></a>Bytes</h2>
<p><strong>Bytes object is an immutable sequence of single bytes.
Mutable version is called bytearray.</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;bytes&gt; = b&#x27;&lt;str&gt;&#x27;                          # Only accepts ASCII characters and \x00-\xff.</span><br><span class="line">&lt;int&gt;   = &lt;bytes&gt;[&lt;index&gt;]                  # Returns an int in range from 0 to 255.</span><br><span class="line">&lt;bytes&gt; = &lt;bytes&gt;[&lt;slice&gt;]                  # Returns bytes even if it has only one element.</span><br><span class="line">&lt;bytes&gt; = &lt;bytes&gt;.join(&lt;coll_of_bytes&gt;)     # Joins elements using bytes as a separator.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="encode-1"><a href="#encode-1"></a>Encode</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;bytes&gt; = bytes(&lt;coll_of_ints&gt;)             # Ints must be in range from 0 to 255.</span><br><span class="line">&lt;bytes&gt; = bytes(&lt;str&gt;, &#x27;utf-8&#x27;)             # Or: &lt;str&gt;.encode(&#x27;utf-8&#x27;)</span><br><span class="line">&lt;bytes&gt; = &lt;int&gt;.to_bytes(n_bytes, …)        # `byteorder=&#x27;little/big&#x27;, signed=False`.</span><br><span class="line">&lt;bytes&gt; = bytes.fromhex(&#x27;&lt;hex&gt;&#x27;)            # Hex pairs can be separated by whitespaces.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="decode-1"><a href="#decode-1"></a>Decode</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;list&gt;  = list(&lt;bytes&gt;)                     # Returns ints in range from 0 to 255.</span><br><span class="line">&lt;str&gt;   = str(&lt;bytes&gt;, &#x27;utf-8&#x27;)             # Or: &lt;bytes&gt;.decode(&#x27;utf-8&#x27;)</span><br><span class="line">&lt;int&gt;   = int.from_bytes(&lt;bytes&gt;, …)        # `byteorder=&#x27;little/big&#x27;, signed=False`.</span><br><span class="line">&#x27;&lt;hex&gt;&#x27; = &lt;bytes&gt;.hex()                     # Returns hex pairs. Accepts `sep=&lt;str&gt;`.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="read-bytes-from-file"><a href="#read-bytes-from-file"></a>Read
Bytes from File</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">def read_bytes(filename):</span><br><span class="line">    with open(filename, &#x27;rb&#x27;) as file:</span><br><span class="line">        return file.read()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="write-bytes-to-file"><a href="#write-bytes-to-file"></a>Write
Bytes to File</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">def write_bytes(filename, bytes_obj):</span><br><span class="line">    with open(filename, &#x27;wb&#x27;) as file:</span><br><span class="line">        file.write(bytes_obj)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="struct"><a href="#struct"></a>Struct</h2>
<ul>
<li><strong>Module that performs conversions between a sequence of
numbers and a bytes object.</strong></li>
<li><strong>System’s type sizes, byte order, and alignment rules are
used by default.</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">from struct import pack, unpack</span><br><span class="line">&lt;bytes&gt; = pack(&#x27;&lt;format&gt;&#x27;, &lt;el_1&gt; [, ...])  # Packages arguments into bytes object.</span><br><span class="line">&lt;tuple&gt; = unpack(&#x27;&lt;format&gt;&#x27;, &lt;bytes&gt;)       # Use iter_unpack() for iterator of tuples.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; pack(&#x27;&gt;hhl&#x27;, 1, 2, 3)</span><br><span class="line">b&#x27;\x00\x01\x00\x02\x00\x00\x00\x03&#x27;</span><br><span class="line">&gt;&gt;&gt; unpack(&#x27;&gt;hhl&#x27;, b&#x27;\x00\x01\x00\x02\x00\x00\x00\x03&#x27;)</span><br><span class="line">(1, 2, 3)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="format-2"><a href="#format-2"></a>Format</h3>
<h4
id="for-standard-type-sizes-and-manual-alignment-padding-start-format-string-with"><a
href="#for-standard-type-sizes-and-manual-alignment-padding-start-format-string-with"></a>For
standard type sizes and manual alignment (padding) start format string
with:</h4>
<ul>
<li><strong><code>'='</code> - System's byte order (usually
little-endian).</strong></li>
<li><strong><code>'&lt;'</code> - Little-endian.</strong></li>
<li><strong><code>'&gt;'</code> - Big-endian (also
<code>'!'</code>).</strong></li>
</ul>
<h4
id="besides-numbers-pack-and-unpack-also-support-bytes-objects-as-part-of-the-sequence"><a
href="#besides-numbers-pack-and-unpack-also-support-bytes-objects-as-part-of-the-sequence"></a>Besides
numbers, pack() and unpack() also support bytes objects as part of the
sequence:</h4>
<ul>
<li><strong><code>'c'</code> - A bytes object with a single element. For
pad byte use <code>'x'</code>.</strong></li>
<li><strong><code>'&lt;n&gt;s'</code> - A bytes object with n
elements.</strong></li>
</ul>
<h4
id="integer-types.-use-a-capital-letter-for-unsigned-type.-minimum-and-standard-sizes-are-in-brackets"><a
href="#integer-types-use-a-capital-letter-for-unsigned-type-minimum-and-standard-sizes-are-in-brackets"></a>Integer
types. Use a capital letter for unsigned type. Minimum and standard
sizes are in brackets:</h4>
<ul>
<li><strong><code>'b'</code> - char (1/1)</strong></li>
<li><strong><code>'h'</code> - short (2/2)</strong></li>
<li><strong><code>'i'</code> - int (2/4)</strong></li>
<li><strong><code>'l'</code> - long (4/4)</strong></li>
<li><strong><code>'q'</code> - long long (8/8)</strong></li>
</ul>
<h4 id="floating-point-types"><a
href="#floating-point-types"></a>Floating point types:</h4>
<ul>
<li><strong><code>'f'</code> - float (4/4)</strong></li>
<li><strong><code>'d'</code> - double (8/8)</strong></li>
</ul>
<h2 id="array"><a href="#array"></a>Array</h2>
<p><strong>List that can only hold numbers of a predefined type.
Available types and their minimum sizes in bytes are listed above. Sizes
and byte order are always determined by the system.</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">from array import array</span><br><span class="line">&lt;array&gt; = array(&#x27;&lt;typecode&gt;&#x27;, &lt;collection&gt;)    # Array from collection of numbers.</span><br><span class="line">&lt;array&gt; = array(&#x27;&lt;typecode&gt;&#x27;, &lt;bytes&gt;)         # Array from bytes object.</span><br><span class="line">&lt;array&gt; = array(&#x27;&lt;typecode&gt;&#x27;, &lt;array&gt;)         # Treats array as a sequence of numbers.</span><br><span class="line">&lt;bytes&gt; = bytes(&lt;array&gt;)                       # Or: &lt;array&gt;.tobytes()</span><br><span class="line">&lt;file&gt;.write(&lt;array&gt;)                          # Writes array to the binary file.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="memory-view"><a href="#memory-view"></a>Memory View</h2>
<ul>
<li><strong>A sequence object that points to the memory of another
object.</strong></li>
<li><strong>Each element can reference a single or multiple consecutive
bytes, depending on format.</strong></li>
<li><strong>Order and number of elements can be changed with
slicing.</strong></li>
<li><strong>Casting only works between char and other types and uses
system's sizes.</strong></li>
<li><strong>Byte order is always determined by the system.</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;mview&gt; = memoryview(&lt;bytes/bytearray/array&gt;)  # Immutable if bytes, else mutable.</span><br><span class="line">&lt;real&gt;  = &lt;mview&gt;[&lt;index&gt;]                     # Returns an int or a float.</span><br><span class="line">&lt;mview&gt; = &lt;mview&gt;[&lt;slice&gt;]                     # Mview with rearranged elements.</span><br><span class="line">&lt;mview&gt; = &lt;mview&gt;.cast(&#x27;&lt;typecode&gt;&#x27;)           # Casts memoryview to the new format.</span><br><span class="line">&lt;mview&gt;.release()                              # Releases the object&#x27;s memory buffer.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="decode-2"><a href="#decode-2"></a>Decode</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;bytes&gt; = bytes(&lt;mview&gt;)                       # Returns a new bytes object.</span><br><span class="line">&lt;bytes&gt; = &lt;bytes&gt;.join(&lt;coll_of_mviews&gt;)       # Joins mviews using bytes object as sep.</span><br><span class="line">&lt;array&gt; = array(&#x27;&lt;typecode&gt;&#x27;, &lt;mview&gt;)         # Treats mview as a sequence of numbers.</span><br><span class="line">&lt;file&gt;.write(&lt;mview&gt;)                          # Writes mview to the binary file.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;list&gt;  = list(&lt;mview&gt;)                        # Returns a list of ints or floats.</span><br><span class="line">&lt;str&gt;   = str(&lt;mview&gt;, &#x27;utf-8&#x27;)                # Treats mview as a bytes object.</span><br><span class="line">&lt;int&gt;   = int.from_bytes(&lt;mview&gt;, …)           # `byteorder=&#x27;little/big&#x27;, signed=False`.</span><br><span class="line">&#x27;&lt;hex&gt;&#x27; = &lt;mview&gt;.hex()                        # Treats mview as a bytes object.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="deque"><a href="#deque"></a>Deque</h2>
<p><strong>A thread-safe list with efficient appends and pops from
either side. Pronounced "deck".</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">from collections import deque</span><br><span class="line">&lt;deque&gt; = deque(&lt;collection&gt;, maxlen=None)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;deque&gt;.appendleft(&lt;el&gt;)                       # Opposite element is dropped if full.</span><br><span class="line">&lt;deque&gt;.extendleft(&lt;collection&gt;)               # Collection gets reversed.</span><br><span class="line">&lt;el&gt; = &lt;deque&gt;.popleft()                       # Raises IndexError if empty.</span><br><span class="line">&lt;deque&gt;.rotate(n=1)                            # Rotates elements to the right.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="threading"><a href="#threading"></a>Threading</h2>
<ul>
<li><strong>CPython interpreter can only run a single thread at a
time.</strong></li>
<li><strong>That is why using multiple threads won't result in a faster
execution, unless at least one of the threads contains an I/O
operation.</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">from threading import Thread, RLock, Semaphore, Event, Barrier</span><br><span class="line">from concurrent.futures import ThreadPoolExecutor</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="thread"><a href="#thread"></a>Thread</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;Thread&gt; = Thread(target=&lt;function&gt;)           # Use `args=&lt;collection&gt;` to set the arguments.</span><br><span class="line">&lt;Thread&gt;.start()                               # Starts the thread.</span><br><span class="line">&lt;bool&gt; = &lt;Thread&gt;.is_alive()                   # Checks if the thread has finished executing.</span><br><span class="line">&lt;Thread&gt;.join()                                # Waits for the thread to finish.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Use <code>'kwargs=&lt;dict&gt;'</code> to pass keyword
arguments to the function.</strong></li>
<li><strong>Use <code>'daemon=True'</code>, or the program will not be
able to exit while the thread is alive.</strong></li>
</ul>
<h3 id="lock"><a href="#lock"></a>Lock</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;lock&gt; = RLock()                               # Lock that can only be released by acquirer.</span><br><span class="line">&lt;lock&gt;.acquire()                               # Waits for the lock to be available.</span><br><span class="line">&lt;lock&gt;.release()                               # Makes the lock available again.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="or-1"><a href="#or-1"></a>Or:</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">with &lt;lock&gt;:                                   # Enters the block by calling acquire(),</span><br><span class="line">    ...                                        # and exits it with release().</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="semaphore-event-barrier"><a
href="#semaphore-event-barrier"></a>Semaphore, Event, Barrier</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;Semaphore&gt; = Semaphore(value=1)               # Lock that can be acquired by &#x27;value&#x27; threads.</span><br><span class="line">&lt;Event&gt;     = Event()                          # Method wait() blocks until set() is called.</span><br><span class="line">&lt;Barrier&gt;   = Barrier(n_times)                 # Wait() blocks until it&#x27;s called n_times.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="thread-pool-executor"><a href="#thread-pool-executor"></a>Thread
Pool Executor</h3>
<ul>
<li><strong>Object that manages thread execution.</strong></li>
<li><strong>An object with the same interface called ProcessPoolExecutor
provides true parallelism by running a separate interpreter in each
process. All arguments must be <a
href="#pickle">pickable</a>.</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;Exec&gt; = ThreadPoolExecutor(max_workers=None)  # Or: `with ThreadPoolExecutor() as &lt;name&gt;: …`</span><br><span class="line">&lt;Exec&gt;.shutdown(wait=True)                     # Blocks until all threads finish executing.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;iter&gt; = &lt;Exec&gt;.map(&lt;func&gt;, &lt;args_1&gt;, ...)     # A multithreaded and non-lazy map().</span><br><span class="line">&lt;Futr&gt; = &lt;Exec&gt;.submit(&lt;func&gt;, &lt;arg_1&gt;, ...)   # Starts a thread and returns its Future object.</span><br><span class="line">&lt;bool&gt; = &lt;Futr&gt;.done()                         # Checks if the thread has finished executing.</span><br><span class="line">&lt;obj&gt;  = &lt;Futr&gt;.result()                       # Waits for thread to finish and returns result.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="queue"><a href="#queue"></a>Queue</h3>
<p><strong>A thread-safe FIFO queue. For LIFO queue use
LifoQueue.</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">from queue import Queue</span><br><span class="line">&lt;Queue&gt; = Queue(maxsize=0)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;Queue&gt;.put(&lt;el&gt;)                              # Blocks until queue stops being full.</span><br><span class="line">&lt;Queue&gt;.put_nowait(&lt;el&gt;)                       # Raises queue.Full exception if full.</span><br><span class="line">&lt;el&gt; = &lt;Queue&gt;.get()                           # Blocks until queue stops being empty.</span><br><span class="line">&lt;el&gt; = &lt;Queue&gt;.get_nowait()                    # Raises queue.Empty exception if empty.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="operator"><a href="#operator"></a>Operator</h2>
<p><strong>Module of functions that provide the functionality of
operators.</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import operator as op</span><br><span class="line">&lt;el&gt;      = op.add/sub/mul/truediv/floordiv/mod(&lt;el&gt;, &lt;el&gt;)  # +, -, *, /, //, %</span><br><span class="line">&lt;int/set&gt; = op.and_/or_/xor(&lt;int/set&gt;, &lt;int/set&gt;)            # &amp;, |, ^</span><br><span class="line">&lt;bool&gt;    = op.eq/ne/lt/le/gt/ge(&lt;sortable&gt;, &lt;sortable&gt;)     # ==, !=, &lt;, &lt;=, &gt;, &gt;=</span><br><span class="line">&lt;func&gt;    = op.itemgetter/attrgetter/methodcaller(&lt;obj&gt;)     # [index/key], .name, .name()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">elementwise_sum  = map(op.add, list_a, list_b)</span><br><span class="line">sorted_by_second = sorted(&lt;collection&gt;, key=op.itemgetter(1))</span><br><span class="line">sorted_by_both   = sorted(&lt;collection&gt;, key=op.itemgetter(1, 0))</span><br><span class="line">product_of_elems = functools.reduce(op.mul, &lt;collection&gt;)</span><br><span class="line">union_of_sets    = functools.reduce(op.or_, &lt;coll_of_sets&gt;)</span><br><span class="line">first_element    = op.methodcaller(&#x27;pop&#x27;, 0)(&lt;list&gt;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Binary operators require objects to have and(), or(), xor()
and invert() special methods, unlike logical operators that work on all
types of objects.</strong></li>
<li><strong>Also:
<code>'&lt;bool&gt; = &lt;bool&gt; &amp;|^ &lt;bool&gt;'</code> and
<code>'&lt;int&gt; = &lt;bool&gt; &amp;|^ &lt;int&gt;'</code>.</strong></li>
</ul>
<h2 id="introspection"><a href="#introspection"></a>Introspection</h2>
<p><strong>Inspecting code at runtime.</strong></p>
<h3 id="variables"><a href="#variables"></a>Variables</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;list&gt; = dir()                             # Names of local variables (incl. functions).</span><br><span class="line">&lt;dict&gt; = vars()                            # Dict of local variables. Also locals().</span><br><span class="line">&lt;dict&gt; = globals()                         # Dict of global variables.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="attributes-1"><a href="#attributes-1"></a>Attributes</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;list&gt; = dir(&lt;object&gt;)                     # Names of object&#x27;s attributes (incl. methods).</span><br><span class="line">&lt;dict&gt; = vars(&lt;object&gt;)                    # Dict of writable attributes. Also &lt;obj&gt;.__dict__.</span><br><span class="line">&lt;bool&gt; = hasattr(&lt;object&gt;, &#x27;&lt;attr_name&gt;&#x27;)  # Checks if getattr() raises an AttributeError.</span><br><span class="line">value  = getattr(&lt;object&gt;, &#x27;&lt;attr_name&gt;&#x27;)  # Raises AttributeError if attribute is missing.</span><br><span class="line">setattr(&lt;object&gt;, &#x27;&lt;attr_name&gt;&#x27;, value)    # Only works on objects with &#x27;__dict__&#x27; attribute.</span><br><span class="line">delattr(&lt;object&gt;, &#x27;&lt;attr_name&gt;&#x27;)           # Same. Also `del &lt;object&gt;.&lt;attr_name&gt;`.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="parameters-1"><a href="#parameters-1"></a>Parameters</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;Sig&gt;  = inspect.signature(&lt;function&gt;)     # Function&#x27;s Signature object.</span><br><span class="line">&lt;dict&gt; = &lt;Sig&gt;.parameters                  # Dict of Parameter objects.</span><br><span class="line">&lt;memb&gt; = &lt;Param&gt;.kind                      # Member of ParameterKind enum.</span><br><span class="line">&lt;obj&gt;  = &lt;Param&gt;.default                   # Default value or &lt;Param&gt;.empty.</span><br><span class="line">&lt;type&gt; = &lt;Param&gt;.annotation                # Type or &lt;Param&gt;.empty.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="metaprogramming"><a
href="#metaprogramming"></a>Metaprogramming</h2>
<p><strong>Code that generates code.</strong></p>
<h3 id="type-1"><a href="#type-1"></a>Type</h3>
<p><strong>Type is the root class. If only passed an object it returns
its type (class). Otherwise it creates a new class.</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;class&gt; = type(&#x27;&lt;class_name&gt;&#x27;, &lt;tuple_of_parents&gt;, &lt;dict_of_class_attributes&gt;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; Z = type(&#x27;Z&#x27;, (), &#123;&#x27;a&#x27;: &#x27;abcde&#x27;, &#x27;b&#x27;: 12345&#125;)</span><br><span class="line">&gt;&gt;&gt; z = Z()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="meta-class"><a href="#meta-class"></a>Meta Class</h3>
<p><strong>A class that creates classes.</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">def my_meta_class(name, parents, attrs):</span><br><span class="line">    attrs[&#x27;a&#x27;] = &#x27;abcde&#x27;</span><br><span class="line">    return type(name, parents, attrs)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="or-2"><a href="#or-2"></a>Or:</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">class MyMetaClass(type):</span><br><span class="line">    def __new__(cls, name, parents, attrs):</span><br><span class="line">        attrs[&#x27;a&#x27;] = &#x27;abcde&#x27;</span><br><span class="line">        return type.__new__(cls, name, parents, attrs)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>New() is a class method that gets called before init(). If
it returns an instance of its class, then that instance gets passed to
init() as a 'self' argument.</strong></li>
<li><strong>It receives the same arguments as init(), except for the
first one that specifies the desired type of the returned instance
(MyMetaClass in our case).</strong></li>
<li><strong>Like in our case, new() can also be called directly, usually
from a new() method of a child class
(</strong><code>def __new__(cls): return super().__new__(cls)</code><strong>).</strong></li>
<li><strong>The only difference between the examples above is that
my_meta_class() returns a class of type type, while MyMetaClass()
returns a class of type MyMetaClass.</strong></li>
</ul>
<h3 id="metaclass-attribute"><a
href="#metaclass-attribute"></a>Metaclass Attribute</h3>
<p><strong>Right before a class is created it checks if it has the
'metaclass' attribute defined. If not, it recursively checks if any of
his parents has it defined and eventually comes to type().</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">class MyClass(metaclass=MyMetaClass):</span><br><span class="line">    b = 12345</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; MyClass.a, MyClass.b</span><br><span class="line">(&#x27;abcde&#x27;, 12345)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="type-diagram"><a href="#type-diagram"></a>Type Diagram</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">type(MyClass) == MyMetaClass         # MyClass is an instance of MyMetaClass.</span><br><span class="line">type(MyMetaClass) == type            # MyMetaClass is an instance of type.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">+-------------+-------------+</span><br><span class="line">|   Classes   | Metaclasses |</span><br><span class="line">+-------------+-------------|</span><br><span class="line">|   MyClass --&gt; MyMetaClass |</span><br><span class="line">|             |     v       |</span><br><span class="line">|    object -----&gt; type &lt;+  |</span><br><span class="line">|             |     ^ +--+  |</span><br><span class="line">|     str ----------+       |</span><br><span class="line">+-------------+-------------+</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="inheritance-diagram"><a
href="#inheritance-diagram"></a>Inheritance Diagram</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MyClass.__base__ == object           # MyClass is a subclass of object.</span><br><span class="line">MyMetaClass.__base__ == type         # MyMetaClass is a subclass of type.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">+-------------+-------------+</span><br><span class="line">|   Classes   | Metaclasses |</span><br><span class="line">+-------------+-------------|</span><br><span class="line">|   MyClass   | MyMetaClass |</span><br><span class="line">|      v      |     v       |</span><br><span class="line">|    object &lt;----- type     |</span><br><span class="line">|      ^      |             |</span><br><span class="line">|     str     |             |</span><br><span class="line">+-------------+-------------+</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="eval"><a href="#eval"></a>Eval</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; from ast import literal_eval</span><br><span class="line">&gt;&gt;&gt; literal_eval(&#x27;[1, 2, 3]&#x27;)</span><br><span class="line">[1, 2, 3]</span><br><span class="line">&gt;&gt;&gt; literal_eval(&#x27;1 + 2&#x27;)</span><br><span class="line">ValueError: malformed node or string</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="coroutines"><a href="#coroutines"></a>Coroutines</h2>
<ul>
<li><strong>Coroutines have a lot in common with threads, but unlike
threads, they only give up control when they call another coroutine and
they don’t use as much memory.</strong></li>
<li><strong>Coroutine definition starts with <code>'async'</code> and
its call with <code>'await'</code>.</strong></li>
<li><strong><code>'asyncio.run(&lt;coroutine&gt;)'</code> is the main
entry point for asynchronous programs.</strong></li>
<li><strong>Functions wait(), gather() and as_completed() start multiple
coroutines at the same time.</strong></li>
<li><strong>Asyncio module also provides its own <a
href="#queue">Queue</a>, <a href="#semaphore-event-barrier">Event</a>,
<a href="#lock">Lock</a> and <a
href="#semaphore-event-barrier">Semaphore</a> classes.</strong></li>
</ul>
<h4
id="runs-a-terminal-game-where-you-control-an-asterisk-that-must-avoid-numbers"><a
href="#runs-a-terminal-game-where-you-control-an-asterisk-that-must-avoid-numbers"></a>Runs
a terminal game where you control an asterisk that must avoid
numbers:</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">import asyncio, collections, curses, curses.textpad, enum, random</span><br><span class="line"></span><br><span class="line">P = collections.namedtuple(&#x27;P&#x27;, &#x27;x y&#x27;)         # Position</span><br><span class="line">D = enum.Enum(&#x27;D&#x27;, &#x27;n e s w&#x27;)                  # Direction</span><br><span class="line">W, H = 15, 7                                   # Width, Height</span><br><span class="line"></span><br><span class="line">def main(screen):</span><br><span class="line">    curses.curs_set(0)                         # Makes cursor invisible.</span><br><span class="line">    screen.nodelay(True)                       # Makes getch() non-blocking.</span><br><span class="line">    asyncio.run(main_coroutine(screen))        # Starts running asyncio code.</span><br><span class="line"></span><br><span class="line">async def main_coroutine(screen):</span><br><span class="line">    moves = asyncio.Queue()</span><br><span class="line">    state = &#123;&#x27;*&#x27;: P(0, 0), **&#123;id_: P(W//2, H//2) for id_ in range(10)&#125;&#125;</span><br><span class="line">    ai    = [random_controller(id_, moves) for id_ in range(10)]</span><br><span class="line">    mvc   = [human_controller(screen, moves), model(moves, state), view(state, screen)]</span><br><span class="line">    tasks = [asyncio.create_task(cor) for cor in ai + mvc]</span><br><span class="line">    await asyncio.wait(tasks, return_when=asyncio.FIRST_COMPLETED)</span><br><span class="line"></span><br><span class="line">async def random_controller(id_, moves):</span><br><span class="line">    while True:</span><br><span class="line">        d = random.choice(list(D))</span><br><span class="line">        moves.put_nowait((id_, d))</span><br><span class="line">        await asyncio.sleep(random.triangular(0.01, 0.65))</span><br><span class="line"></span><br><span class="line">async def human_controller(screen, moves):</span><br><span class="line">    while True:</span><br><span class="line">        ch = screen.getch()</span><br><span class="line">        key_mappings = &#123;258: D.s, 259: D.n, 260: D.w, 261: D.e&#125;</span><br><span class="line">        if ch in key_mappings:</span><br><span class="line">            moves.put_nowait((&#x27;*&#x27;, key_mappings[ch]))</span><br><span class="line">        await asyncio.sleep(0.005)</span><br><span class="line"></span><br><span class="line">async def model(moves, state):</span><br><span class="line">    while state[&#x27;*&#x27;] not in (state[id_] for id_ in range(10)):</span><br><span class="line">        id_, d = await moves.get()</span><br><span class="line">        x, y   = state[id_]</span><br><span class="line">        deltas = &#123;D.n: P(0, -1), D.e: P(1, 0), D.s: P(0, 1), D.w: P(-1, 0)&#125;</span><br><span class="line">        state[id_] = P((x + deltas[d].x) % W, (y + deltas[d].y) % H)</span><br><span class="line"></span><br><span class="line">async def view(state, screen):</span><br><span class="line">    offset = P(curses.COLS//2 - W//2, curses.LINES//2 - H//2)</span><br><span class="line">    while True:</span><br><span class="line">        screen.erase()</span><br><span class="line">        curses.textpad.rectangle(screen, offset.y-1, offset.x-1, offset.y+H, offset.x+W)</span><br><span class="line">        for id_, p in state.items():</span><br><span class="line">            screen.addstr(offset.y + (p.y - state[&#x27;*&#x27;].y + H//2) % H,</span><br><span class="line">                          offset.x + (p.x - state[&#x27;*&#x27;].x + W//2) % W, str(id_))</span><br><span class="line">        await asyncio.sleep(0.005)</span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    curses.wrapper(main)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="libraries"><a href="#libraries"></a>Libraries</h1>
<h2 id="progress-bar"><a href="#progress-bar"></a>Progress Bar</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># $ pip3 install tqdm</span><br><span class="line">&gt;&gt;&gt; from tqdm import tqdm</span><br><span class="line">&gt;&gt;&gt; from time import sleep</span><br><span class="line">&gt;&gt;&gt; for el in tqdm([1, 2, 3], desc=&#x27;Processing&#x27;):</span><br><span class="line">...     sleep(1)</span><br><span class="line">Processing: 100%|████████████████████| 3/3 [00:03&lt;00:00,  1.00s/it]</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="plot"><a href="#plot"></a>Plot</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># $ pip3 install matplotlib</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">plt.plot(&lt;x_data&gt;, &lt;y_data&gt; [, label=&lt;str&gt;])   # Or: plt.plot(&lt;y_data&gt;)</span><br><span class="line">plt.legend()                                   # Adds a legend.</span><br><span class="line">plt.savefig(&lt;path&gt;)                            # Saves the figure.</span><br><span class="line">plt.show()                                     # Displays the figure.</span><br><span class="line">plt.clf()                                      # Clears the figure.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="table"><a href="#table"></a>Table</h2>
<h4 id="prints-a-csv-file-as-an-ascii-table"><a
href="#prints-a-csv-file-as-an-ascii-table"></a>Prints a CSV file as an
ASCII table:</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># $ pip3 install tabulate</span><br><span class="line">import csv, tabulate</span><br><span class="line">with open(&#x27;test.csv&#x27;, encoding=&#x27;utf-8&#x27;, newline=&#x27;&#x27;) as file:</span><br><span class="line">    rows   = csv.reader(file)</span><br><span class="line">    header = next(rows)</span><br><span class="line">    table  = tabulate.tabulate(rows, header)</span><br><span class="line">print(table)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="curses"><a href="#curses"></a>Curses</h2>
<h4 id="runs-a-basic-file-explorer-in-the-terminal"><a
href="#runs-a-basic-file-explorer-in-the-terminal"></a>Runs a basic file
explorer in the terminal:</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">import curses, curses.ascii, os</span><br><span class="line">from curses import A_REVERSE, KEY_DOWN, KEY_UP, KEY_LEFT, KEY_RIGHT, KEY_ENTER</span><br><span class="line"></span><br><span class="line">def main(screen):</span><br><span class="line">    ch, first, selected, paths = 0, 0, 0, os.listdir()</span><br><span class="line">    while ch != curses.ascii.ESC:</span><br><span class="line">        height, _ = screen.getmaxyx()</span><br><span class="line">        screen.erase()</span><br><span class="line">        for y, filename in enumerate(paths[first : first+height]):</span><br><span class="line">            screen.addstr(y, 0, filename, A_REVERSE * (selected == first + y))</span><br><span class="line">        ch = screen.getch()</span><br><span class="line">        selected += (ch == KEY_DOWN) - (ch == KEY_UP)</span><br><span class="line">        selected = max(0, min(len(paths)-1, selected))</span><br><span class="line">        first += (first &lt;= selected - height) - (first &gt; selected)</span><br><span class="line">        if ch in [KEY_LEFT, KEY_RIGHT, KEY_ENTER, 10, 13]:</span><br><span class="line">            new_dir = &#x27;..&#x27; if ch == KEY_LEFT else paths[selected]</span><br><span class="line">            if os.path.isdir(new_dir):</span><br><span class="line">                os.chdir(new_dir)</span><br><span class="line">                first, selected, paths = 0, 0, os.listdir()</span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    curses.wrapper(main)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="logging"><a href="#logging"></a>Logging</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># $ pip3 install loguru</span><br><span class="line">from loguru import logger</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">logger.add(&#x27;debug_&#123;time&#125;.log&#x27;, colorize=True)  # Connects a log file.</span><br><span class="line">logger.add(&#x27;error_&#123;time&#125;.log&#x27;, level=&#x27;ERROR&#x27;)  # Another file for errors or higher.</span><br><span class="line">logger.&lt;level&gt;(&#x27;A logging message.&#x27;)           # Logs to file/s and prints to stderr.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Levels: <code>'debug'</code>, <code>'info'</code>,
<code>'success'</code>, <code>'warning'</code>, <code>'error'</code>,
<code>'critical'</code>.</strong></li>
</ul>
<h3 id="exceptions-2"><a href="#exceptions-2"></a>Exceptions</h3>
<p><strong>Exception description, stack trace and values of variables
are appended automatically.</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">try:</span><br><span class="line">    ...</span><br><span class="line">except &lt;exception&gt;:</span><br><span class="line">    logger.exception(&#x27;An error happened.&#x27;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="rotation"><a href="#rotation"></a>Rotation</h3>
<p><strong>Argument that sets a condition when a new log file is
created.</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rotation=&lt;int&gt;|&lt;datetime.timedelta&gt;|&lt;datetime.time&gt;|&lt;str&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><strong><code>'&lt;int&gt;'</code> - Max file size in
bytes.</strong></li>
<li><strong><code>'&lt;timedelta&gt;'</code> - Max age of a
file.</strong></li>
<li><strong><code>'&lt;time&gt;'</code> - Time of day.</strong></li>
<li><strong><code>'&lt;str&gt;'</code> - Any of above as a string:
<code>'100 MB'</code>, <code>'1 month'</code>,
<code>'monday at 12:00'</code>, ...</strong></li>
</ul>
<h3 id="retention"><a href="#retention"></a>Retention</h3>
<p><strong>Sets a condition which old log files get
deleted.</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">retention=&lt;int&gt;|&lt;datetime.timedelta&gt;|&lt;str&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><strong><code>'&lt;int&gt;'</code> - Max number of
files.</strong></li>
<li><strong><code>'&lt;timedelta&gt;'</code> - Max age of a
file.</strong></li>
<li><strong><code>'&lt;str&gt;'</code> - Max age as a string:
<code>'1 week, 3 days'</code>, <code>'2 months'</code>,
...</strong></li>
</ul>
<h2 id="scraping"><a href="#scraping"></a>Scraping</h2>
<h4
id="scrapes-pythons-url-version-number-and-logo-from-its-wikipedia-page"><a
href="#scrapes-pythons-url-version-number-and-logo-from-its-wikipedia-page"></a>Scrapes
Python's URL, version number and logo from its Wikipedia page:</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># $ pip3 install requests beautifulsoup4</span><br><span class="line">import requests, bs4, os, sys</span><br><span class="line"></span><br><span class="line">WIKI_URL = &#x27;https://en.wikipedia.org/wiki/Python_(programming_language)&#x27;</span><br><span class="line">try:</span><br><span class="line">    html       = requests.get(WIKI_URL).text</span><br><span class="line">    document   = bs4.BeautifulSoup(html, &#x27;html.parser&#x27;)</span><br><span class="line">    table      = document.find(&#x27;table&#x27;, class_=&#x27;infobox vevent&#x27;)</span><br><span class="line">    python_url = table.find(&#x27;th&#x27;, text=&#x27;Website&#x27;).next_sibling.a[&#x27;href&#x27;]</span><br><span class="line">    version    = table.find(&#x27;th&#x27;, text=&#x27;Stable release&#x27;).next_sibling.strings.__next__()</span><br><span class="line">    logo_url   = table.find(&#x27;img&#x27;)[&#x27;src&#x27;]</span><br><span class="line">    logo       = requests.get(f&#x27;https:&#123;logo_url&#125;&#x27;).content</span><br><span class="line">    filename   = os.path.basename(logo_url)</span><br><span class="line">    with open(filename, &#x27;wb&#x27;) as file:</span><br><span class="line">        file.write(logo)</span><br><span class="line">    print(f&#x27;&#123;python_url&#125;, &#123;version&#125;, file://&#123;os.path.abspath(filename)&#125;&#x27;)</span><br><span class="line">except requests.exceptions.ConnectionError:</span><br><span class="line">    print(&quot;You&#x27;ve got problems with connection.&quot;, file=sys.stderr)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="web"><a href="#web"></a>Web</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># $ pip3 install bottle</span><br><span class="line">from bottle import run, route, static_file, template, post, request, response</span><br><span class="line">import json</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="run"><a href="#run"></a>Run</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">run(host=&#x27;localhost&#x27;, port=8080)        # Runs locally.</span><br><span class="line">run(host=&#x27;0.0.0.0&#x27;, port=80)            # Runs globally.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="static-request"><a href="#static-request"></a>Static
Request</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@route(&#x27;/img/&lt;filename&gt;&#x27;)</span><br><span class="line">def send_file(filename):</span><br><span class="line">    return static_file(filename, root=&#x27;img_dir/&#x27;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="dynamic-request"><a href="#dynamic-request"></a>Dynamic
Request</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@route(&#x27;/&lt;sport&gt;&#x27;)</span><br><span class="line">def send_html(sport):</span><br><span class="line">    return template(&#x27;&lt;h1&gt;&#123;&#123;title&#125;&#125;&lt;/h1&gt;&#x27;, title=sport)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="rest-request"><a href="#rest-request"></a>REST Request</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@post(&#x27;/&lt;sport&gt;/odds&#x27;)</span><br><span class="line">def send_json(sport):</span><br><span class="line">    team = request.forms.get(&#x27;team&#x27;)</span><br><span class="line">    response.headers[&#x27;Content-Type&#x27;] = &#x27;application/json&#x27;</span><br><span class="line">    response.headers[&#x27;Cache-Control&#x27;] = &#x27;no-cache&#x27;</span><br><span class="line">    return json.dumps(&#123;&#x27;team&#x27;: team, &#x27;odds&#x27;: [2.09, 3.74, 3.68]&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="test"><a href="#test"></a>Test:</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># $ pip3 install requests</span><br><span class="line">&gt;&gt;&gt; import threading, requests</span><br><span class="line">&gt;&gt;&gt; threading.Thread(target=run, daemon=True).start()</span><br><span class="line">&gt;&gt;&gt; url = &#x27;http://localhost:8080/football/odds&#x27;</span><br><span class="line">&gt;&gt;&gt; request_data = &#123;&#x27;team&#x27;: &#x27;arsenal f.c.&#x27;&#125;</span><br><span class="line">&gt;&gt;&gt; response = requests.post(url, data=request_data)</span><br><span class="line">&gt;&gt;&gt; response.json()</span><br><span class="line">&#123;&#x27;team&#x27;: &#x27;arsenal f.c.&#x27;, &#x27;odds&#x27;: [2.09, 3.74, 3.68]&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="profiling"><a href="#profiling"></a>Profiling</h2>
<h3 id="stopwatch"><a href="#stopwatch"></a>Stopwatch</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">from time import perf_counter</span><br><span class="line">start_time = perf_counter()</span><br><span class="line">...</span><br><span class="line">duration_in_seconds = perf_counter() - start_time</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="timing-a-snippet"><a href="#timing-a-snippet"></a>Timing a
Snippet</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; from timeit import timeit</span><br><span class="line">&gt;&gt;&gt; timeit(&quot;&#x27;&#x27;.join(str(i) for i in range(100))&quot;,</span><br><span class="line">...        number=10000, globals=globals(), setup=&#x27;pass&#x27;)</span><br><span class="line">0.34986</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="profiling-by-line"><a href="#profiling-by-line"></a>Profiling by
Line</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># $ pip3 install line_profiler memory_profiler</span><br><span class="line">@profile</span><br><span class="line">def main():</span><br><span class="line">    a = [*range(10000)]</span><br><span class="line">    b = &#123;*range(10000)&#125;</span><br><span class="line">main()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ kernprof -lv test.py</span><br><span class="line">Line #   Hits     Time  Per Hit   % Time  Line Contents</span><br><span class="line">=======================================================</span><br><span class="line">     1                                    @profile</span><br><span class="line">     2                                    def main():</span><br><span class="line">     3      1    955.0    955.0     43.7      a = [*range(10000)]</span><br><span class="line">     4      1   1231.0   1231.0     56.3      b = &#123;*range(10000)&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ python3 -m memory_profiler test.py</span><br><span class="line">Line #         Mem usage      Increment   Line Contents</span><br><span class="line">=======================================================</span><br><span class="line">     1        37.668 MiB     37.668 MiB   @profile</span><br><span class="line">     2                                    def main():</span><br><span class="line">     3        38.012 MiB      0.344 MiB       a = [*range(10000)]</span><br><span class="line">     4        38.477 MiB      0.465 MiB       b = &#123;*range(10000)&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="call-graph"><a href="#call-graph"></a>Call Graph</h3>
<h4
id="generates-a-png-image-of-the-call-graph-with-highlighted-bottlenecks"><a
href="#generates-a-png-image-of-the-call-graph-with-highlighted-bottlenecks"></a>Generates
a PNG image of the call graph with highlighted bottlenecks:</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># $ pip3 install pycallgraph2; apt/brew install graphviz</span><br><span class="line">import pycallgraph2 as cg, datetime</span><br><span class="line"></span><br><span class="line">filename = f&#x27;profile-&#123;datetime.datetime.now():%Y%m%d_%H%M%S&#125;.png&#x27;</span><br><span class="line">drawer = cg.output.GraphvizOutput(output_file=filename)</span><br><span class="line">with cg.PyCallGraph(drawer):</span><br><span class="line">    &lt;code_to_be_profiled&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="numpy"><a href="#numpy"></a>NumPy</h2>
<p><strong>Array manipulation mini-language. It can run up to one
hundred times faster than the equivalent Python code. An even faster
alternative that runs on a GPU is called CuPy.</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># $ pip3 install numpy</span><br><span class="line">import numpy as np</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;array&gt; = np.array(&lt;list/list_of_lists&gt;)                # Returns 1d/2d NumPy array.</span><br><span class="line">&lt;array&gt; = np.zeros/ones(&lt;shape&gt;)                        # Also np.full(&lt;shape&gt;, &lt;el&gt;).</span><br><span class="line">&lt;array&gt; = np.arange(from_inc, to_exc, ±step)            # Also np.linspace(start, stop, num).</span><br><span class="line">&lt;array&gt; = np.random.randint(from_inc, to_exc, &lt;shape&gt;)  # Also np.random.random(&lt;shape&gt;).</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;view&gt;  = &lt;array&gt;.reshape(&lt;shape&gt;)                      # Also `&lt;array&gt;.shape = &lt;shape&gt;`.</span><br><span class="line">&lt;array&gt; = &lt;array&gt;.flatten()                             # Collapses array into one dimension.</span><br><span class="line">&lt;view&gt;  = &lt;array&gt;.squeeze()                             # Removes dimensions of length one.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;array&gt; = &lt;array&gt;.sum/min/mean/var/std(axis)            # Passed dimension gets aggregated.</span><br><span class="line">&lt;array&gt; = &lt;array&gt;.argmin(axis)                          # Returns indexes of smallest elements.</span><br><span class="line">&lt;array&gt; = np.apply_along_axis(&lt;func&gt;, axis, &lt;array&gt;)    # Func can return a scalar or array.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Shape is a tuple of dimension sizes. A 100x50 RGB image has
shape (50, 100, 3).</strong></li>
<li><strong>Axis is an index of the dimension that gets aggregated.
Leftmost dimension has index 0. Summing the RGB image along axis 2 will
return a greyscale image with shape (50, 100).</strong></li>
<li><strong>Passing a tuple of axes will chain the operations like this:
<code>'&lt;array&gt;.&lt;method&gt;(axis_1, keepdims=True).&lt;method&gt;(axis_2).squeeze()'</code>.</strong></li>
</ul>
<h3 id="indexing"><a href="#indexing"></a>Indexing</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;el&gt;       = &lt;2d_array&gt;[row_index, column_index]        # &lt;3d_a&gt;[table_i, row_i, column_i]</span><br><span class="line">&lt;1d_view&gt;  = &lt;2d_array&gt;[row_index]                      # &lt;3d_a&gt;[table_i, row_i]</span><br><span class="line">&lt;1d_view&gt;  = &lt;2d_array&gt;[:, column_index]                # &lt;3d_a&gt;[table_i, :, column_i]</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;1d_array&gt; = &lt;2d_array&gt;[row_indexes, column_indexes]    # &lt;3d_a&gt;[table_is, row_is, column_is]</span><br><span class="line">&lt;2d_array&gt; = &lt;2d_array&gt;[row_indexes]                    # &lt;3d_a&gt;[table_is, row_is]</span><br><span class="line">&lt;2d_array&gt; = &lt;2d_array&gt;[:, column_indexes]              # &lt;3d_a&gt;[table_is, :, column_is]</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;2d_bools&gt; = &lt;2d_array&gt; &gt;&lt;== &lt;el&gt;                       # &lt;3d_array&gt; &gt;&lt;== &lt;1d_array&gt;</span><br><span class="line">&lt;1d_array&gt; = &lt;2d_array&gt;[&lt;2d_bools&gt;]                     # &lt;3d_array&gt;[&lt;2d_bools&gt;]</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>All examples also allow assignments.</strong></li>
</ul>
<h3 id="broadcasting"><a href="#broadcasting"></a>Broadcasting</h3>
<p><strong>Broadcasting is a set of rules by which NumPy functions
operate on arrays of different sizes and/or dimensions.</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">left  = [[0.1], [0.6], [0.8]]                           # Shape: (3, 1)</span><br><span class="line">right = [ 0.1 ,  0.6 ,  0.8 ]                           # Shape: (3,)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4
id="if-array-shapes-differ-in-length-left-pad-the-shorter-shape-with-ones"><a
href="#1-if-array-shapes-differ-in-length-left-pad-the-shorter-shape-with-ones"></a>1.
If array shapes differ in length, left-pad the shorter shape with
ones:</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">left  = [[0.1], [0.6], [0.8]]                           # Shape: (3, 1)</span><br><span class="line">right = [[0.1 ,  0.6 ,  0.8]]                           # Shape: (1, 3) &lt;- !</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4
id="if-any-dimensions-differ-in-size-expand-the-ones-that-have-size-1-by-duplicating-their-elements"><a
href="#2-if-any-dimensions-differ-in-size-expand-the-ones-that-have-size-1-by-duplicating-their-elements"></a>2.
If any dimensions differ in size, expand the ones that have size 1 by
duplicating their elements:</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">left  = [[0.1,  0.1,  0.1],                             # Shape: (3, 3) &lt;- !</span><br><span class="line">         [0.6,  0.6,  0.6],</span><br><span class="line">         [0.8,  0.8,  0.8]]</span><br><span class="line"></span><br><span class="line">right = [[0.1,  0.6,  0.8],                             # Shape: (3, 3) &lt;- !</span><br><span class="line">         [0.1,  0.6,  0.8],</span><br><span class="line">         [0.1,  0.6,  0.8]]</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="if-neither-non-matching-dimension-has-size-1-raise-an-error."><a
href="#3-if-neither-non-matching-dimension-has-size-1-raise-an-error"></a>3.
If neither non-matching dimension has size 1, raise an error.</h4>
<h3 id="example-1"><a href="#example-1"></a>Example</h3>
<h4
id="for-each-point-returns-index-of-its-nearest-point-0.1-0.6-0.8-1-2-1"><a
href="#for-each-point-returns-index-of-its-nearest-point-01-06-08--1-2-1"></a>For
each point returns index of its nearest point
(<code>[0.1, 0.6, 0.8] =&gt; [1, 2, 1]</code>):</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; points = np.array([0.1, 0.6, 0.8])</span><br><span class="line"> [ 0.1,  0.6,  0.8]</span><br><span class="line">&gt;&gt;&gt; wrapped_points = points.reshape(3, 1)</span><br><span class="line">[[ 0.1],</span><br><span class="line"> [ 0.6],</span><br><span class="line"> [ 0.8]]</span><br><span class="line">&gt;&gt;&gt; distances = wrapped_points - points</span><br><span class="line">[[ 0. , -0.5, -0.7],</span><br><span class="line"> [ 0.5,  0. , -0.2],</span><br><span class="line"> [ 0.7,  0.2,  0. ]]</span><br><span class="line">&gt;&gt;&gt; distances = np.abs(distances)</span><br><span class="line">[[ 0. ,  0.5,  0.7],</span><br><span class="line"> [ 0.5,  0. ,  0.2],</span><br><span class="line"> [ 0.7,  0.2,  0. ]]</span><br><span class="line">&gt;&gt;&gt; i = np.arange(3)</span><br><span class="line">[0, 1, 2]</span><br><span class="line">&gt;&gt;&gt; distances[i, i] = np.inf</span><br><span class="line">[[ inf,  0.5,  0.7],</span><br><span class="line"> [ 0.5,  inf,  0.2],</span><br><span class="line"> [ 0.7,  0.2,  inf]]</span><br><span class="line">&gt;&gt;&gt; distances.argmin(1)</span><br><span class="line">[1, 2, 1]</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="image"><a href="#image"></a>Image</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># $ pip3 install pillow</span><br><span class="line">from PIL import Image</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;Image&gt; = Image.new(&#x27;&lt;mode&gt;&#x27;, (width, height))   # Also: `color=&lt;int/tuple/str&gt;`.</span><br><span class="line">&lt;Image&gt; = Image.open(&lt;path&gt;)                     # Identifies format based on file contents.</span><br><span class="line">&lt;Image&gt; = &lt;Image&gt;.convert(&#x27;&lt;mode&gt;&#x27;)              # Converts image to the new mode.</span><br><span class="line">&lt;Image&gt;.save(&lt;path&gt;)                             # Selects format based on the path extension.</span><br><span class="line">&lt;Image&gt;.show()                                   # Opens image in default preview app.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;int/tuple&gt; = &lt;Image&gt;.getpixel((x, y))           # Returns a pixel.</span><br><span class="line">&lt;Image&gt;.putpixel((x, y), &lt;int/tuple&gt;)            # Writes a pixel to the image.</span><br><span class="line">&lt;ImagingCore&gt; = &lt;Image&gt;.getdata()                # Returns a flattened sequence of pixels.</span><br><span class="line">&lt;Image&gt;.putdata(&lt;list/ImagingCore&gt;)              # Writes a flattened sequence of pixels.</span><br><span class="line">&lt;Image&gt;.paste(&lt;Image&gt;, (x, y))                   # Writes passed image to the image.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;2d_array&gt; = np.array(&lt;Image_L&gt;)                 # Creates NumPy array from greyscale image.</span><br><span class="line">&lt;3d_array&gt; = np.array(&lt;Image_RGB/A&gt;)             # Creates NumPy array from color image.</span><br><span class="line">&lt;Image&gt;    = Image.fromarray(np.uint8(&lt;array&gt;))  # Use &lt;array&gt;.clip(0, 255) to clip the values.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="modes-1"><a href="#modes-1"></a>Modes</h3>
<ul>
<li><strong><code>'1'</code> - 1-bit pixels, black and white, stored
with one pixel per byte.</strong></li>
<li><strong><code>'L'</code> - 8-bit pixels, greyscale.</strong></li>
<li><strong><code>'RGB'</code> - 3x8-bit pixels, true
color.</strong></li>
<li><strong><code>'RGBA'</code> - 4x8-bit pixels, true color with
transparency mask.</strong></li>
<li><strong><code>'HSV'</code> - 3x8-bit pixels, Hue, Saturation, Value
color space.</strong></li>
</ul>
<h3 id="examples"><a href="#examples"></a>Examples</h3>
<h4 id="creates-a-png-image-of-a-rainbow-gradient"><a
href="#creates-a-png-image-of-a-rainbow-gradient"></a>Creates a PNG
image of a rainbow gradient:</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">WIDTH, HEIGHT = 100, 100</span><br><span class="line">n_pixels = WIDTH * HEIGHT</span><br><span class="line">hues = (255 * i/n_pixels for i in range(n_pixels))</span><br><span class="line">img = Image.new(&#x27;HSV&#x27;, (WIDTH, HEIGHT))</span><br><span class="line">img.putdata([(int(h), 255, 255) for h in hues])</span><br><span class="line">img.convert(&#x27;RGB&#x27;).save(&#x27;test.png&#x27;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="adds-noise-to-a-png-image"><a
href="#adds-noise-to-a-png-image"></a>Adds noise to a PNG image:</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">from random import randint</span><br><span class="line">add_noise = lambda value: max(0, min(255, value + randint(-20, 20)))</span><br><span class="line">img = Image.open(&#x27;test.png&#x27;).convert(&#x27;HSV&#x27;)</span><br><span class="line">img.putdata([(add_noise(h), s, v) for h, s, v in img.getdata()])</span><br><span class="line">img.convert(&#x27;RGB&#x27;).save(&#x27;test.png&#x27;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="image-draw"><a href="#image-draw"></a>Image Draw</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">from PIL import ImageDraw</span><br><span class="line">&lt;ImageDraw&gt; = ImageDraw.Draw(&lt;Image&gt;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;ImageDraw&gt;.point((x, y))                        # Truncates floats into ints.</span><br><span class="line">&lt;ImageDraw&gt;.line((x1, y1, x2, y2 [, ...]))       # To get anti-aliasing use Image&#x27;s resize().</span><br><span class="line">&lt;ImageDraw&gt;.arc((x1, y1, x2, y2), deg1, deg2)    # Always draws in clockwise direction.</span><br><span class="line">&lt;ImageDraw&gt;.rectangle((x1, y1, x2, y2))          # To rotate use Image&#x27;s rotate() and paste().</span><br><span class="line">&lt;ImageDraw&gt;.polygon((x1, y1, x2, y2, ...))       # Last point gets connected to the first.</span><br><span class="line">&lt;ImageDraw&gt;.ellipse((x1, y1, x2, y2))            # To rotate use Image&#x27;s rotate() and paste().</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Use <code>'fill=&lt;color&gt;'</code> to set the primary
color.</strong></li>
<li><strong>Use <code>'width=&lt;int&gt;'</code> to set the width of
lines or contours.</strong></li>
<li><strong>Use <code>'outline=&lt;color&gt;'</code> to set the color of
the contours.</strong></li>
<li><strong>Color can be an int, tuple, <code>'#rrggbb[aa]'</code>
string or a color name.</strong></li>
</ul>
<h2 id="animation"><a href="#animation"></a>Animation</h2>
<h4 id="creates-a-gif-of-a-bouncing-ball"><a
href="#creates-a-gif-of-a-bouncing-ball"></a>Creates a GIF of a bouncing
ball:</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># $ pip3 install imageio</span><br><span class="line">from PIL import Image, ImageDraw</span><br><span class="line">import imageio</span><br><span class="line"></span><br><span class="line">WIDTH, HEIGHT, R = 126, 126, 10</span><br><span class="line">frames = []</span><br><span class="line">for velocity in range(1, 16):</span><br><span class="line">    y = sum(range(velocity))</span><br><span class="line">    frame = Image.new(&#x27;L&#x27;, (WIDTH, HEIGHT))</span><br><span class="line">    draw  = ImageDraw.Draw(frame)</span><br><span class="line">    draw.ellipse((WIDTH/2-R, y, WIDTH/2+R, y+R*2), fill=&#x27;white&#x27;)</span><br><span class="line">    frames.append(frame)</span><br><span class="line">frames += reversed(frames[1:-1])</span><br><span class="line">imageio.mimsave(&#x27;test.gif&#x27;, frames, duration=0.03)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="audio"><a href="#audio"></a>Audio</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import wave</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;Wave_read&gt;  = wave.open(&#x27;&lt;path&gt;&#x27;, &#x27;rb&#x27;)        # Opens the WAV file.</span><br><span class="line">framerate    = &lt;Wave_read&gt;.getframerate()       # Number of frames per second.</span><br><span class="line">nchannels    = &lt;Wave_read&gt;.getnchannels()       # Number of samples per frame.</span><br><span class="line">sampwidth    = &lt;Wave_read&gt;.getsampwidth()       # Sample size in bytes.</span><br><span class="line">nframes      = &lt;Wave_read&gt;.getnframes()         # Number of frames.</span><br><span class="line">&lt;params&gt;     = &lt;Wave_read&gt;.getparams()          # Immutable collection of above.</span><br><span class="line">&lt;bytes&gt;      = &lt;Wave_read&gt;.readframes(nframes)  # Returns next &#x27;nframes&#x27; frames.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;Wave_write&gt; = wave.open(&#x27;&lt;path&gt;&#x27;, &#x27;wb&#x27;)        # Truncates existing file.</span><br><span class="line">&lt;Wave_write&gt;.setframerate(&lt;int&gt;)                # 44100 for CD, 48000 for video.</span><br><span class="line">&lt;Wave_write&gt;.setnchannels(&lt;int&gt;)                # 1 for mono, 2 for stereo.</span><br><span class="line">&lt;Wave_write&gt;.setsampwidth(&lt;int&gt;)                # 2 for CD quality sound.</span><br><span class="line">&lt;Wave_write&gt;.setparams(&lt;params&gt;)                # Sets all parameters.</span><br><span class="line">&lt;Wave_write&gt;.writeframes(&lt;bytes&gt;)               # Appends frames to the file.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Bytes object contains a sequence of frames, each consisting
of one or more samples.</strong></li>
<li><strong>In a stereo signal, the first sample of a frame belongs to
the left channel.</strong></li>
<li><strong>Each sample consists of one or more bytes that, when
converted to an integer, indicate the displacement of a speaker membrane
at a given moment.</strong></li>
<li><strong>If sample width is one byte, then the integer should be
encoded unsigned.</strong></li>
<li><strong>For all other sizes, the integer should be encoded signed
with little-endian byte order.</strong></li>
</ul>
<h3 id="sample-values"><a href="#sample-values"></a>Sample Values</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">+-----------+-----------+------+-----------+</span><br><span class="line">| sampwidth |    min    | zero |    max    |</span><br><span class="line">+-----------+-----------+------+-----------+</span><br><span class="line">|     1     |         0 |  128 |       255 |</span><br><span class="line">|     2     |    -32768 |    0 |     32767 |</span><br><span class="line">|     3     |  -8388608 |    0 |   8388607 |</span><br><span class="line">+-----------+-----------+------+-----------+</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="read-float-samples-from-wav-file"><a
href="#read-float-samples-from-wav-file"></a>Read Float Samples from WAV
File</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">def read_wav_file(filename):</span><br><span class="line">    def get_int(bytes_obj):</span><br><span class="line">        an_int = int.from_bytes(bytes_obj, &#x27;little&#x27;, signed=(sampwidth != 1))</span><br><span class="line">        return an_int - 128 * (sampwidth == 1)</span><br><span class="line">    with wave.open(filename, &#x27;rb&#x27;) as file:</span><br><span class="line">        sampwidth = file.getsampwidth()</span><br><span class="line">        frames = file.readframes(-1)</span><br><span class="line">    bytes_samples = (frames[i : i+sampwidth] for i in range(0, len(frames), sampwidth))</span><br><span class="line">    return [get_int(b) / pow(2, sampwidth * 8 - 1) for b in bytes_samples]</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="write-float-samples-to-wav-file"><a
href="#write-float-samples-to-wav-file"></a>Write Float Samples to WAV
File</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">def write_to_wav_file(filename, float_samples, nchannels=1, sampwidth=2, framerate=44100):</span><br><span class="line">    def get_bytes(a_float):</span><br><span class="line">        a_float = max(-1, min(1 - 2e-16, a_float))</span><br><span class="line">        a_float += sampwidth == 1</span><br><span class="line">        a_float *= pow(2, sampwidth * 8 - 1)</span><br><span class="line">        return int(a_float).to_bytes(sampwidth, &#x27;little&#x27;, signed=(sampwidth != 1))</span><br><span class="line">    with wave.open(filename, &#x27;wb&#x27;) as file:</span><br><span class="line">        file.setnchannels(nchannels)</span><br><span class="line">        file.setsampwidth(sampwidth)</span><br><span class="line">        file.setframerate(framerate)</span><br><span class="line">        file.writeframes(b&#x27;&#x27;.join(get_bytes(f) for f in float_samples))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="examples-1"><a href="#examples-1"></a>Examples</h3>
<h4 id="saves-a-440-hz-sine-wave-to-a-mono-wav-file"><a
href="#saves-a-440-hz-sine-wave-to-a-mono-wav-file"></a>Saves a 440 Hz
sine wave to a mono WAV file:</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">from math import pi, sin</span><br><span class="line">samples_f = (sin(i * 2 * pi * 440 / 44100) for i in range(100000))</span><br><span class="line">write_to_wav_file(&#x27;test.wav&#x27;, samples_f)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="adds-noise-to-a-mono-wav-file"><a
href="#adds-noise-to-a-mono-wav-file"></a>Adds noise to a mono WAV
file:</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">from random import random</span><br><span class="line">add_noise = lambda value: value + (random() - 0.5) * 0.03</span><br><span class="line">samples_f = (add_noise(f) for f in read_wav_file(&#x27;test.wav&#x27;))</span><br><span class="line">write_to_wav_file(&#x27;test.wav&#x27;, samples_f)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="plays-a-wav-file"><a href="#plays-a-wav-file"></a>Plays a WAV
file:</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># $ pip3 install simpleaudio</span><br><span class="line">from simpleaudio import play_buffer</span><br><span class="line">with wave.open(&#x27;test.wav&#x27;, &#x27;rb&#x27;) as file:</span><br><span class="line">    p = file.getparams()</span><br><span class="line">    frames = file.readframes(-1)</span><br><span class="line">    play_buffer(frames, p.nchannels, p.sampwidth, p.framerate)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="text-to-speech"><a href="#text-to-speech"></a>Text to
Speech</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># $ pip3 install pyttsx3</span><br><span class="line">import pyttsx3</span><br><span class="line">engine = pyttsx3.init()</span><br><span class="line">engine.say(&#x27;Sally sells seashells by the seashore.&#x27;)</span><br><span class="line">engine.runAndWait()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="synthesizer"><a href="#synthesizer"></a>Synthesizer</h2>
<h4 id="plays-popcorn-by-gershon-kingsley"><a
href="#plays-popcorn-by-gershon-kingsley"></a>Plays Popcorn by Gershon
Kingsley:</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># $ pip3 install simpleaudio</span><br><span class="line">import itertools as it, math, struct, simpleaudio</span><br><span class="line"></span><br><span class="line">F  = 44100</span><br><span class="line">P1 = &#x27;71♩,69♪,,71♩,66♪,,62♩,66♪,,59♩,,&#x27;</span><br><span class="line">P2 = &#x27;71♩,73♪,,74♩,73♪,,74♪,,71♪,,73♩,71♪,,73♪,,69♪,,71♩,69♪,,71♪,,67♪,,71♩,,&#x27;</span><br><span class="line">get_pause   = lambda seconds: it.repeat(0, int(seconds * F))</span><br><span class="line">sin_f       = lambda i, hz: math.sin(i * 2 * math.pi * hz / F)</span><br><span class="line">get_wave    = lambda hz, seconds: (sin_f(i, hz) for i in range(int(seconds * F)))</span><br><span class="line">get_hz      = lambda key: 8.176 * 2 ** (int(key) / 12)</span><br><span class="line">parse_note  = lambda note: (get_hz(note[:2]), 1/4 if &#x27;♩&#x27; in note else 1/8)</span><br><span class="line">get_samples = lambda note: get_wave(*parse_note(note)) if note else get_pause(1/8)</span><br><span class="line">samples_f   = it.chain.from_iterable(get_samples(n) for n in f&#x27;&#123;P1&#125;,&#123;P1&#125;,&#123;P2&#125;&#x27;.split(&#x27;,&#x27;))</span><br><span class="line">samples_b   = b&#x27;&#x27;.join(struct.pack(&#x27;&lt;h&#x27;, int(f * 30000)) for f in samples_f)</span><br><span class="line">simpleaudio.play_buffer(samples_b, 1, 2, F)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="pygame"><a href="#pygame"></a>Pygame</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># $ pip3 install pygame</span><br><span class="line">import pygame as pg</span><br><span class="line"></span><br><span class="line">pg.init()</span><br><span class="line">screen = pg.display.set_mode((500, 500))</span><br><span class="line">rect = pg.Rect(240, 240, 20, 20)</span><br><span class="line">while all(event.type != pg.QUIT for event in pg.event.get()):</span><br><span class="line">    deltas = &#123;pg.K_UP: (0, -1), pg.K_RIGHT: (1, 0), pg.K_DOWN: (0, 1), pg.K_LEFT: (-1, 0)&#125;</span><br><span class="line">    for ch, is_pressed in enumerate(pg.key.get_pressed()):</span><br><span class="line">        rect = rect.move(deltas[ch]) if ch in deltas and is_pressed else rect</span><br><span class="line">    screen.fill((0, 0, 0))</span><br><span class="line">    pg.draw.rect(screen, (255, 255, 255), rect)</span><br><span class="line">    pg.display.flip()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="rectangle"><a href="#rectangle"></a>Rectangle</h3>
<p><strong>Object for storing rectangular coordinates.</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;Rect&gt; = pg.Rect(x, y, width, height)           # Floats get truncated into ints.</span><br><span class="line">&lt;int&gt;  = &lt;Rect&gt;.x/y/centerx/centery/…           # Top, right, bottom, left. Allows assignments.</span><br><span class="line">&lt;tup.&gt; = &lt;Rect&gt;.topleft/center/…                # Topright, bottomright, bottomleft. Same.</span><br><span class="line">&lt;Rect&gt; = &lt;Rect&gt;.move((x, y))                    # Use move_ip() to move in-place.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;bool&gt; = &lt;Rect&gt;.collidepoint((x, y))            # Checks if rectangle contains a point.</span><br><span class="line">&lt;bool&gt; = &lt;Rect&gt;.colliderect(&lt;Rect&gt;)             # Checks if two rectangles overlap.</span><br><span class="line">&lt;int&gt;  = &lt;Rect&gt;.collidelist(&lt;list_of_Rect&gt;)     # Returns index of first colliding Rect or -1.</span><br><span class="line">&lt;list&gt; = &lt;Rect&gt;.collidelistall(&lt;list_of_Rect&gt;)  # Returns indexes of all colliding rectangles.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="surface"><a href="#surface"></a>Surface</h3>
<p><strong>Object for representing images.</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;Surf&gt; = pg.display.set_mode((width, height))   # Returns a display surface.</span><br><span class="line">&lt;Surf&gt; = pg.Surface((width, height))            # New RGB surface. RGBA if `flags=pg.SRCALPHA`.</span><br><span class="line">&lt;Surf&gt; = pg.image.load(&#x27;&lt;path&gt;&#x27;)                # Loads the image. Format depends on source.</span><br><span class="line">&lt;Surf&gt; = &lt;Surf&gt;.subsurface(&lt;Rect&gt;)              # Returns a subsurface.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;Surf&gt;.fill(color)                              # Tuple, Color(&#x27;#rrggbb[aa]&#x27;) or Color(&lt;name&gt;).</span><br><span class="line">&lt;Surf&gt;.set_at((x, y), color)                    # Updates pixel.</span><br><span class="line">&lt;Surf&gt;.blit(&lt;Surf&gt;, (x, y))                     # Draws passed surface to the surface.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">from pygame.transform import scale, ...</span><br><span class="line">&lt;Surf&gt; = scale(&lt;Surf&gt;, (width, height))         # Returns scaled surface.</span><br><span class="line">&lt;Surf&gt; = rotate(&lt;Surf&gt;, anticlock_degrees)      # Returns rotated and scaled surface.</span><br><span class="line">&lt;Surf&gt; = flip(&lt;Surf&gt;, x_bool, y_bool)           # Returns flipped surface.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">from pygame.draw import line, ...</span><br><span class="line">line(&lt;Surf&gt;, color, (x1, y1), (x2, y2), width)  # Draws a line to the surface.</span><br><span class="line">arc(&lt;Surf&gt;, color, &lt;Rect&gt;, from_rad, to_rad)    # Also: ellipse(&lt;Surf&gt;, color, &lt;Rect&gt;, width=0)</span><br><span class="line">rect(&lt;Surf&gt;, color, &lt;Rect&gt;, width=0)            # Also: polygon(&lt;Surf&gt;, color, points, width=0)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="font"><a href="#font"></a>Font</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;Font&gt; = pg.font.SysFont(&#x27;&lt;name&gt;&#x27;, size)        # Loads the system font or default if missing.</span><br><span class="line">&lt;Font&gt; = pg.font.Font(&#x27;&lt;path&gt;&#x27;, size)           # Loads the TTF file. Pass None for default.</span><br><span class="line">&lt;Surf&gt; = &lt;Font&gt;.render(text, antialias, color)  # Background color can be specified at the end.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="sound"><a href="#sound"></a>Sound</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;Sound&gt; = pg.mixer.Sound(&#x27;&lt;path&gt;&#x27;)              # Loads the WAV file.</span><br><span class="line">&lt;Sound&gt;.play()                                  # Starts playing the sound.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="basic-mario-brothers-example"><a
href="#basic-mario-brothers-example"></a>Basic Mario Brothers
Example</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">import collections, dataclasses, enum, io, itertools as it, pygame as pg, urllib.request</span><br><span class="line">from random import randint</span><br><span class="line"></span><br><span class="line">P = collections.namedtuple(&#x27;P&#x27;, &#x27;x y&#x27;)          # Position</span><br><span class="line">D = enum.Enum(&#x27;D&#x27;, &#x27;n e s w&#x27;)                   # Direction</span><br><span class="line">W, H, MAX_S = 50, 50, P(5, 10)                  # Width, Height, Max speed</span><br><span class="line"></span><br><span class="line">def main():</span><br><span class="line">    def get_screen():</span><br><span class="line">        pg.init()</span><br><span class="line">        return pg.display.set_mode((W*16, H*16))</span><br><span class="line">    def get_images():</span><br><span class="line">        url = &#x27;https://gto76.github.io/python-cheatsheet/web/mario_bros.png&#x27;</span><br><span class="line">        img = pg.image.load(io.BytesIO(urllib.request.urlopen(url).read()))</span><br><span class="line">        return [img.subsurface(get_rect(x, 0)) for x in range(img.get_width() // 16)]</span><br><span class="line">    def get_mario():</span><br><span class="line">        Mario = dataclasses.make_dataclass(&#x27;Mario&#x27;, &#x27;rect spd facing_left frame_cycle&#x27;.split())</span><br><span class="line">        return Mario(get_rect(1, 1), P(0, 0), False, it.cycle(range(3)))</span><br><span class="line">    def get_tiles():</span><br><span class="line">        border = [(x, y) for x in range(W) for y in range(H) if x in [0, W-1] or y in [0, H-1]]</span><br><span class="line">        platforms = [(randint(1, W-2), randint(2, H-2)) for _ in range(W*H // 10)]</span><br><span class="line">        return [get_rect(x, y) for x, y in border + platforms]</span><br><span class="line">    def get_rect(x, y):</span><br><span class="line">        return pg.Rect(x*16, y*16, 16, 16)</span><br><span class="line">    run(get_screen(), get_images(), get_mario(), get_tiles())</span><br><span class="line"></span><br><span class="line">def run(screen, images, mario, tiles):</span><br><span class="line">    clock = pg.time.Clock()</span><br><span class="line">    while all(event.type != pg.QUIT for event in pg.event.get()):</span><br><span class="line">        keys = &#123;pg.K_UP: D.n, pg.K_RIGHT: D.e, pg.K_DOWN: D.s, pg.K_LEFT: D.w&#125;</span><br><span class="line">        pressed = &#123;keys.get(ch) for ch, is_prsd in enumerate(pg.key.get_pressed()) if is_prsd&#125;</span><br><span class="line">        update_speed(mario, tiles, pressed)</span><br><span class="line">        update_position(mario, tiles)</span><br><span class="line">        draw(screen, images, mario, tiles, pressed)</span><br><span class="line">        clock.tick(28)</span><br><span class="line"></span><br><span class="line">def update_speed(mario, tiles, pressed):</span><br><span class="line">    x, y = mario.spd</span><br><span class="line">    x += 2 * ((D.e in pressed) - (D.w in pressed))</span><br><span class="line">    x -= (x &gt; 0) - (x &lt; 0)</span><br><span class="line">    y += 1 if D.s not in get_boundaries(mario.rect, tiles) else (D.n in pressed) * -10</span><br><span class="line">    mario.spd = P(x=max(-MAX_S.x, min(MAX_S.x, x)), y=max(-MAX_S.y, min(MAX_S.y, y)))</span><br><span class="line"></span><br><span class="line">def update_position(mario, tiles):</span><br><span class="line">    x, y = mario.rect.topleft</span><br><span class="line">    n_steps = max(abs(s) for s in mario.spd)</span><br><span class="line">    for _ in range(n_steps):</span><br><span class="line">        mario.spd = stop_on_collision(mario.spd, get_boundaries(mario.rect, tiles))</span><br><span class="line">        x, y = x + mario.spd.x / n_steps, y + mario.spd.y / n_steps</span><br><span class="line">        mario.rect.topleft = x, y</span><br><span class="line"></span><br><span class="line">def get_boundaries(rect, tiles):</span><br><span class="line">    deltas = &#123;D.n: P(0, -1), D.e: P(1, 0), D.s: P(0, 1), D.w: P(-1, 0)&#125;</span><br><span class="line">    return &#123;d for d, delta in deltas.items() if rect.move(delta).collidelist(tiles) != -1&#125;</span><br><span class="line"></span><br><span class="line">def stop_on_collision(spd, bounds):</span><br><span class="line">    return P(x=0 if (D.w in bounds and spd.x &lt; 0) or (D.e in bounds and spd.x &gt; 0) else spd.x,</span><br><span class="line">             y=0 if (D.n in bounds and spd.y &lt; 0) or (D.s in bounds and spd.y &gt; 0) else spd.y)</span><br><span class="line"></span><br><span class="line">def draw(screen, images, mario, tiles, pressed):</span><br><span class="line">    def get_marios_image_index():</span><br><span class="line">        if D.s not in get_boundaries(mario.rect, tiles):</span><br><span class="line">            return 4</span><br><span class="line">        return next(mario.frame_cycle) if &#123;D.w, D.e&#125; &amp; pressed else 6</span><br><span class="line">    screen.fill((85, 168, 255))</span><br><span class="line">    mario.facing_left = (D.w in pressed) if &#123;D.w, D.e&#125; &amp; pressed else mario.facing_left</span><br><span class="line">    screen.blit(images[get_marios_image_index() + mario.facing_left * 9], mario.rect)</span><br><span class="line">    for t in tiles:</span><br><span class="line">        screen.blit(images[18 if t.x in [0, (W-1)*16] or t.y in [0, (H-1)*16] else 19], t)</span><br><span class="line">    pg.display.flip()</span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    main()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="pandas"><a href="#pandas"></a>Pandas</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># $ pip3 install pandas matplotlib</span><br><span class="line">import pandas as pd</span><br><span class="line">from pandas import Series, DataFrame</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="series"><a href="#series"></a>Series</h3>
<p><strong>Ordered dictionary with a name.</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; Series([1, 2], index=[&#x27;x&#x27;, &#x27;y&#x27;], name=&#x27;a&#x27;)</span><br><span class="line">x    1</span><br><span class="line">y    2</span><br><span class="line">Name: a, dtype: int64</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;Sr&gt; = Series(&lt;list&gt;)                          # Assigns RangeIndex starting at 0.</span><br><span class="line">&lt;Sr&gt; = Series(&lt;dict&gt;)                          # Takes dictionary&#x27;s keys for index.</span><br><span class="line">&lt;Sr&gt; = Series(&lt;dict/Series&gt;, index=&lt;list&gt;)     # Only keeps items with keys specified in index.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;el&gt; = &lt;Sr&gt;.loc[key]                           # Or: &lt;Sr&gt;.iloc[index]</span><br><span class="line">&lt;Sr&gt; = &lt;Sr&gt;.loc[keys]                          # Or: &lt;Sr&gt;.iloc[indexes]</span><br><span class="line">&lt;Sr&gt; = &lt;Sr&gt;.loc[from_key : to_key_inclusive]   # Or: &lt;Sr&gt;.iloc[from_i : to_i_exclusive]</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;el&gt; = &lt;Sr&gt;[key/index]                         # Or: &lt;Sr&gt;.key</span><br><span class="line">&lt;Sr&gt; = &lt;Sr&gt;[keys/indexes]                      # Or: &lt;Sr&gt;[&lt;key_range/range&gt;]</span><br><span class="line">&lt;Sr&gt; = &lt;Sr&gt;[bools]                             # Or: &lt;Sr&gt;.i/loc[bools]</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;Sr&gt; = &lt;Sr&gt; &gt;&lt;== &lt;el/Sr&gt;                       # Returns a Series of bools.</span><br><span class="line">&lt;Sr&gt; = &lt;Sr&gt; +-*/ &lt;el/Sr&gt;                       # Items with non-matching keys get value NaN.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;Sr&gt; = &lt;Sr&gt;.append(&lt;Sr&gt;)                       # Or: pd.concat(&lt;coll_of_Sr&gt;)</span><br><span class="line">&lt;Sr&gt; = &lt;Sr&gt;.combine_first(&lt;Sr&gt;)                # Adds items that are not yet present.</span><br><span class="line">&lt;Sr&gt;.update(&lt;Sr&gt;)                              # Updates items that are already present.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;Sr&gt;.plot.line/area/bar/pie/hist()             # Generates a Matplotlib plot.</span><br><span class="line">plt.show()                                     # Displays the plot. Also plt.savefig(&lt;path&gt;).</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="series-aggregate-transform-map"><a
href="#series--aggregate-transform-map"></a>Series — Aggregate,
Transform, Map:</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;el&gt; = &lt;Sr&gt;.sum/max/mean/idxmax/all()          # Or: &lt;Sr&gt;.agg(lambda &lt;Sr&gt;: &lt;el&gt;)</span><br><span class="line">&lt;Sr&gt; = &lt;Sr&gt;.rank/diff/cumsum/ffill/interpl()   # Or: &lt;Sr&gt;.agg/transform(lambda &lt;Sr&gt;: &lt;Sr&gt;)</span><br><span class="line">&lt;Sr&gt; = &lt;Sr&gt;.fillna(&lt;el&gt;)                       # Or: &lt;Sr&gt;.agg/transform/map(lambda &lt;el&gt;: &lt;el&gt;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; sr = Series([1, 2], index=[&#x27;x&#x27;, &#x27;y&#x27;])</span><br><span class="line">x    1</span><br><span class="line">y    2</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">+-----------------+-------------+-------------+---------------+</span><br><span class="line">|                 |    &#x27;sum&#x27;    |   [&#x27;sum&#x27;]   | &#123;&#x27;s&#x27;: &#x27;sum&#x27;&#125;  |</span><br><span class="line">+-----------------+-------------+-------------+---------------+</span><br><span class="line">| sr.apply(…)     |      3      |    sum  3   |     s  3      |</span><br><span class="line">| sr.agg(…)       |             |             |               |</span><br><span class="line">+-----------------+-------------+-------------+---------------+</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">+-----------------+-------------+-------------+---------------+</span><br><span class="line">|                 |    &#x27;rank&#x27;   |   [&#x27;rank&#x27;]  | &#123;&#x27;r&#x27;: &#x27;rank&#x27;&#125; |</span><br><span class="line">+-----------------+-------------+-------------+---------------+</span><br><span class="line">| sr.apply(…)     |             |      rank   |               |</span><br><span class="line">| sr.agg(…)       |     x  1    |   x     1   |    r  x  1    |</span><br><span class="line">| sr.transform(…) |     y  2    |   y     2   |       y  2    |</span><br><span class="line">+-----------------+-------------+-------------+---------------+</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Last result has a hierarchical index. Use
<code>'&lt;Sr&gt;[key_1, key_2]'</code> to get its values.</strong></li>
</ul>
<h3 id="dataframe"><a href="#dataframe"></a>DataFrame</h3>
<p><strong>Table with labeled rows and columns.</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; DataFrame([[1, 2], [3, 4]], index=[&#x27;a&#x27;, &#x27;b&#x27;], columns=[&#x27;x&#x27;, &#x27;y&#x27;])</span><br><span class="line">   x  y</span><br><span class="line">a  1  2</span><br><span class="line">b  3  4</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;DF&gt;    = DataFrame(&lt;list_of_rows&gt;)            # Rows can be either lists, dicts or series.</span><br><span class="line">&lt;DF&gt;    = DataFrame(&lt;dict_of_columns&gt;)         # Columns can be either lists, dicts or series.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;el&gt;    = &lt;DF&gt;.loc[row_key, column_key]        # Or: &lt;DF&gt;.iloc[row_index, column_index]</span><br><span class="line">&lt;Sr/DF&gt; = &lt;DF&gt;.loc[row_key/s]                  # Or: &lt;DF&gt;.iloc[row_index/es]</span><br><span class="line">&lt;Sr/DF&gt; = &lt;DF&gt;.loc[:, column_key/s]            # Or: &lt;DF&gt;.iloc[:, column_index/es]</span><br><span class="line">&lt;DF&gt;    = &lt;DF&gt;.loc[row_bools, column_bools]    # Or: &lt;DF&gt;.iloc[row_bools, column_bools]</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;Sr/DF&gt; = &lt;DF&gt;[column_key/s]                   # Or: &lt;DF&gt;.column_key</span><br><span class="line">&lt;DF&gt;    = &lt;DF&gt;[row_bools]                      # Keeps rows as specified by bools.</span><br><span class="line">&lt;DF&gt;    = &lt;DF&gt;[&lt;DF_of_bools&gt;]                  # Assigns NaN to False values.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;DF&gt;    = &lt;DF&gt; &gt;&lt;== &lt;el/Sr/DF&gt;                 # Returns DF of bools. Sr is treated as a row.</span><br><span class="line">&lt;DF&gt;    = &lt;DF&gt; +-*/ &lt;el/Sr/DF&gt;                 # Items with non-matching keys get value NaN.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;DF&gt;    = &lt;DF&gt;.set_index(column_key)           # Replaces row keys with values from a column.</span><br><span class="line">&lt;DF&gt;    = &lt;DF&gt;.reset_index()                   # Moves row keys to a column named index.</span><br><span class="line">&lt;DF&gt;    = &lt;DF&gt;.sort_index(ascending=True)      # Sorts rows by row keys.</span><br><span class="line">&lt;DF&gt;    = &lt;DF&gt;.sort_values(column_key/s)       # Sorts rows by the passed column/s.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="dataframe-merge-join-concat"><a
href="#dataframe--merge-join-concat"></a>DataFrame — Merge, Join,
Concat:</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; l = DataFrame([[1, 2], [3, 4]], index=[&#x27;a&#x27;, &#x27;b&#x27;], columns=[&#x27;x&#x27;, &#x27;y&#x27;])</span><br><span class="line">   x  y</span><br><span class="line">a  1  2</span><br><span class="line">b  3  4</span><br><span class="line">&gt;&gt;&gt; r = DataFrame([[4, 5], [6, 7]], index=[&#x27;b&#x27;, &#x27;c&#x27;], columns=[&#x27;y&#x27;, &#x27;z&#x27;])</span><br><span class="line">   y  z</span><br><span class="line">b  4  5</span><br><span class="line">c  6  7</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">+------------------------+---------------+------------+------------+--------------------------+</span><br><span class="line">|                        |    &#x27;outer&#x27;    |   &#x27;inner&#x27;  |   &#x27;left&#x27;   |       Description        |</span><br><span class="line">+------------------------+---------------+------------+------------+--------------------------+</span><br><span class="line">| l.merge(r, on=&#x27;y&#x27;,     |    x   y   z  | x   y   z  | x   y   z  | Joins/merges on column.  |</span><br><span class="line">|            how=…)      | 0  1   2   .  | 3   4   5  | 1   2   .  | Also accepts left_on and |</span><br><span class="line">|                        | 1  3   4   5  |            | 3   4   5  | right_on parameters.     |</span><br><span class="line">|                        | 2  .   6   7  |            |            | Uses &#x27;inner&#x27; by default. |</span><br><span class="line">+------------------------+---------------+------------+------------+--------------------------+</span><br><span class="line">| l.join(r, lsuffix=&#x27;l&#x27;, |    x yl yr  z |            | x yl yr  z | Joins/merges on row keys.|</span><br><span class="line">|           rsuffix=&#x27;r&#x27;, | a  1  2  .  . | x yl yr  z | 1  2  .  . | Uses &#x27;left&#x27; by default.  |</span><br><span class="line">|           how=…)       | b  3  4  4  5 | 3  4  4  5 | 3  4  4  5 | If r is a Series, it is  |</span><br><span class="line">|                        | c  .  .  6  7 |            |            | treated as a column.     |</span><br><span class="line">+------------------------+---------------+------------+------------+--------------------------+</span><br><span class="line">| pd.concat([l, r],      |    x   y   z  |     y      |            | Adds rows at the bottom. |</span><br><span class="line">|           axis=0,      | a  1   2   .  |     2      |            | Uses &#x27;outer&#x27; by default. |</span><br><span class="line">|           join=…)      | b  3   4   .  |     4      |            | A Series is treated as a |</span><br><span class="line">|                        | b  .   4   5  |     4      |            | column. Use l.append(sr) |</span><br><span class="line">|                        | c  .   6   7  |     6      |            | to add a row instead.    |</span><br><span class="line">+------------------------+---------------+------------+------------+--------------------------+</span><br><span class="line">| pd.concat([l, r],      |    x  y  y  z |            |            | Adds columns at the      |</span><br><span class="line">|           axis=1,      | a  1  2  .  . | x  y  y  z |            | right end. Uses &#x27;outer&#x27;  |</span><br><span class="line">|           join=…)      | b  3  4  4  5 | 3  4  4  5 |            | by default. A Series is  |</span><br><span class="line">|                        | c  .  .  6  7 |            |            | treated as a column.     |</span><br><span class="line">+------------------------+---------------+------------+------------+--------------------------+</span><br><span class="line">| l.combine_first(r)     |    x   y   z  |            |            | Adds missing rows and    |</span><br><span class="line">|                        | a  1   2   .  |            |            | columns. Also updates    |</span><br><span class="line">|                        | b  3   4   5  |            |            | items that contain NaN.  |</span><br><span class="line">|                        | c  .   6   7  |            |            | R must be a DataFrame.   |</span><br><span class="line">+------------------------+---------------+------------+------------+--------------------------+</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="dataframe-aggregate-transform-map"><a
href="#dataframe--aggregate-transform-map"></a>DataFrame — Aggregate,
Transform, Map:</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;Sr&gt; = &lt;DF&gt;.sum/max/mean/idxmax/all()          # Or: &lt;DF&gt;.apply/agg(lambda &lt;Sr&gt;: &lt;el&gt;)</span><br><span class="line">&lt;DF&gt; = &lt;DF&gt;.rank/diff/cumsum/ffill/interpl()   # Or: &lt;DF&gt;.apply/agg/transfrm(lambda &lt;Sr&gt;: &lt;Sr&gt;)</span><br><span class="line">&lt;DF&gt; = &lt;DF&gt;.fillna(&lt;el&gt;)                       # Or: &lt;DF&gt;.applymap(lambda &lt;el&gt;: &lt;el&gt;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>All operations operate on columns by default. Pass
<code>'axis=1'</code> to process the rows instead.</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; df = DataFrame([[1, 2], [3, 4]], index=[&#x27;a&#x27;, &#x27;b&#x27;], columns=[&#x27;x&#x27;, &#x27;y&#x27;])</span><br><span class="line">   x  y</span><br><span class="line">a  1  2</span><br><span class="line">b  3  4</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">+-----------------+-------------+-------------+---------------+</span><br><span class="line">|                 |    &#x27;sum&#x27;    |   [&#x27;sum&#x27;]   | &#123;&#x27;x&#x27;: &#x27;sum&#x27;&#125;  |</span><br><span class="line">+-----------------+-------------+-------------+---------------+</span><br><span class="line">| df.apply(…)     |             |       x  y  |               |</span><br><span class="line">| df.agg(…)       |     x  4    |  sum  4  6  |     x  4      |</span><br><span class="line">|                 |     y  6    |             |               |</span><br><span class="line">+-----------------+-------------+-------------+---------------+</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">+-----------------+-------------+-------------+---------------+</span><br><span class="line">|                 |    &#x27;rank&#x27;   |   [&#x27;rank&#x27;]  | &#123;&#x27;x&#x27;: &#x27;rank&#x27;&#125; |</span><br><span class="line">+-----------------+-------------+-------------+---------------+</span><br><span class="line">| df.apply(…)     |      x  y   |      x    y |        x      |</span><br><span class="line">| df.agg(…)       |   a  1  1   |   rank rank |     a  1      |</span><br><span class="line">| df.transform(…) |   b  2  2   | a    1    1 |     b  2      |</span><br><span class="line">|                 |             | b    2    2 |               |</span><br><span class="line">+-----------------+-------------+-------------+---------------+</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Use <code>'&lt;DF&gt;[col_key_1, col_key_2][row_key]'</code>
to get the fifth result's values.</strong></li>
</ul>
<h4 id="dataframe-plot-encode-decode"><a
href="#dataframe--plot-encode-decode"></a>DataFrame — Plot, Encode,
Decode:</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;DF&gt;.plot.line/bar/hist/scatter/box()          # Also: `x=column_key, y=column_key/s`.</span><br><span class="line">plt.show()                                     # Displays the plot. Also plt.savefig(&lt;path&gt;).</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;DF&gt; = pd.read_json/html(&#x27;&lt;str/path/url&gt;&#x27;)     # Run `$ pip3 install beautifulsoup4 lxml`.</span><br><span class="line">&lt;DF&gt; = pd.read_csv/pickle/excel(&#x27;&lt;path/url&gt;&#x27;)  # Use `sheet_name=None` to get all Excel sheets.</span><br><span class="line">&lt;DF&gt; = pd.read_sql(&#x27;&lt;table/query&gt;&#x27;, &lt;conn.&gt;)   # Accepts SQLite3 or SQLAlchemy connection.</span><br><span class="line">&lt;DF&gt; = pd.read_clipboard()                     # Reads a copied table from the clipboard.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dict&gt; = &lt;DF&gt;.to_dict([&#x27;d/l/s/…&#x27;])             # Returns columns as dicts, lists or series.</span><br><span class="line">&lt;str&gt;  = &lt;DF&gt;.to_json/html/csv([&lt;path&gt;])       # Also to_markdown/latex([&lt;path&gt;]).</span><br><span class="line">&lt;DF&gt;.to_pickle/excel(&lt;path&gt;)                   # Run `$ pip3 install openpyxl` for xlsx files.</span><br><span class="line">&lt;DF&gt;.to_sql(&#x27;&lt;table_name&gt;&#x27;, &lt;connection&gt;)      # Accepts SQLite3 or SQLAlchemy connection.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="groupby"><a href="#groupby"></a>GroupBy</h3>
<p><strong>Object that groups together rows of a dataframe based on the
value of the passed column.</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; df = DataFrame([[1, 2, 3], [4, 5, 6], [7, 8, 6]], index=list(&#x27;abc&#x27;), columns=list(&#x27;xyz&#x27;))</span><br><span class="line">&gt;&gt;&gt; df.groupby(&#x27;z&#x27;).get_group(6)</span><br><span class="line">   x  y</span><br><span class="line">b  4  5</span><br><span class="line">c  7  8</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;GB&gt; = &lt;DF&gt;.groupby(column_key/s)              # Splits DF into groups based on passed column.</span><br><span class="line">&lt;DF&gt; = &lt;GB&gt;.apply(&lt;func&gt;)                      # Maps each group. Func can return DF, Sr or el.</span><br><span class="line">&lt;GB&gt; = &lt;GB&gt;[column_key]                        # Single column GB. All operations return a Sr.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="groupby-aggregate-transform-map"><a
href="#groupby--aggregate-transform-map"></a>GroupBy — Aggregate,
Transform, Map:</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;DF&gt; = &lt;GB&gt;.sum/max/mean/idxmax/all()          # Or: &lt;GB&gt;.agg(lambda &lt;Sr&gt;: &lt;el&gt;)</span><br><span class="line">&lt;DF&gt; = &lt;GB&gt;.rank/diff/cumsum/ffill()           # Or: &lt;GB&gt;.transform(lambda &lt;Sr&gt;: &lt;Sr&gt;)</span><br><span class="line">&lt;DF&gt; = &lt;GB&gt;.fillna(&lt;el&gt;)                       # Or: &lt;GB&gt;.transform(lambda &lt;Sr&gt;: &lt;Sr&gt;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; gb = df.groupby(&#x27;z&#x27;)</span><br><span class="line">      x  y  z</span><br><span class="line">3: a  1  2  3</span><br><span class="line">6: b  4  5  6</span><br><span class="line">   c  7  8  6</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">+-----------------+-------------+-------------+-------------+---------------+</span><br><span class="line">|                 |    &#x27;sum&#x27;    |    &#x27;rank&#x27;   |   [&#x27;rank&#x27;]  | &#123;&#x27;x&#x27;: &#x27;rank&#x27;&#125; |</span><br><span class="line">+-----------------+-------------+-------------+-------------+---------------+</span><br><span class="line">| gb.agg(…)       |      x   y  |      x  y   |      x    y |        x      |</span><br><span class="line">|                 |  z          |   a  1  1   |   rank rank |     a  1      |</span><br><span class="line">|                 |  3   1   2  |   b  1  1   | a    1    1 |     b  1      |</span><br><span class="line">|                 |  6  11  13  |   c  2  2   | b    1    1 |     c  2      |</span><br><span class="line">|                 |             |             | c    2    2 |               |</span><br><span class="line">+-----------------+-------------+-------------+-------------+---------------+</span><br><span class="line">| gb.transform(…) |      x   y  |      x  y   |             |               |</span><br><span class="line">|                 |  a   1   2  |   a  1  1   |             |               |</span><br><span class="line">|                 |  b  11  13  |   b  1  1   |             |               |</span><br><span class="line">|                 |  c  11  13  |   c  2  2   |             |               |</span><br><span class="line">+-----------------+-------------+-------------+-------------+---------------+</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="rolling"><a href="#rolling"></a>Rolling</h3>
<p><strong>Object for rolling window calculations.</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;RSr/RDF/RGB&gt; = &lt;Sr/DF/GB&gt;.rolling(win_size)   # Also: `min_periods=None, center=False`.</span><br><span class="line">&lt;RSr/RDF/RGB&gt; = &lt;RDF/RGB&gt;[column_key/s]        # Or: &lt;RDF/RGB&gt;.column_key</span><br><span class="line">&lt;Sr/DF&gt;       = &lt;R&gt;.mean/sum/max()             # Or: &lt;R&gt;.apply/agg(&lt;agg_func/str&gt;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="plotly"><a href="#plotly"></a>Plotly</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># $ pip3 install plotly kaleido</span><br><span class="line">from plotly.express import line</span><br><span class="line">&lt;Figure&gt; = line(&lt;DF&gt;, x=&lt;col_name&gt;, y=&lt;col_name&gt;)        # Or: line(x=&lt;list&gt;, y=&lt;list&gt;)</span><br><span class="line">&lt;Figure&gt;.update_layout(margin=dict(t=0, r=0, b=0, l=0))  # Or: paper_bgcolor=&#x27;rgba(0, 0, 0, 0)&#x27;</span><br><span class="line">&lt;Figure&gt;.write_html/json/image(&#x27;&lt;path&gt;&#x27;)                 # Also: &lt;Figure&gt;.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="covid-deaths-by-continent"><a
href="#covid-deaths-by-continent"></a>Covid deaths by continent:</h4>
<p><a
href="/gto76/python-cheatsheet/blob/main/web/covid_deaths.png"><img
src="https://github.com/gto76/python-cheatsheet/raw/main/web/covid_deaths.png" /></a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">covid = pd.read_csv(&#x27;https://covid.ourworldindata.org/data/owid-covid-data.csv&#x27;,</span><br><span class="line">                    usecols=[&#x27;iso_code&#x27;, &#x27;date&#x27;, &#x27;total_deaths&#x27;, &#x27;population&#x27;])</span><br><span class="line">continents = pd.read_csv(&#x27;https://gist.githubusercontent.com/stevewithington/20a69c0b6d2ff&#x27;</span><br><span class="line">                         &#x27;846ea5d35e5fc47f26c/raw/country-and-continent-codes-list-csv.csv&#x27;,</span><br><span class="line">                         usecols=[&#x27;Three_Letter_Country_Code&#x27;, &#x27;Continent_Name&#x27;])</span><br><span class="line">df = pd.merge(covid, continents, left_on=&#x27;iso_code&#x27;, right_on=&#x27;Three_Letter_Country_Code&#x27;)</span><br><span class="line">df = df.groupby([&#x27;Continent_Name&#x27;, &#x27;date&#x27;]).sum().reset_index()</span><br><span class="line">df[&#x27;Total Deaths per Million&#x27;] = df.total_deaths * 1e6 / df.population</span><br><span class="line">df = df[df.date &gt; &#x27;2020-03-14&#x27;]</span><br><span class="line">df = df.rename(&#123;&#x27;date&#x27;: &#x27;Date&#x27;, &#x27;Continent_Name&#x27;: &#x27;Continent&#x27;&#125;, axis=&#x27;columns&#x27;)</span><br><span class="line">line(df, x=&#x27;Date&#x27;, y=&#x27;Total Deaths per Million&#x27;, color=&#x27;Continent&#x27;).show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="confirmed-covid-cases-dow-jones-gold-and-bitcoin-price"><a
href="#confirmed-covid-cases-dow-jones-gold-and-bitcoin-price"></a>Confirmed
covid cases, Dow Jones, Gold, and Bitcoin price:</h4>
<p><a href="/gto76/python-cheatsheet/blob/main/web/covid_cases.png"><img
src="https://github.com/gto76/python-cheatsheet/raw/main/web/covid_cases.png" /></a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">import plotly.graph_objects as go</span><br><span class="line"></span><br><span class="line">def main():</span><br><span class="line">    display_data(wrangle_data(*scrape_data()))</span><br><span class="line"></span><br><span class="line">def scrape_data():</span><br><span class="line">    def scrape_covid():</span><br><span class="line">        url = &#x27;https://covid.ourworldindata.org/data/owid-covid-data.csv&#x27;</span><br><span class="line">        df = pd.read_csv(url, usecols=[&#x27;location&#x27;, &#x27;date&#x27;, &#x27;total_cases&#x27;])</span><br><span class="line">        return df[df.location == &#x27;World&#x27;].set_index(&#x27;date&#x27;).total_cases</span><br><span class="line">    def scrape_yahoo(slug):</span><br><span class="line">        url = f&#x27;https://query1.finance.yahoo.com/v7/finance/download/&#123;slug&#125;&#x27; + \</span><br><span class="line">              &#x27;?period1=1579651200&amp;period2=9999999999&amp;interval=1d&amp;events=history&#x27;</span><br><span class="line">        df = pd.read_csv(url, usecols=[&#x27;Date&#x27;, &#x27;Close&#x27;])</span><br><span class="line">        return df.set_index(&#x27;Date&#x27;).Close</span><br><span class="line">    out = scrape_covid(), scrape_yahoo(&#x27;BTC-USD&#x27;), scrape_yahoo(&#x27;GC=F&#x27;), scrape_yahoo(&#x27;^DJI&#x27;)</span><br><span class="line">    return map(pd.Series.rename, out, [&#x27;Total Cases&#x27;, &#x27;Bitcoin&#x27;, &#x27;Gold&#x27;, &#x27;Dow Jones&#x27;])</span><br><span class="line"></span><br><span class="line">def wrangle_data(covid, bitcoin, gold, dow):</span><br><span class="line">    df = pd.concat([bitcoin, gold, dow], axis=1)  # Joins columns on dates.</span><br><span class="line">    df = df.sort_index().interpolate()            # Sorts by date and interpolates NaN-s.</span><br><span class="line">    df = df.loc[&#x27;2020-02-23&#x27;:]                    # Discards rows before &#x27;2020-02-23&#x27;.</span><br><span class="line">    df = (df / df.iloc[0]) * 100                  # Calculates percentages relative to day 1.</span><br><span class="line">    df = df.join(covid)                           # Adds column with covid cases.</span><br><span class="line">    return df.sort_values(df.index[-1], axis=1)   # Sorts columns by last day&#x27;s value.</span><br><span class="line"></span><br><span class="line">def display_data(df):</span><br><span class="line">    figure = go.Figure()</span><br><span class="line">    for col_name in reversed(df.columns):</span><br><span class="line">        yaxis = &#x27;y1&#x27; if col_name == &#x27;Total Cases&#x27; else &#x27;y2&#x27;</span><br><span class="line">        trace = go.Scatter(x=df.index, y=df[col_name], name=col_name, yaxis=yaxis)</span><br><span class="line">        figure.add_trace(trace)</span><br><span class="line">    figure.update_layout(</span><br><span class="line">        yaxis1=dict(title=&#x27;Total Cases&#x27;, rangemode=&#x27;tozero&#x27;),</span><br><span class="line">        yaxis2=dict(title=&#x27;%&#x27;, rangemode=&#x27;tozero&#x27;, overlaying=&#x27;y&#x27;, side=&#x27;right&#x27;),</span><br><span class="line">        legend=dict(x=1.1),</span><br><span class="line">        height=450</span><br><span class="line">    ).show()</span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    main()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="pysimplegui"><a href="#pysimplegui"></a>PySimpleGUI</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># $ pip3 install PySimpleGUI</span><br><span class="line">import PySimpleGUI as sg</span><br><span class="line">layout = [[sg.Text(&quot;What&#x27;s your name?&quot;)], [sg.Input()], [sg.Button(&#x27;Ok&#x27;)]]</span><br><span class="line">window = sg.Window(&#x27;Window Title&#x27;, layout)</span><br><span class="line">event, values = window.read()</span><br><span class="line">print(f&#x27;Hello &#123;values[0]&#125;!&#x27; if event == &#x27;Ok&#x27; else &#x27;&#x27;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="appendix"><a href="#appendix"></a>Appendix</h2>
<h3 id="cython"><a href="#cython"></a>Cython</h3>
<p><strong>Library that compiles Python code into C.</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># $ pip3 install cython</span><br><span class="line">import pyximport; pyximport.install()</span><br><span class="line">import &lt;cython_script&gt;</span><br><span class="line">&lt;cython_script&gt;.main()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="definitions"><a href="#definitions"></a>Definitions:</h4>
<ul>
<li><strong>All <code>'cdef'</code> definitions are optional, but they
contribute to the speed-up.</strong></li>
<li><strong>Script needs to be saved with a <code>'pyx'</code>
extension.</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cdef &lt;ctype&gt; &lt;var_name&gt; = &lt;el&gt;</span><br><span class="line">cdef &lt;ctype&gt;[n_elements] &lt;var_name&gt; = [&lt;el_1&gt;, &lt;el_2&gt;, ...]</span><br><span class="line">cdef &lt;ctype/void&gt; &lt;func_name&gt;(&lt;ctype&gt; &lt;arg_name&gt;): ...</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cdef class &lt;class_name&gt;:</span><br><span class="line">    cdef public &lt;ctype&gt; &lt;attr_name&gt;</span><br><span class="line">    def __init__(self, &lt;ctype&gt; &lt;arg_name&gt;):</span><br><span class="line">        self.&lt;attr_name&gt; = &lt;arg_name&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cdef enum &lt;enum_name&gt;: &lt;member_name_1&gt;, &lt;member_name_2&gt;, ...</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="pyinstaller"><a href="#pyinstaller"></a>PyInstaller</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ pip3 install pyinstaller</span><br><span class="line">$ pyinstaller script.py                        # Compiles into &#x27;./dist/script&#x27; directory.</span><br><span class="line">$ pyinstaller script.py --onefile              # Compiles into &#x27;./dist/script&#x27; console app.</span><br><span class="line">$ pyinstaller script.py --windowed             # Compiles into &#x27;./dist/script&#x27; windowed app.</span><br><span class="line">$ pyinstaller script.py --add-data &#x27;&lt;path&gt;:.&#x27;  # Adds file to the root of the executable.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>File paths need to be updated to
<code>'os.path.join(sys._MEIPASS, &lt;path&gt;)'</code>.</strong></li>
</ul>
<h3 id="basic-script-template"><a
href="#basic-script-template"></a>Basic Script Template</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/env python3</span><br><span class="line">#</span><br><span class="line"># Usage: .py</span><br><span class="line">#</span><br><span class="line"></span><br><span class="line">from sys import argv, exit</span><br><span class="line">from collections import defaultdict, namedtuple</span><br><span class="line">from dataclasses import make_dataclass</span><br><span class="line">from enum import Enum</span><br><span class="line">import functools as ft, itertools as it, operator as op, re</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def main():</span><br><span class="line">    pass</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">###</span><br><span class="line">##  UTIL</span><br><span class="line">#</span><br><span class="line"></span><br><span class="line">def read_file(filename):</span><br><span class="line">    with open(filename, encoding=&#x27;utf-8&#x27;) as file:</span><br><span class="line">        return file.readlines()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    main()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="index"><a href="#index"></a>Index</h2>
<ul>
<li><strong>Only available in the <a
target="_blank" rel="noopener" href="https://transactions.sendowl.com/products/78175486/4422834F/view">PDF</a>.</strong></li>
<li><strong>Ctrl+F / ⌘F is usually sufficient.</strong></li>
<li><strong>Searching <code>'#&lt;title&gt;'</code> on the <a
target="_blank" rel="noopener" href="https://gto76.github.io/python-cheatsheet/">webpage</a> will limit
the search to the titles.</strong></li>
</ul>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.4.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.4.0/dist/mindmap.min.css">
    </div>

    
    
    

    <footer class="post-footer">
          <div class="reward-container">
  <div>Buy me a coffee</div>
  <button onclick="document.querySelector('.post-reward').classList.toggle('active');">
    赞赏
  </button>
  <div class="post-reward">
      <div>
        <img src="/images/wechatpay.png" alt="qiaogaojian 微信">
        <span>微信</span>
      </div>
      <div>
        <img src="/images/alipay.png" alt="qiaogaojian 支付宝">
        <span>支付宝</span>
      </div>
      <div>
        <img src="/images/bitcoin.png" alt="qiaogaojian 比特币">
        <span>比特币</span>
      </div>

  </div>
</div>

          <div class="post-tags">
              <a href="/tags/srcard/" rel="tag"><i class="fa fa-tag"></i> srcard</a>
              <a href="/tags/python/" rel="tag"><i class="fa fa-tag"></i> python</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/-269919782890226714/" rel="prev" title="Learn Regex the Easy Way">
                  <i class="fa fa-chevron-left"></i> Learn Regex the Easy Way
                </a>
            </div>
            <div class="post-nav-item">
            </div>
          </div>
    </footer>
  </article>
  
  
  



      
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

    </div>
  </main>

  <footer class="footer">
    <div class="footer-inner">
      

      

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">qiaogaojian</span>
</div>
<div class="busuanzi-count">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
</div>
<!--
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>
-->

<span id="timeDate">载入天数...</span>
<script>
    var now = new Date(); 
    function createtime() { 
        var grt= new Date("07/01/2016 19:00:00"); //在此处修改你的建站时间
        now.setTime(now.getTime()+250); 
        days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days); 
        hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours); 

        if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum); 
        mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;} 
        seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum); 
        snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;} 

        document.getElementById("timeDate").innerHTML = "本站已安全运行 " + dnum + " 天 " + hnum + " 小时 " + mnum + " 分 " + snum + " 秒"; 
        // document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒"; 
    } 
setInterval("createtime()",250);
</script>
    </div>
  </footer>

  
  <script src="//cdn.jsdelivr.net/npm/animejs@3.2.0/lib/anime.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  




  <script src="/js/local-search.js"></script>








<script>
document.querySelectorAll('.pdfobject-container').forEach(element => {
  const url = element.dataset.target;
  const pdfOpenParams = {
    navpanes : 0,
    toolbar  : 0,
    statusbar: 0,
    pagemode : 'thumbs',
    view     : 'FitH'
  };
  const pdfOpenFragment = '#' + Object.entries(pdfOpenParams).map(([key, value]) => `${key}=${encodeURIComponent(value)}`).join('&');
  const fullURL = `/lib/pdf/web/viewer.html?file=${encodeURIComponent(url)}${pdfOpenFragment}`;

  if (NexT.utils.supportsPDFs()) {
    element.innerHTML = `<embed class="pdfobject" src="${url + pdfOpenFragment}" type="application/pdf" style="height: ${element.dataset.height};">`;
  } else {
    element.innerHTML = `<iframe src="${fullURL}" style="height: ${element.dataset.height};" frameborder="0"></iframe>`;
  }
});
</script>


<script>
if (document.querySelectorAll('.mermaid').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mermaid@8.7.0/dist/mermaid.min.js', () => {
    mermaid.init({
      theme    : 'dark',
      logLevel : 3,
      flowchart: { curve     : 'linear' },
      gantt    : { axisFormat: '%m/%d/%Y' },
      sequence : { actorMargin: 50 }
    }, '.mermaid');
  }, window.mermaid);
}
</script>





  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>








  

  
      <script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              const target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    const script = document.createElement('script');
    script.src = '//cdn.jsdelivr.net/npm/mathjax@3.1.0/es5/tex-mml-chtml.js';
    script.defer = true;
    document.head.appendChild(script);
  } else {
    MathJax.startup.document.state(0);
    MathJax.typesetClear();
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  
<script>
NexT.utils.loadComments('#valine-comments', () => {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js', () => {
    new Valine(Object.assign({
      el  : '#valine-comments',
      path: "/-5756343694020473847/",
    }, {"enable":true,"appId":"waBo9VOFFCiurlsGpdJsWVUv-gzGzoHsz","appKey":"d3kQWAKtnshFxkzHG3iu6wvB","placeholder":"要不说点啥?","avatar":"mm","meta":["nick","mail"],"pageSize":10,"lang":null,"visitor":true,"comment_count":true,"recordIP":true,"serverURLs":null,"enableQQ":false,"requiredFields":["nick"]}
    ));
  }, window.Valine);
});
</script>

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"jsonPath":"/live2dw/assets/wanko.model.json"},"display":{"position":"left","width":210,"height":360},"mobile":{"show":false},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
